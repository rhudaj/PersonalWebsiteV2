<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>04 — Analyzing Text </title><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/></head><body><article id="1142e7d3-01e5-8016-9958-d8a898651936" class="page sans"><header><div class="page-header-icon undefined"><img class="icon" src="https://www.notion.so/icons/folder_purple.svg"/></div><h1 class="page-title">04 — Analyzing Text </h1><p class="page-description"></p></header><div class="page-body"><figure class="block-color-default_background callout" style="white-space:pre-wrap;display:flex" id="1342e7d3-01e5-80e5-ae49-e6ce974c0082"><div style="font-size:1.5em"><img class="icon" src="https://www.notion.so/icons/question-mark_gray.svg"/></div><div style="width:100%"><p id="1142e7d3-01e5-80a3-9c29-e1edbfb411c4" class=""><mark class="highlight-red"><strong>Natural Language Processing</strong></mark></p><hr id="1342e7d3-01e5-80db-ae22-e08c9562520a"/><ul id="1142e7d3-01e5-80f5-9a04-f34e6ba3997b" class="bulleted-list"><li style="list-style-type:disc">Making human communication, such as speech and text, comprehensible to computers.</li></ul><ul id="1142e7d3-01e5-80e1-b02f-ff40073b720e" class="bulleted-list"><li style="list-style-type:disc">Different <span style="border-bottom:0.05em solid">language models</span>; e.g. Large Language Model</li></ul></div></figure><figure class="block-color-default_background callout" style="white-space:pre-wrap;display:flex" id="1342e7d3-01e5-8062-90f9-c79d2316bba7"><div style="font-size:1.5em"><img class="icon" src="https://www.notion.so/icons/question-mark_gray.svg"/></div><div style="width:100%"><p id="bd78901b-fc4f-4992-b306-beb6170bba9c" class=""><mark class="highlight-red"><strong>Probabilistic Model (No-*)</strong></mark></p><p id="12f2e7d3-01e5-80b0-9b63-d85c73a4041a" class="">Sentences <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>w</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">w_1,\dots, w_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span>, have a probability of occurring:</p><figure id="12f2e7d3-01e5-80c1-8908-dda1cfa448a1" class="equation"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>w</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>w</mi><mi>k</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(w_1, \dots,w_k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div></figure><hr id="1342e7d3-01e5-8011-82f4-e538bd777f21"/><ul id="1142e7d3-01e5-8008-8d16-eb70609ac8d7" class="toggle"><li><details open=""><summary>This lets us rank alternatives</summary><ul id="1142e7d3-01e5-8073-9a9f-fabe1278d428" class="bulleted-list"><li style="list-style-type:disc">P(“High winds expected”) &gt; P(“Large winds expected”) </li></ul><ul id="1142e7d3-01e5-80fe-8ec2-f6dffe172bcd" class="bulleted-list"><li style="list-style-type:disc">P(“Waterloo is a great city!”) &gt; P(“Waterloo is a grate city!”) </li></ul></details></li></ul><ul id="12f2e7d3-01e5-8013-9319-c68aac9466c2" class="toggle"><li><details open=""><summary>LLMs (basically) work by: </summary><p id="12f2e7d3-01e5-80aa-a217-c84f25a2ce7b" class="">Given <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>w</mi><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">w_1,\dots, w_{k-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span>, build on it: </p><ol type="1" id="1142e7d3-01e5-8029-96e1-e2cd213c7b87" class="numbered-list" start="1"><li>Get the distribution for <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">w_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span></li></ol><ol type="1" id="1142e7d3-01e5-80cc-941b-e09fe99b106b" class="numbered-list" start="2"><li>Sample a word from distribution </li></ol><ol type="1" id="1142e7d3-01e5-8087-a1bf-ddd2362a1ab7" class="numbered-list" start="3"><li>Repeat until you generate a special “stop” word (e.g. EOL). </li></ol></details></li></ul><ul id="1342e7d3-01e5-804d-b1fb-de8756bb1436" class="toggle"><li><details open=""><summary>Costly </summary><p id="12f2e7d3-01e5-801e-9d11-edc9e4178dea" class=""><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><mi>V</mi><msup><mi mathvariant="normal">∣</mi><mi>k</mi></msup></mrow><annotation encoding="application/x-tex">|V|^{k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> unique sentences </p><ul id="12f2e7d3-01e5-80e3-9512-eb663bd40388" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><mi>V</mi><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">|V|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mord">∣</span></span></span></span></span><span>﻿</span></span> is unbounded </li></ul><ul id="12f2e7d3-01e5-805a-bdee-eb8ecde1e623" class="bulleted-list"><li style="list-style-type:disc">For this model, <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span><span>﻿</span></span> is unbounded. </li></ul><p id="12f2e7d3-01e5-80e3-9246-cccefae5734e" class="">That’s a lot of probabilities to keep track of!</p></details></li></ul><ul id="1142e7d3-01e5-80e4-bcfb-df7780b9745c" class="toggle"><li><details open=""><summary><mark class="highlight-purple">Example</mark></summary><p id="1142e7d3-01e5-80d1-83a2-fbb8c447f793" class=""><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mtext>“I saw a van”</mtext><mo stretchy="false">)</mo><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mtext>“I”</mtext><mo stretchy="false">)</mo><mo>⋅</mo><mi>P</mi><mo stretchy="false">(</mo><mtext>“saw”</mtext><mi mathvariant="normal">∣</mi><mtext>“I”</mtext><mo stretchy="false">)</mo><mo>⋅</mo><mi>P</mi><mo stretchy="false">(</mo><mtext>a</mtext><mi mathvariant="normal">∣</mi><mtext>I saw</mtext><mo stretchy="false">)</mo><mo>⋅</mo><mi>P</mi><mo stretchy="false">(</mo><mtext>van</mtext><mi mathvariant="normal">∣</mi><mtext>I saw a</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(\text{``I saw a van&#x27;&#x27;}) = P(\text{``I&#x27;&#x27;})
\cdot
P(\text{``saw&#x27;&#x27;}|\text{``I&#x27;&#x27;})
\cdot
P(\text{a}|\text{I saw})
\cdot
P(\text{van}|\text{I saw a})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord text"><span class="mord">“I saw a van”</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord text"><span class="mord">“I”</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord text"><span class="mord">“saw”</span></span><span class="mord">∣</span><span class="mord text"><span class="mord">“I”</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord text"><span class="mord">a</span></span><span class="mord">∣</span><span class="mord text"><span class="mord">I saw</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord text"><span class="mord">van</span></span><span class="mord">∣</span><span class="mord text"><span class="mord">I saw a</span></span><span class="mclose">)</span></span></span></span></span><span>﻿</span></span></p></details></li></ul></div></figure><figure class="block-color-default_background callout" style="white-space:pre-wrap;display:flex" id="1342e7d3-01e5-8083-ac72-cbc892f77b53"><div style="font-size:1.5em"><img class="icon" src="https://www.notion.so/icons/question-mark_gray.svg"/></div><div style="width:100%"><p id="268db2a4-261e-4054-9f0e-e631864225b0" class=""><mark class="highlight-red"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></span><span>﻿</span></span></mark><mark class="highlight-red"><strong>-Gram Model</strong></mark></p><p id="1342e7d3-01e5-80de-bd1a-c3c5b095c78c" class=""><em><mark class="highlight-gray">Generalization of No-* — restrict to last </mark></em><em><mark class="highlight-gray"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></span><span>﻿</span></span></mark></em><em><mark class="highlight-gray"> words. </mark></em></p><p id="12f2e7d3-01e5-809f-8b0c-d472a05da0ac" class="">Assumes distribution of <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>N</mi></msub></mrow><annotation encoding="application/x-tex">w_N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> depends ONLY on previous <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">N-1 </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span>﻿</span></span> words</p><figure id="12f2e7d3-01e5-807e-b9a2-d417d3cbe2fa" class="equation"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>w</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>w</mi><mi>k</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><msub><mi>w</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>w</mi><mrow><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(w_1, \dots,w_k)=P(w_1, \dots,w_{N-1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div></figure><hr id="1342e7d3-01e5-8060-bd71-cd4191d356e4"/><ul id="12e2e7d3-01e5-80f2-b903-d7e635daf568" class="toggle"><li><details open=""><summary>Choosing <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></span><span>﻿</span></span></summary><ul id="12f2e7d3-01e5-805d-88cb-cd1ae5ccf914" class="bulleted-list"><li style="list-style-type:disc">ChatGPT uses <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo></mrow><annotation encoding="application/x-tex">N=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span></span></span></span></span><span>﻿</span></span> 64,000 words of context</li></ul><ul id="1142e7d3-01e5-80e9-ac12-c9c01afa3dd6" class="bulleted-list"><li style="list-style-type:disc">Realistic Assumption: <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo></mrow><annotation encoding="application/x-tex">N=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span></span></span></span></span><span>﻿</span></span> 5 or 6</li></ul></details></li></ul></div></figure><details open=""><summary style="font-weight:600;font-size:1.25em;line-height:1.3;margin:0"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>−</mo></mrow><annotation encoding="application/x-tex">N-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord">−</span></span></span></span></span><span>﻿</span></span>Gram Implementation — Hadoop</summary><div class="indented"><p id="1142e7d3-01e5-8023-a8b7-e6d0757a5e97" class="">Unigrams (<link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">N=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span>﻿</span></span>): do Word Count </p><figure id="12f2e7d3-01e5-8097-9df9-ea7a39024978" class="equation"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>C</mi><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">)</mo></mrow><mi>N</mi></mfrac></mrow><annotation encoding="application/x-tex">P(w)= \frac{C(w)}{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure><ul id="1142e7d3-01e5-809b-b7d9-c6e27af53d91" class="toggle"><li><details open=""><summary><mark class="highlight-purple">Example</mark></summary><p id="1142e7d3-01e5-80cf-92b9-f61d8634b050" class="">Sentences to train our N-gram model: </p><p id="1142e7d3-01e5-8039-a754-c1ffdef49d4f" class=""><em><mark class="highlight-gray">Note: assume sentences never cross over; They’re in separate documents.</mark></em></p><ol type="1" id="1142e7d3-01e5-809f-8938-d1d50c24b5db" class="numbered-list" start="1"><li>I am sam</li></ol><ol type="1" id="1142e7d3-01e5-8037-bb0e-f66ff97a56e7" class="numbered-list" start="2"><li>Sam I am</li></ol><ol type="1" id="1142e7d3-01e5-807d-9ccb-f6cf039f1d3f" class="numbered-list" start="3"><li>I do not like green eggs and ham </li></ol><p id="1142e7d3-01e5-804c-8c11-ceb1db23bbc4" class="">Counts: </p><table id="1142e7d3-01e5-80bc-a3cd-cf0b38c34f34" class="simple-table"><tbody><tr id="c43c1715-c0af-44e4-ac31-a039e91c95d6"><td id="D}TE" class="">(^ | I)</td><td id="HqU^" class="">2</td></tr><tr id="de86cdb1-9b13-4544-96cc-1bb65b8759fd"><td id="D}TE" class="">(^, Sam)</td><td id="HqU^" class="">1</td></tr><tr id="36bb9ae0-f097-47a6-9150-51c619050039"><td id="D}TE" class="">(I, am)</td><td id="HqU^" class="">2</td></tr></tbody></table><p id="1142e7d3-01e5-80e0-a466-c3cbae81e360" class="">Probabilities</p><table id="1142e7d3-01e5-80ad-9c0a-dd63817d38bc" class="simple-table"><tbody><tr id="c7bf79be-7f89-4a10-a79b-69b55f9da522"><td id="&gt;Tu`" class="">P(I, ^)</td><td id="Zcwi" class="">2/3</td></tr><tr id="881a16d8-e9a0-4ab0-a2cf-8bc61c18693e"><td id="&gt;Tu`" class="">P(Sam | ^)</td><td id="Zcwi" class="">1/3</td></tr><tr id="e0467bac-77a4-46f8-a16b-d6fb82c67f5b"><td id="&gt;Tu`" class="">P(am | I)</td><td id="Zcwi" class="">2/3</td></tr><tr id="1142e7d3-01e5-80e1-9b82-e04b5770dc55"><td id="&gt;Tu`" class="">P($ | Sam)</td><td id="Zcwi" class="">1/2</td></tr></tbody></table></details></li></ul><p id="1142e7d3-01e5-8031-99dc-ea444204c067" class="">Bi-grams (<link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">N=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span></span><span>﻿</span></span>): conditional probability (pairs/stripes)</p><figure id="12f2e7d3-01e5-8075-9783-c8ac64e89441" class="equation"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mstyle mathcolor="#6495ed"><mi>P</mi><mo stretchy="false">(</mo><msub><mi>w</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>w</mi><mi>j</mi></msub><mo stretchy="false">)</mo></mstyle><mo>=</mo><mfrac><mrow><mi>C</mi><mo stretchy="false">(</mo><msub><mi>w</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>w</mi><mi>j</mi></msub><mo stretchy="false">)</mo></mrow><mi>N</mi></mfrac></mrow><annotation encoding="application/x-tex">\blue{P(w_i,w_j)}=\frac{C(w_i,w_j)}N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;color:#6495ed;">P</span><span class="mopen" style="color:#6495ed;">(</span><span class="mord" style="color:#6495ed;"><span class="mord mathnormal" style="margin-right:0.02691em;color:#6495ed;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:#6495ed;"><span class="mord mathnormal mtight" style="color:#6495ed;">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct" style="color:#6495ed;">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord" style="color:#6495ed;"><span class="mord mathnormal" style="margin-right:0.02691em;color:#6495ed;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:#6495ed;"><span class="mord mathnormal mtight" style="margin-right:0.05724em;color:#6495ed;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose" style="color:#6495ed;">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure><figure id="12f2e7d3-01e5-8094-9f07-fe845fd6abf1" class="equation"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>w</mi><mi>i</mi></msub><mi mathvariant="normal">∣</mi><msub><mi>w</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mfrac><mstyle mathcolor="#6495ed"><mi>P</mi><mo stretchy="false">(</mo><msub><mi>w</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>w</mi><mi>j</mi></msub><mo stretchy="false">)</mo></mstyle><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>w</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mfrac><mo>=</mo><mfrac><mrow><mi>C</mi><mo stretchy="false">(</mo><msub><mi>w</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>w</mi><mi>j</mi></msub><mo stretchy="false">)</mo></mrow><mrow><mi>C</mi><mo stretchy="false">(</mo><msub><mi>w</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">P(w_i|w_j)=\frac{\blue{P(w_i,w_j)}}{P(w_i)}=\frac{C(w_i,w_j)}{C(w_i)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;color:#6495ed;">P</span><span class="mopen" style="color:#6495ed;">(</span><span class="mord" style="color:#6495ed;"><span class="mord mathnormal" style="margin-right:0.02691em;color:#6495ed;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:#6495ed;"><span class="mord mathnormal mtight" style="color:#6495ed;">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct" style="color:#6495ed;">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord" style="color:#6495ed;"><span class="mord mathnormal" style="margin-right:0.02691em;color:#6495ed;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:#6495ed;"><span class="mord mathnormal mtight" style="margin-right:0.05724em;color:#6495ed;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose" style="color:#6495ed;">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure><ul id="12f2e7d3-01e5-8038-b769-fc851f031adc" class="toggle"><li><details open=""><summary><mark class="highlight-orange">Motivation: Laplace Smoothing</mark></summary><p id="1142e7d3-01e5-80e4-89bd-e2c245caf939" class=""><strong>Problem:</strong><div class="indented"><p id="1142e7d3-01e5-80b1-89fd-d083756d6b80" class="">Bi-Gram Example:<div class="indented"><p id="1142e7d3-01e5-803f-a75e-c93132e3608a" class="">P(I like ham) = P(I | ^) * <mark class="highlight-red">P(like | I)</mark> * P($ | gam)</p><p id="1142e7d3-01e5-80ca-9312-d12c9b80eeff" class="">= <mark class="highlight-red">0</mark> <em><mark class="highlight-gray">(since “I like” never appears) </mark></em></p></div></p><p id="1142e7d3-01e5-80f3-9a31-c923806f6947" class="">We don&#x27;t want P=0! Since anything is possible. It&#x27;s just text, any word can come after another</p></div></p><p id="1142e7d3-01e5-806b-9756-edd8fcbffb66" class=""><strong>Solution: </strong><div class="indented"><p id="1142e7d3-01e5-803b-bae2-f5a47f1cd004" class="">We don’t want 0s; make the distribution “<strong>smooth</strong>”</p></div></p></details></li></ul></div></details><details open=""><summary style="font-weight:600;font-size:1.25em;line-height:1.3;margin:0">Laplace Smoothing </summary><div class="indented"><p id="1142e7d3-01e5-80f6-9f05-e56b83418757" class="">Start all counts at 1, not 0. </p><ul id="1142e7d3-01e5-8074-8cc3-eed64bbb13a2" class="toggle"><li><details open=""><summary><mark class="highlight-purple">Example</mark></summary><p id="dc1aeb70-8c37-41c1-a3cd-5e1b93685fce" class="">Counts (smooth): </p><table id="4f1a9b1a-93d6-4870-9b75-81a5c800346d" class="simple-table"><tbody><tr id="0f2b63e5-66fb-41b1-b391-91ba722bad3f"><td id="D}TE" class="">(^| I)</td><td id="HqU^" class="">3</td></tr><tr id="37d93d50-770a-4774-8240-8a5820adcf0b"><td id="D}TE" class="">(^, Sam)</td><td id="HqU^" class="">2</td></tr><tr id="6ab1efc0-096a-4021-a429-26cb67ce7a69"><td id="D}TE" class="">(I, am)</td><td id="HqU^" class="">3</td></tr><tr id="1142e7d3-01e5-8075-9b1f-f2fe948e1ed0"><td id="D}TE" class="">(I, like)</td><td id="HqU^" class="">1</td></tr></tbody></table><p id="843108f3-48bf-42ac-8988-7c8a79e16a35" class="">Probabilities</p><table id="dfc3141a-7b6d-44f8-ab5b-941e1db443e9" class="simple-table"><tbody><tr id="e27ab770-409a-4f15-93a2-14a403bc665c"><td id="&gt;Tu`" class="">P(I, ^)</td><td id="Zcwi" class="">2/3</td></tr><tr id="34fc08d6-e9f6-4ada-8fe4-0ed1b9216d3e"><td id="&gt;Tu`" class="">P(Sam | ^)</td><td id="Zcwi" class="">1/3</td></tr><tr id="b2fde899-9854-4831-a0f0-7a42844b88cb"><td id="&gt;Tu`" class="">P(am | I)</td><td id="Zcwi" class="">2/3</td></tr><tr id="4e526894-18aa-4944-a41a-baa0b4d79107"><td id="&gt;Tu`" class="">P($ | Sam)</td><td id="Zcwi" class="">1/2</td></tr></tbody></table></details></li></ul><p id="12e2e7d3-01e5-8003-baac-fedcca114637" class="">Add it while computing count/probability: </p><figure id="12f2e7d3-01e5-80e9-86b8-f21e09c1a2ea" class="equation"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>P</mi><mi>L</mi></msub><mo stretchy="false">(</mo><msub><mi>w</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>w</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>C</mi><mo stretchy="false">(</mo><msub><mi>w</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>w</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mstyle mathcolor="#df0030"><mo>+</mo><mn>1</mn></mstyle></mrow><mrow><mi>N</mi><mstyle mathcolor="#df0030"><mo>+</mo><msup><mi>V</mi><mn>2</mn></msup></mstyle></mrow></mfrac></mrow><annotation encoding="application/x-tex">P_L(w_i,w_j)=
\frac{C(w_i,w_j)\red{+1}}{N\red{+V^2}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.1963em;vertical-align:-0.7693em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin" style="color:#df0030;">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord" style="color:#df0030;"><span class="mord mathnormal" style="margin-right:0.22222em;color:#df0030;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:#df0030;"><span class="mord mtight" style="color:#df0030;">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin" style="color:#df0030;">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord" style="color:#df0030;">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure><ul id="12f2e7d3-01e5-8001-81bb-f74bd42923f9" class="toggle"><li><details open=""><summary>Why we add <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>V</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">V^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span></summary><p id="12f2e7d3-01e5-801f-a205-f80214cd240a" class="">All counts start at 1 now, including the counts for <span style="border-bottom:0.05em solid">pairs of words</span>. </p><p id="12f2e7d3-01e5-80a2-bd1f-c10cbe168f8e" class="">There are <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>V</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">V^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> <span style="border-bottom:0.05em solid">pairs of words</span>. </p></details></li></ul><figure id="12f2e7d3-01e5-80d3-b4e7-c2d18e330607" class="equation"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>P</mi><mi>L</mi></msub><mo stretchy="false">(</mo><msub><mi>w</mi><mi>j</mi></msub><mi mathvariant="normal">∣</mi><msub><mi>w</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>C</mi><mo stretchy="false">(</mo><msub><mi>w</mi><mi>i</mi></msub><mi mathvariant="normal">∣</mi><msub><mi>w</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mstyle mathcolor="#df0030"><mo>+</mo><mn>1</mn></mstyle></mrow><mrow><mi>C</mi><mo stretchy="false">(</mo><msub><mi>w</mi><mi>j</mi></msub><mo separator="true">,</mo><mi>V</mi><mo stretchy="false">)</mo><mstyle mathcolor="#df0030"><mo>+</mo><mi>V</mi></mstyle></mrow></mfrac></mrow><annotation encoding="application/x-tex">P_L(w_j|w_i)=
\frac{C(w_i|w_j)\red{+1}}{C(w_j, V)\red{+V}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.3991em;vertical-align:-0.9721em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin" style="color:#df0030;">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;color:#df0030;">V</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin" style="color:#df0030;">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord" style="color:#df0030;">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure></div></details><hr id="12e2e7d3-01e5-8064-aaa2-c29749cc141c"/><h1 id="1142e7d3-01e5-8066-b47a-f22d718a46a9" class="">Information Retrieval </h1><p id="1142e7d3-01e5-8078-8fd2-f681535ff036" class=""><strong>Central Problem in Search: </strong></p><div id="1142e7d3-01e5-8098-8eb7-d91ca4ec327e" class="column-list"><div id="297d0f9a-e4e7-479d-bfad-8192803c3987" style="width:50%" class="column"><figure id="1142e7d3-01e5-8060-8a31-c27483a8791c" class="image"><a href="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-03_at_16.49.00.png"><img style="width:288px" src="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-03_at_16.49.00.png"/></a></figure></div><div id="678561aa-12b7-4f45-9633-57ec7eb93cd9" style="width:50%" class="column"><p id="6887dcd8-5635-4364-88a2-06e15217bf5c" class="">Person wants to know something,</p><p id="1142e7d3-01e5-8033-9a9f-f4fe3b26c7f8" class="">They express that as a query (something a computer can understand).</p><p id="1142e7d3-01e5-80fd-aa59-e1cd0358f15d" class="">The computer also represents a document in a way that it can understand (i.e. a description). </p><p id="1142e7d3-01e5-80a7-ad11-fa3fad982ab9" class="">
</p></div></div><p id="1142e7d3-01e5-80f9-ab54-fd1b560f1901" class="">Even though theres no words in common between the search query and the document title, its what you are looking for!</p><hr id="1142e7d3-01e5-8072-a693-de513c4441ed"/><h3 id="1142e7d3-01e5-803b-ad89-f530c8a40b98" class="">How IR works (high level) </h3><figure id="1142e7d3-01e5-8095-a79e-d53b81a283d8" class="image"><a href="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-03_at_16.51.30.png"><img style="width:240px" src="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-03_at_16.51.30.png"/></a></figure><div id="1142e7d3-01e5-8024-bd40-d485b0a5739c" class="column-list"><div id="a4408b87-11ab-4aa6-aaca-9d2763a0445a" style="width:50%" class="column"><ol type="1" id="1142e7d3-01e5-801d-8535-f78877c1e2e2" class="numbered-list" start="1"><li>Users type a <strong>query </strong></li></ol><ol type="1" id="1142e7d3-01e5-8009-867a-c05bf8c828cf" class="numbered-list" start="2"><li>Similarly, represent that in computer-language (whatever that may be)</li></ol><ol type="1" id="1142e7d3-01e5-8018-9538-e3aac0fd1d79" class="numbered-list" start="3"><li>take the query to the index to find candidates / get the best matches.</li></ol></div><div id="93b2c46b-6d83-4388-b7ba-fccc7c885759" style="width:49.99999999999999%" class="column"><ol type="1" id="9649e018-3f70-4ac1-bdad-4f5de4bf97c5" class="numbered-list" start="1"><li>Feed <strong>documents</strong> into architecture</li></ol><ol type="1" id="1142e7d3-01e5-8038-85ed-e52fcbc15308" class="numbered-list" start="2"><li>computer turns them into a <em>better</em> representation of what it contains</li></ol><ol type="1" id="1142e7d3-01e5-80b6-9716-cca86e36ba26" class="numbered-list" start="3"><li>We get an <strong>index</strong>, mapping <em>concepts</em> to which docs contain those concepts</li></ol></div></div><p id="1142e7d3-01e5-80a8-844a-c47d0895a3f8" class=""><strong>note: </strong></p><ul id="1142e7d3-01e5-8006-a657-c7efe90f1ebf" class="bulleted-list"><li style="list-style-type:disc">index is done &quot;<strong>offline</strong>&quot; — build the index with a big batch of data at once</li></ul><ul id="1142e7d3-01e5-8077-ad18-e36cb1436ba3" class="bulleted-list"><li style="list-style-type:disc">query response is &quot;<strong>online</strong>&quot; — streaming / real time / producing response as you get input</li></ul><hr id="1142e7d3-01e5-8094-a917-e8deab6f14ce"/><h2 id="12f2e7d3-01e5-8084-b4d1-d4dece3ac7a6" class=""><mark class="highlight-red">Bag of Words </mark></h2><p id="1142e7d3-01e5-80b7-a30e-cfa3c7286429" class=""><em><mark class="highlight-gray"><strong>How we will represent a document (to encapsulate its meaning)</strong></mark></em></p><p id="1142e7d3-01e5-80a2-b383-d21765017c62" class="">Document = Map( words : counts)</p><p id="12f2e7d3-01e5-80b3-9fd8-eff2d9e31004" class=""><strong>Assume: </strong></p><ul id="12f2e7d3-01e5-809b-b559-c9b47451c9c9" class="bulleted-list"><li style="list-style-type:disc">terms are independent <em><mark class="highlight-gray">(obvs. not true)</mark></em></li></ul><ul id="12f2e7d3-01e5-801e-96e4-fe4d19a13554" class="bulleted-list"><li style="list-style-type:disc">relevance is irrelevant</li></ul><ul id="12f2e7d3-01e5-80ae-9ffa-f9f362027a4c" class="bulleted-list"><li style="list-style-type:disc">the concept of a “word” is well defined<ul id="12f2e7d3-01e5-8081-9ef0-d906b4e64218" class="toggle"><li><details open=""><summary>Tradeoff</summary><p id="12f2e7d3-01e5-8097-964e-ec46959c7bfb" class="">We have to make a tradeoff between: losing important context (capitalization, apostrophe, etc), and having “different” words that mean the same thing. </p><ul id="12e2e7d3-01e5-806d-8354-ecce8e5ddb0b" class="toggle"><li><details open=""><summary>Examples</summary><ul id="12e2e7d3-01e5-807e-a749-f63c3ffbc0e7" class="bulleted-list"><li style="list-style-type:disc">&quot;co-op&quot; ⇒ “co”, “op”</li></ul><ul id="12e2e7d3-01e5-806c-b21b-c06f457c59f1" class="bulleted-list"><li style="list-style-type:disc">“that’s” ⇒ “that”</li></ul><ul id="12e2e7d3-01e5-8068-bdcc-cee6346b8d2b" class="bulleted-list"><li style="list-style-type:disc">“Hello” ⇒ “hello” (<strong>case-folding</strong>)</li></ul></details></li></ul></details></li></ul></li></ul><p id="1142e7d3-01e5-8068-bf12-feb3e846ad4d" class=""><strong>Ways to Store a Word: </strong></p><ol type="1" id="1142e7d3-01e5-80c8-a91b-c865fdd74b08" class="numbered-list" start="1"><li>Integer: uses way less space </li></ol><ol type="1" id="1142e7d3-01e5-805c-ac88-c2d827526f0e" class="numbered-list" start="2"><li>Vector in high dimension: distance between words (dot product) indicates similarity. </li></ol><p id="12f2e7d3-01e5-804c-8443-d2517af807bb" class=""><strong>Ways to store a Bag of Words </strong></p><ol type="1" id="12f2e7d3-01e5-803e-8475-c96ceff152cf" class="numbered-list" start="1"><li>Approach #1: Inverted Index</li></ol><ol type="1" id="12f2e7d3-01e5-8058-a2cf-fe488c242553" class="numbered-list" start="2"><li>Approach #2: Posting List </li></ol><h3 id="1142e7d3-01e5-80ec-8037-c7d6e0349068" class="">Inverted Index</h3><ul id="12f2e7d3-01e5-80ec-9676-fb8f52605089" class="toggle"><li><details open=""><summary>“Forward” vs. “Inverted” Index</summary><p id="12f2e7d3-01e5-807a-9c88-e4c8e2037c36" class=""><em>Inverted Index.  Maps context to documents.  </em></p><p id="12f2e7d3-01e5-802f-b54b-df10881dd7e4" class=""><em>Forward Index.  Maps documents to context. </em></p></details></li></ul><figure id="1142e7d3-01e5-8025-9cda-d9977db05b0e" class="image"><a href="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-03_at_17.14.37.png"><img style="width:240px" src="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-03_at_17.14.37.png"/></a></figure><ol type="1" id="1142e7d3-01e5-8083-b48a-f89fe35d55b5" class="numbered-list" start="1"><li>Convert doc to a bag of words (<code>word-count</code>, but we also store where the word appeared).</li></ol><ol type="1" id="1142e7d3-01e5-80a3-aa4b-d6038e0b60ea" class="numbered-list" start="2"><li>Reducers puts this info together into an <strong>index</strong>. We will use a <strong>posting list</strong>: <div id="12e2e7d3-01e5-805f-8d64-d1e5777a85c8" class="column-list"><div id="3f031d2a-1c39-4707-b1e7-36c8fbf0588f" style="width:18.75%" class="column"><figure id="1142e7d3-01e5-8053-87c4-ff46dc275de2" class="image"><a href="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-03_at_17.16.23.png"><img style="width:144px" src="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-03_at_17.16.23.png"/></a></figure></div><div id="5f3ded3f-ad21-4724-9290-254ee2fc7dfb" style="width:81.25%" class="column"><ul id="6f0fbf96-d0f2-42e4-8bf9-05c562ff0416" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-teal">key of index</mark></li></ul><ul id="12e2e7d3-01e5-80ff-a9bc-fab7a8d7cb60" class="bulleted-list"><li style="list-style-type:disc">Posting; cell for each document, indicating if the doc contains that word (<link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span><span>﻿</span></span>/blank ⇒ no, <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span>﻿</span></span> ⇒ yes)</li></ul></div></div></li></ol><h3 id="12f2e7d3-01e5-8052-9aa4-c5b323956619" class="">Posting List </h3><ul id="12f2e7d3-01e5-8052-b2c9-ebd52df3c33a" class="toggle"><li><details open=""><summary><mark class="highlight-orange">Posting List saves space</mark></summary><p id="12f2e7d3-01e5-8095-9492-f11ce7a15149" class=""><strong>Problem: </strong></p><figure class="block-color-default_background callout" style="white-space:pre-wrap;display:flex" id="12f2e7d3-01e5-807b-9422-d120b7a863b9"><div style="font-size:1.5em"><img class="icon" src="https://www.notion.so/icons/exclamation-mark-double_gray.svg"/></div><div style="width:100%"><p id="9f8121e2-b7c6-4265-acc3-2600a9d3f0cf" class=""><strong>Heap’s Law</strong></p><p id="1142e7d3-01e5-80b5-ab9c-e06b05712737" class=""><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mi>k</mi><msup><mi>T</mi><mi>b</mi></msup></mrow><annotation encoding="application/x-tex">M=kT^b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span>, <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mo>≈</mo><mn>0.5</mn></mrow><annotation encoding="application/x-tex">b\approx 0.5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.5</span></span></span></span></span><span>﻿</span></span></p><ul id="1142e7d3-01e5-80ab-8d66-d99854e71ff1" class="bulleted-list"><li style="list-style-type:disc">vocab size prop. to sqrt of collection size</li></ul><ul id="1142e7d3-01e5-80ad-8eef-e7105c1306b2" class="bulleted-list"><li style="list-style-type:disc">4 times as many docs? doubled the vocab size (exponential size)</li></ul><ul id="1142e7d3-01e5-809f-8875-fbaa21735b87" class="bulleted-list"><li style="list-style-type:disc">why?? Because new words are made up all the time, typos, etc...</li></ul></div></figure><p id="1142e7d3-01e5-80ef-9d4c-c8e457b0b53e" class="">⇒ Many new postings need to be added (not good) </p><p id="1142e7d3-01e5-8000-adce-cdb7f41b9f86" class=""><strong>Solution: </strong>Postings List </p><ul id="1142e7d3-01e5-80fb-a9cc-e8001229cec9" class="toggle"><li><details open=""><summary><strong>Zipf’s Law</strong></summary><figure id="1142e7d3-01e5-8013-ae08-fac624c8a4a0" class="image"><a href="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-03_at_17.20.40.png"><img style="width:480px" src="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-03_at_17.20.40.png"/></a></figure><ul id="1142e7d3-01e5-80e3-a357-e9007aa2ed8b" class="bulleted-list"><li style="list-style-type:disc">rank: how common is the word</li></ul><ul id="1142e7d3-01e5-8096-9d65-f40856d9fd0c" class="bulleted-list"><li style="list-style-type:disc">a few words show up most <em>frequently (f)</em></li></ul></details></li></ul><ul id="1142e7d3-01e5-806d-9bd7-c16b820b381d" class="bulleted-list"><li style="list-style-type:disc">⇒ postings are sparse</li></ul><ul id="12f2e7d3-01e5-80ee-8ac3-efef7a0d6c1f" class="bulleted-list"><li style="list-style-type:disc">Simply list index of non-zero values</li></ul><ul id="1142e7d3-01e5-800f-99c2-d2c5240a9e9b" class="bulleted-list"><li style="list-style-type:disc">This will save us space overall, since new words are likely rare.</li></ul></details></li></ul><p id="12f2e7d3-01e5-8004-9bf9-e8924dd15c6c" class="">Only list the doc-ids that actually contain the word. </p><figure id="1142e7d3-01e5-805d-8079-e6d57849cfd5" class="image" style="text-align:center"><a href="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-03_at_17.19.35.png"><img style="width:288px" src="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-03_at_17.19.35.png"/></a><figcaption>Inverted Index (Left) vs. Posting List (Right) </figcaption></figure><p id="1142e7d3-01e5-803a-895e-f06d5f4893df" class=""><strong>Implementation </strong></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1142e7d3-01e5-8028-841f-f3a4934b2373" class="code"><code class="language-Python">def map(docid: Long, doctext: String):
	&#x27;&#x27;&#x27;Called for a single document&#x27;&#x27;&#x27;
	# Put all terms into a hash-table (counter)
	counts = counter()   # Note #1
	for term in tokenize(doctext):
		counts.increment(term)
	# Emit the counts + frequencies as well:
	for term, freq in counts:
		emit(term, (docid, freq)). # Note #2

def reduce(term: String, postings: Iterator[(Long, Int)]):
		&#x27;&#x27;&#x27; Called for a single term&#x27;s postings &#x27;&#x27;&#x27;
		p = list()
		for docid, freq in postings:
				p.append((docid, freq)) # Note #3
		postList.sort()   Note #2
		emit(term, postList)</code></pre><p id="12f2e7d3-01e5-8064-89b9-d71fa5ea6868" class=""><mark class="highlight-brown"><mark class="highlight-default_background">Note #1:</mark></mark><mark class="highlight-default_background"> Assumes counter will easily fit in a mapper’s memory (assume each doc only has a few million unique terms). </mark></p><p id="12f2e7d3-01e5-8074-b09e-ed45fb28be02" class=""><mark class="highlight-brown"><mark class="highlight-default_background">Note #2:</mark></mark><mark class="highlight-default_background"> </mark>Mappers do sorting before the reducer gets them ⇒ already sorted by <em>docID</em>, so we don’t have to sort the postings list in the reducer. </p><p id="12f2e7d3-01e5-8045-971b-d0dcdfc9ea5f" class=""><mark class="highlight-brown"><mark class="highlight-default_background">Note #3:</mark></mark><mark class="highlight-default_background"> </mark><mark class="highlight-default"><mark class="highlight-default_background">Posting list for common words might be big ⇒ </mark></mark><mark class="highlight-default"><mark class="highlight-red_background">reducer runs out of memory</mark></mark></p><ul id="1142e7d3-01e5-80f7-ab2d-f77d1d8cfae7" class="bulleted-list"><li style="list-style-type:disc">We’ll use encodings to reduce the size. </li></ul><hr id="12f2e7d3-01e5-808e-863e-db0a98d0fd8b"/><details open=""><summary style="font-weight:600;font-size:1.25em;line-height:1.3;margin:0">Encoding Postings List as Gaps</summary><div class="indented"><p id="12f2e7d3-01e5-8056-90ec-fa0fb6a8471d" class=""><em><mark class="highlight-gray">Alternative to encoding posting list as (docid, freq) that uses less space. </mark></em></p><p id="1342e7d3-01e5-8083-a865-e58e233c8dc8" class="">Instead of encoding the posting list as:</p><figure id="1342e7d3-01e5-8023-933b-c1dee9e21c30" class="equation"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mi>d</mi><mi>o</mi><mi>c</mi><mi>i</mi><mi>d</mi><mo separator="true">,</mo><mi>f</mi><mi>r</mi><mi>e</mi><mi>q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(docid, freq)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">d</span><span class="mord mathnormal">oc</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mclose">)</span></span></span></span></span></div></figure><p id="1342e7d3-01e5-805f-a86c-ce93172aed7f" class="">Encode it as: </p><figure id="1342e7d3-01e5-80ee-95a2-fe336092de81" class="equation"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mi>g</mi><mi>a</mi><mi>p</mi><mo separator="true">,</mo><mi>f</mi><mi>r</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(gap, frequency)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">a</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.03588em;">cy</span><span class="mclose">)</span></span></span></span></span></div></figure><ul id="12f2e7d3-01e5-8095-bd3b-ea3175fb2687" class="bulleted-list"><li style="list-style-type:disc">“Gap” — between 2 occurrences of a term, <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>o</mi><mi>c</mi><mi>i</mi><msub><mi>d</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mtext>–</mtext><mi>d</mi><mi>o</mi><mi>c</mi><mi>i</mi><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">docid_{i+1} – docid_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9028em;vertical-align:-0.2083em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">oc</span><span class="mord mathnormal">i</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mord">–</span><span class="mord mathnormal">d</span><span class="mord mathnormal">oc</span><span class="mord mathnormal">i</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span></li></ul><ul id="1142e7d3-01e5-801a-bc27-dbc035a96641" class="bulleted-list"><li style="list-style-type:disc">This requires docid’s to be given in  <span style="border-bottom:0.05em solid">ascending order</span></li></ul><hr id="1342e7d3-01e5-804d-a4bd-fa673c39bc52"/><p id="1342e7d3-01e5-80eb-b990-cbc966b4187c" class="">By storing gaps instead of actual document IDs, the size of the postings list is reduced since gaps (differences) are generally smaller than absolute document numbers.</p></div></details><details open=""><summary style="font-weight:600;font-size:1.25em;line-height:1.3;margin:0"><strong>Ways to Encode Gaps</strong></summary><div class="indented"><ul id="12f2e7d3-01e5-80df-bb63-ca61bd43c5b5" class="toggle"><li><details open=""><summary><strong>Int</strong> (can’t guarantee small gaps) </summary><ul id="12f2e7d3-01e5-80fd-ad66-cc7f0c452eb7" class="bulleted-list"><li style="list-style-type:disc">small gaps ⇒ posting list is short</li></ul><ul id="12f2e7d3-01e5-80cb-97bb-ea6ec592d8c9" class="bulleted-list"><li style="list-style-type:disc">for common terms ⇒ avg. delta is small (according to Zipf’s law)</li></ul><ul id="12f2e7d3-01e5-8048-a3a7-d00a0473425d" class="bulleted-list"><li style="list-style-type:disc">for rare terms ⇒ gap is large</li></ul><ul id="12f2e7d3-01e5-8045-8b85-c370ba43a736" class="bulleted-list"><li style="list-style-type:disc">No guarantee on the maximum gap size ⇒ dont save any space storing gap’s with <code>Int</code>&#x27;s </li></ul></details></li></ul><ul id="12f2e7d3-01e5-807d-890e-e2e91297b8e4" class="toggle"><li><details open=""><summary><strong>V-Int</strong> (to compress the gap encoding) </summary><p id="1342e7d3-01e5-80d5-acb3-d2d15c022297" class="">Using VInt encoding further reduces storage size for the gap and frequency values by representing small integers with fewer bytes. </p><p id="1342e7d3-01e5-80a6-a5a7-d69e98683886" class="">The postings list for each term is serialized into a <code>BytesWritable</code> object, minimizing the output data size and facilitating efficient storage and retrieval.</p><figure class="block-color-default_background callout" style="white-space:pre-wrap;display:flex" id="12f2e7d3-01e5-80df-bf0c-f9905be3b4be"><div style="font-size:1.5em"><img class="icon" src="https://www.notion.so/icons/exclamation-mark-double_gray.svg"/></div><div style="width:100%"><p id="02ac6472-b925-4fb4-8b0d-111fbce3f494" class=""><strong>V-Int</strong></p><hr id="12f2e7d3-01e5-8083-8d83-fead9bf05ed9"/><p id="12f2e7d3-01e5-80a7-8b57-c6a2840389e5" class=""><strong>If</strong> <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span><span>﻿</span></span> in [-112,127]: <div class="indented"><p id="12f2e7d3-01e5-800c-aec2-d20953d80cfa" class="">represent the number using 1 byte. </p></div></p><p id="12f2e7d3-01e5-8038-9c55-fe2c6c539291" class=""><strong>Else: </strong><div class="indented"><p id="527cd16d-4a18-430d-a961-1b841e5a949f" class="">Magic-byte: <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="#df0030"><mn>1000</mn></mstyle><mtext> </mtext><mstyle mathcolor="#28ae7b"><mi>S</mi></mstyle><mstyle mathcolor="#6495ed"><mi>L</mi><mi>L</mi><mi>L</mi></mstyle><mtext> &lt;L bytes for x&gt;</mtext></mrow><annotation encoding="application/x-tex">\red{1000} \ \green{S} \blue{LLL} \
\text{&lt;L bytes for x&gt;}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord" style="color:#df0030;">1000</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.05764em;color:#28ae7b;">S</span><span class="mord mathnormal" style="color:#6495ed;">LLL</span><span class="mspace"> </span><span class="mord text"><span class="mord">&lt;L bytes for x&gt;</span></span></span></span></span></span><span>﻿</span></span> </p><ul id="fc77bded-ba7e-4826-bd8a-7d7138c94ee7" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="#df0030"><mn>1000</mn></mstyle></mrow><annotation encoding="application/x-tex">\red{1000}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord" style="color:#df0030;">1000</span></span></span></span></span><span>﻿</span></span> – common prefix, indicates this is a special byte</li></ul><ul id="157013d6-75f3-4866-b3ee-ec82df31cdbc" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="#28ae7b"><mi>S</mi></mstyle></mrow><annotation encoding="application/x-tex">\green{S}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;color:#28ae7b;">S</span></span></span></span></span><span>﻿</span></span>: sign of <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span><span>﻿</span></span></li></ul><ul id="9496f7e0-ba0c-4271-9667-d4c59d05a5f4" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="#6495ed"><mi>L</mi></mstyle></mrow><annotation encoding="application/x-tex">\blue L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="color:#6495ed;">L</span></span></span></span></span><span>﻿</span></span>: # bytes to represent <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span><span>﻿</span></span> as a 3 bit two’s complement number</li></ul><ul id="12f2e7d3-01e5-8013-961b-e983bddbba6f" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>&lt;L bytes for x&gt;</mtext></mrow><annotation encoding="application/x-tex">\text{&lt;L bytes for x&gt;}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">&lt;L bytes for x&gt;</span></span></span></span></span></span><span>﻿</span></span><ul id="0730dff3-8a39-4d50-85ba-b58e2c6cc06e" class="bulleted-list"><li style="list-style-type:circle">x if non-negative </li></ul><ul id="8ab739d7-5dae-49a2-9694-fca980421cf6" class="bulleted-list"><li style="list-style-type:circle">-x-1 if negative</li></ul></li></ul></div></p><hr id="12f2e7d3-01e5-8037-8b45-e11021d9a7f7"/><ul id="12f2e7d3-01e5-8096-a7be-e82a46f40c2b" class="toggle"><li><details open=""><summary>Examples</summary><p id="12f2e7d3-01e5-80d1-bf2e-fd0aa43009dd" class="">Example 1: 747</p><p id="12f2e7d3-01e5-8099-9c28-d1cd596273d2" class=""><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="#df0030"><mn>1000</mn></mstyle><mtext> </mtext><mstyle mathcolor="#28ae7b"><mn>1</mn></mstyle><mstyle mathcolor="#6495ed"><mn>110</mn></mstyle><mtext> </mtext><mn>0000</mn><mtext> </mtext><mn>0010</mn><mtext> </mtext><mn>1110</mn><mtext> </mtext><mn>1011</mn></mrow><annotation encoding="application/x-tex">\red{1000} \ \green{1} \blue{110} \ {0000} \ 0010 \ 1110 \ 1011</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord" style="color:#df0030;">1000</span><span class="mspace"> </span><span class="mord" style="color:#28ae7b;">1</span><span class="mord" style="color:#6495ed;">110</span><span class="mspace"> </span><span class="mord"><span class="mord">0000</span></span><span class="mspace"> </span><span class="mord">0010</span><span class="mspace"> </span><span class="mord">1110</span><span class="mspace"> </span><span class="mord">1011</span></span></span></span></span><span>﻿</span></span></p><ul id="12f2e7d3-01e5-8019-8724-ccc5870bb11b" class="bulleted-list"><li style="list-style-type:disc">Requires 2 bytes ⇒ Use Magic Byte</li></ul><ul id="12f2e7d3-01e5-8092-8abb-c2d74646f5ca" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>=</mo><mstyle mathcolor="#28ae7b"><mn>1</mn></mstyle></mrow><annotation encoding="application/x-tex">S=\green{1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord" style="color:#28ae7b;">1</span></span></span></span></span><span>﻿</span></span> </li></ul><ul id="12f2e7d3-01e5-80e6-83e4-f6d5496ef882" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>=</mo><mstyle mathcolor="#6495ed"><mn>110</mn></mstyle></mrow><annotation encoding="application/x-tex">L=\blue{110}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord" style="color:#6495ed;">110</span></span></span></span></span><span>﻿</span></span> (2 in two’s complement)</li></ul><ul id="12f2e7d3-01e5-80ed-a649-f9db578847b0" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mn>0000</mn><mtext> </mtext><mn>0010</mn><mtext> </mtext><mn>1110</mn><mtext> </mtext><mn>1011</mn></mrow><annotation encoding="application/x-tex">x= 0000 \ 0010 \ 1110 \ 1011</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0000</span><span class="mspace"> </span><span class="mord">0010</span><span class="mspace"> </span><span class="mord">1110</span><span class="mspace"> </span><span class="mord">1011</span></span></span></span></span><span>﻿</span></span> (2 byte unsigned int)</li></ul><p id="12f2e7d3-01e5-80d9-b2fa-c29f538a7595" class="">Example 2: -173131</p><ul id="12f2e7d3-01e5-8090-8d44-dd98502d1457" class="bulleted-list"><li style="list-style-type:disc">Requires 3 bytes ⇒ Use Magic Byte</li></ul><ul id="12f2e7d3-01e5-8070-8688-fe7cc478b5c9" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>=</mo><mstyle mathcolor="#28ae7b"><mn>0</mn></mstyle></mrow><annotation encoding="application/x-tex">S=\green{0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord" style="color:#28ae7b;">0</span></span></span></span></span><span>﻿</span></span> </li></ul><ul id="12f2e7d3-01e5-80eb-b826-dbde0b81106b" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>=</mo><mstyle mathcolor="#6495ed"><mn>101</mn></mstyle></mrow><annotation encoding="application/x-tex">L=\blue{101}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord" style="color:#6495ed;">101</span></span></span></span></span><span>﻿</span></span> (3 in two’s complement)</li></ul><ul id="12f2e7d3-01e5-80f1-abc6-dfdadb7d28e1" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mn>0000</mn><mtext> </mtext><mn>0010</mn><mtext> </mtext><mn>1010</mn><mtext> </mtext><mn>0100</mn><mtext> </mtext><mn>0100</mn><mtext> </mtext><mn>1010</mn></mrow><annotation encoding="application/x-tex">x= 0000 \ 0010 \ 1010 \ 0100 \ 0100 \ 1010</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0000</span><span class="mspace"> </span><span class="mord">0010</span><span class="mspace"> </span><span class="mord">1010</span><span class="mspace"> </span><span class="mord">0100</span><span class="mspace"> </span><span class="mord">0100</span><span class="mspace"> </span><span class="mord">1010</span></span></span></span></span><span>﻿</span></span> (2 byte unsigned int)</li></ul></details></li></ul><hr id="12f2e7d3-01e5-8078-9839-f2ca6caa427a"/><figure class="block-color-yellow_background callout" style="white-space:pre-wrap;display:flex" id="12f2e7d3-01e5-803a-9355-de106f5a262d"><div style="font-size:1.5em"><img class="icon" src="https://www.notion.so/icons/exclamation-mark-double_gray.svg"/></div><div style="width:100%"><p id="12f2e7d3-01e5-80ee-82f7-fab7f479926d" class="">You don’t need to know the details of <code>Vint</code> for the exam, but you have to use them for assignments.</p></div></figure><figure class="block-color-yellow_background callout" style="white-space:pre-wrap;display:flex" id="12f2e7d3-01e5-80b2-9b5b-fc3a3ddaa9aa"><div style="font-size:1.5em"><img class="icon" src="https://www.notion.so/icons/exclamation-mark-double_gray.svg"/></div><div style="width:100%"><p id="233b77c0-9091-4682-9431-88692c75eedc" class=""><strong>Byteswritable</strong></p><ul id="12f2e7d3-01e5-80e1-98ec-d251ddc646fc" class="bulleted-list"><li style="list-style-type:disc">in assignments, never use <code>ArrayWritable[vint]</code> <ul id="12f2e7d3-01e5-80e8-af51-ed0a0b3559f3" class="bulleted-list"><li style="list-style-type:circle">because it uses nested writable classes. </li></ul></li></ul><ul id="12f2e7d3-01e5-8078-9d8b-e818576c21a7" class="bulleted-list"><li style="list-style-type:disc">Use <code>BytesWritable</code> instead<ul id="12f2e7d3-01e5-80d3-902c-d86043cd6e4c" class="bulleted-list"><li style="list-style-type:circle">stores just the bytes themselves</li></ul></li></ul></div></figure></div></figure></details></li></ul><ul id="1342e7d3-01e5-80eb-83ff-e2a0fef1df5a" class="toggle"><li><details open=""><summary><strong>More Encoding Techniques</strong></summary><ul id="12f2e7d3-01e5-8044-baa5-ef6932639ad2" class="toggle"><li><details open=""><summary>Motivation — VLQ</summary><p id="12f2e7d3-01e5-807c-a315-f2b591a86750" class=""><strong>problem: </strong></p><ul id="12f2e7d3-01e5-8052-a640-ebebf3fec0df" class="bulleted-list"><li style="list-style-type:disc">gaps and frequencies cant be negative, but vint stores negative positive.</li></ul><ul id="12f2e7d3-01e5-80b0-b9c1-db189da6e7b9" class="bulleted-list"><li style="list-style-type:disc">⇒ wasted space</li></ul><p id="12f2e7d3-01e5-8050-bc4c-c2357fb532d7" class=""><strong>solution:</strong> VLQ</p></details></li></ul><ul id="12f2e7d3-01e5-8015-85cd-f09c22846e32" class="toggle"><li><details open=""><summary><strong>VLQ</strong></summary><ul id="12f2e7d3-01e5-8095-b15e-d373291e6ed1" class="bulleted-list"><li style="list-style-type:disc">breaks numbers down into 7 bits instead of 8.</li></ul><ul id="12f2e7d3-01e5-80c2-8f35-d674663dcb91" class="bulleted-list"><li style="list-style-type:disc">8th is a continue byte (1: keep going, 0: last value).</li></ul><ul id="12f2e7d3-01e5-8098-835f-cb9e7d84e710" class="toggle"><li><details open=""><summary>examples</summary><figure id="ba6f5452-aba8-461e-8e66-ed1a05ec1fcd" class="image"><a href="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-29_at_20.37.03.png"><img style="width:624.0011596679688px" src="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-29_at_20.37.03.png"/></a></figure></details></li></ul></details></li></ul><ul id="12f2e7d3-01e5-8016-b161-e04a0bfa9a00" class="toggle"><li><details open=""><summary><strong>Elias </strong><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>γ</mi></mrow><annotation encoding="application/x-tex">\gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span></span></span></span></span><span>﻿</span></span><strong> Code</strong></summary><p id="12f2e7d3-01e5-808d-b91d-c94f46b9c9ae" class="">Variable number of bits</p><ul id="12f2e7d3-01e5-8035-8f8b-db0b7b0d2d51" class="bulleted-list"><li style="list-style-type:disc">To encode &amp; decode, we need to do bit-bashing (<mark class="highlight-red_background">slow</mark>)</li></ul><ul id="12f2e7d3-01e5-809a-8cd7-fa1e79c61d05" class="bulleted-list"><li style="list-style-type:disc">only works for natural numbers (e.g. counts) </li></ul><ul id="12f2e7d3-01e5-80d8-b167-cd88b0c9da12" class="bulleted-list"><li style="list-style-type:disc">Assumes: small numbers are more common than large numbers<ul id="03e7260c-4931-4be5-a51a-33cc7c8ef2a7" class="bulleted-list"><li style="list-style-type:circle">e.g. gaps for common terms </li></ul><ul id="12f2e7d3-01e5-809b-a91f-dbe907f4248e" class="bulleted-list"><li style="list-style-type:circle">otherwise, won’t be effective. </li></ul></li></ul><p id="12f2e7d3-01e5-803c-98c3-fe082816ed0f" class="">Encoding <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span><span>﻿</span></span>:</p><p id="12f2e7d3-01e5-806d-a326-d1ed830b90a9" class="">[ <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mo stretchy="false">⌊</mo><mi>log</mi><mo>⁡</mo><mi>x</mi><mo stretchy="false">⌋</mo></mrow><annotation encoding="application/x-tex">N =  \lfloor \log x \rfloor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">⌊</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mclose">⌋</span></span></span></span></span><span>﻿</span></span> <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>0</mn><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mi>s</mi></mrow><annotation encoding="application/x-tex">0&#x27;s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord mathnormal">s</span></span></span></span></span><span>﻿</span></span> ] + [ <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span><span>﻿</span></span> as an <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">N-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span>﻿</span></span> bit number ] </p><ul id="d75734b7-350f-40e6-839d-a06c148e55c4" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">N+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span>﻿</span></span>: # bits needed to write <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span><span>﻿</span></span> down <ul id="12f2e7d3-01e5-80f2-926b-c81febf7ac60" class="bulleted-list"><li style="list-style-type:circle">always starts with 1 =&gt; don&#x27;t need to know end of 0s for end and start of 1s for x.</li></ul></li></ul><p id="12f2e7d3-01e5-8094-a582-c3d91047a52d" class="">Decoding x: </p><ol type="1" id="12f2e7d3-01e5-8080-8bbf-f6acbd719fe9" class="numbered-list" start="1"><li>Read <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span><span>﻿</span></span>’s until a <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span>﻿</span></span>, call this <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></span><span>﻿</span></span> </li></ol><ol type="1" id="12f2e7d3-01e5-80de-94c8-dadda350a043" class="numbered-list" start="2"><li>Interpret next <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">N+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span>﻿</span></span> bits as a binary number Including the <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span>﻿</span></span></li></ol></details></li></ul><ul id="12f2e7d3-01e5-804f-bddb-c16dc11367d6" class="toggle"><li><details open=""><summary>Gap Distribution</summary><p id="12f2e7d3-01e5-807f-8d4f-d9dadd4b6cf4" class="">Given <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></span><span>﻿</span></span> docID’s &amp; a term that matches M documents:</p><p id="12f2e7d3-01e5-80d1-bc7b-f80372b799ae" class="">The distribution of gaps for <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></span><span>﻿</span></span>: </p><ul id="12f2e7d3-01e5-8048-aeec-e39d394e1b0b" class="bulleted-list"><li style="list-style-type:disc">If gaps randomly assigned, and in 10% of all docs =&gt; independent chance each time. </li></ul><ul id="12f2e7d3-01e5-80e1-9309-eec8d4105b5c" class="bulleted-list"><li style="list-style-type:disc">thus we should see a distr. similar to a Poisson distribution with γ = M/N</li></ul><div id="12f2e7d3-01e5-805d-b46d-d97610fe397d" class="column-list"><div id="12f2e7d3-01e5-80c6-ab25-fe83741c5cf9" style="width:50%" class="column"><figure id="12f2e7d3-01e5-80bb-81ee-ea585aa1582b" class="image"><a href="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-29_at_20.44.54.png"><img style="width:330.98773193359375px" src="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-29_at_20.44.54.png"/></a></figure></div><div id="12f2e7d3-01e5-8098-a324-d6651011ae94" style="width:50%" class="column"><p id="12f2e7d3-01e5-8026-a66a-ed82963246d9" class=""><div class="indented"><ul id="12f2e7d3-01e5-80de-b42c-e49275be9448" class="bulleted-list"><li style="list-style-type:disc">graph: 1 mil / 10 mil docs have the word we are looking for.</li></ul><ul id="12f2e7d3-01e5-8091-86fb-d1482bb3e60b" class="bulleted-list"><li style="list-style-type:disc">if N -&gt; inf, it would be this value</li></ul></div></p></div></div><ul id="12f2e7d3-01e5-806e-a923-fcc2d58d4055" class="bulleted-list"><li style="list-style-type:disc">If <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mi>inf</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">N=\inf</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mop">in<span style="margin-right:0.07778em;">f</span></span></span></span></span></span><span>﻿</span></span>, this would be our probability. </li></ul><ul id="12f2e7d3-01e5-8038-bb75-e917d45ecfa9" class="bulleted-list"><li style="list-style-type:disc">Document-Frequency and Term-Frequency both follow a similar distribution</li></ul></details></li></ul><ul id="12f2e7d3-01e5-8059-ba10-db0c38b3a4b9" class="toggle"><li><details open=""><summary><strong>Golomb Code</strong></summary><figure class="block-color-yellow_background callout" style="white-space:pre-wrap;display:flex" id="12f2e7d3-01e5-8019-9b21-eab797336868"><div style="font-size:1.5em"><img class="icon" src="https://www.notion.so/icons/exclamation-mark-double_gray.svg"/></div><div style="width:100%"><p id="48b7c5d9-d0fe-43fc-aaac-bb60aae9d67d" class=""><strong>Exam</strong></p><p id="12f2e7d3-01e5-80fe-be7b-cf3c6a61707b" class="">Won’t be asked how golomb codes works, or to do the math, the Q&#x27;s will be very &quot;cursory”</p></div></figure><figure class="block-color-yellow_background callout" style="white-space:pre-wrap;display:flex" id="12f2e7d3-01e5-80f0-889f-c22ce464f115"><div style="font-size:1.5em"><img class="icon" src="https://www.notion.so/icons/exclamation-mark-double_gray.svg"/></div><div style="width:100%"><p id="83a529b0-8af3-4e35-8622-4457b3f5af52" class=""><strong>A3 — Golomb Code in Map Reduce </strong></p><figure id="12f2e7d3-01e5-80f6-b5c4-f48ab194744d" class="image"><a href="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-30_at_13.41.42.png"><img style="width:566px" src="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-30_at_13.41.42.png"/></a></figure><ul id="12f2e7d3-01e5-801f-939c-ce1232c20c47" class="bulleted-list"><li style="list-style-type:disc">don&#x27;t need to write M down in posting list. just doc-frequency for the term </li></ul><ul id="12f2e7d3-01e5-8083-ab6a-fcd11b49da44" class="bulleted-list"><li style="list-style-type:disc">needs to be written down at the beginning</li></ul><ul id="12f2e7d3-01e5-80fb-9d65-d00d7ce1773c" class="bulleted-list"><li style="list-style-type:disc">for a3, do star approach<ul id="12f2e7d3-01e5-80d8-b48b-cc7c72387e64" class="bulleted-list"><li style="list-style-type:circle">with bigrams, 2nd part of key is a word, so you could use *, which is not a valid word, comes before any valid words.</li></ul><ul id="12f2e7d3-01e5-80a5-a915-c37f8f768be1" class="bulleted-list"><li style="list-style-type:circle">here we have docids (start at 0). meaning we can use a negative number as a star (not a valid doc ID, and smaller); ie: -1</li></ul></li></ul></div></figure><p id="12f2e7d3-01e5-801b-be32-e07cd3cfbc02" class=""><strong>Idea</strong></p><ul id="12f2e7d3-01e5-801b-9a50-fcc86f9d3665" class="bulleted-list"><li style="list-style-type:disc">Each term gets its own custom encoding scheme. </li></ul><ul id="12f2e7d3-01e5-8081-81ec-ef886ca5c993" class="bulleted-list"><li style="list-style-type:disc">This is for situations where we only care about “contains” or “doesn’t contain”, not the # occurrences of a term in a doc. </li></ul><p id="12f2e7d3-01e5-80b7-a29b-c0ba00ba9033" class=""><strong>Encoding: </strong></p><p id="12f2e7d3-01e5-8084-84ec-dd83220160bc" class="">Given positive integer <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span><span>﻿</span></span>: </p><ol type="1" id="12f2e7d3-01e5-8019-9fbe-fa4a307303fc" class="numbered-list" start="1"><li>For a given value x, how many bits does it take in term of <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></span><span>﻿</span></span>? <p id="454030c4-ca7a-42ad-a68f-4e5267cc9ccb" class="">⇒ Find Quotient and remainder when divided by M:</p><ul id="88a31fe2-3751-4884-b2a7-f834607e8d48" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo>=</mo><mfrac><mrow><mi>x</mi><mo>−</mo><mn>1</mn></mrow><mi>M</mi></mfrac></mrow><annotation encoding="application/x-tex">q = \frac{x - 1}{M}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><span>﻿</span></span><ul id="12f2e7d3-01e5-8037-a309-edd99079fec7" class="bulleted-list"><li style="list-style-type:circle">Subtract <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span>﻿</span></span> from <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span><span>﻿</span></span>, since gaps can never be <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span><span>﻿</span></span>. </li></ul></li></ul><ul id="d7f28e3c-71a3-4c5a-a8ab-05e63d800f50" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>=</mo><mi>x</mi><mtext>–</mtext><mi>q</mi><mi>M</mi><mtext>–</mtext><mn>1</mn></mrow><annotation encoding="application/x-tex">r = x – qM – 1 </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">x</span><span class="mord">–</span><span class="mord mathnormal" style="margin-right:0.10903em;">qM</span><span class="mord">–1</span></span></span></span></span><span>﻿</span></span></li></ul></li></ol><ol type="1" id="12f2e7d3-01e5-807f-a7b8-f73cd95c8352" class="numbered-list" start="2"><li>Encode <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span></span><span>﻿</span></span> and <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span></span><span>﻿</span></span></li></ol><ul id="d544d371-060a-4008-b689-853f1437bf7c" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span></span><span>﻿</span></span> gets encoded in uniary (q 0s, then 1) </li></ul><ul id="effe4c92-e500-40cf-a540-cdf6431b451c" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span></span><span>﻿</span></span> gets encoded in truncated binary<ul id="12f2e7d3-01e5-8083-9b4d-d81234197247" class="toggle"><li><details open=""><summary>truncated binary:</summary><p id="12f2e7d3-01e5-800a-bb9c-d94293cec949" class="">Write down r in binary (truncated): dividing by M, remainder between 0 and n-1, if M is a power 2, need exactly <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span><span>﻿</span></span> bits to write remainder. otherwise, have to round up;</p><figure id="a8eff125-97ab-4753-9bfb-1869c90fda27" class="image"><a href="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-29_at_20.53.10.png"><img style="width:432px" src="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-29_at_20.53.10.png"/></a></figure><ul id="dbb1a3bc-fe8d-4a91-8371-1ba8616e4edc" class="bulleted-list"><li style="list-style-type:disc">if we want to write 0 - n-1, possible remainders</li></ul><ul id="9c24296e-dfe9-4ef6-bc5d-79498327e501" class="bulleted-list"><li style="list-style-type:disc">k +1 bits needed for all possible remainder</li></ul><ul id="5671746b-d680-45f6-ab93-d8f5c87b969a" class="bulleted-list"><li style="list-style-type:disc">u is what&#x27;s &quot;unused&quot;</li></ul><ul id="491d5258-6b2e-46dc-83e1-e1b985e3caf0" class="bulleted-list"><li style="list-style-type:disc">start with shorter ones (write with length k)</li></ul><ul id="884e98b8-c52f-456a-9f71-9a58441c9d62" class="bulleted-list"><li style="list-style-type:disc">for last n-u,<ul id="0d9a753a-c8dc-4025-8020-29cb52391f61" class="bulleted-list"><li style="list-style-type:circle">start with n-1</li></ul><ul id="e9e0d7b6-5dda-4014-8cce-3aefc87f39db" class="bulleted-list"><li style="list-style-type:circle">count your way backwards</li></ul></li></ul></details></li></ul></li></ul><ol type="1" id="12f2e7d3-01e5-809a-9a3e-d4ca612579c5" class="numbered-list" start="3"><li>Get <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span></span><span>﻿</span></span>, % of docs containing given term  </li></ol><ul id="12f2e7d3-01e5-80d8-820d-d364ae92cd8e" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi><mo>=</mo><mfrac><msub><mi>D</mi><mi>T</mi></msub><mi>D</mi></mfrac></mrow><annotation encoding="application/x-tex">z=\frac{D_T}{D}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2336em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8886em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4103em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.0278em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><span>﻿</span></span> = # docs with term / # docs total</li></ul><ol type="1" id="12f2e7d3-01e5-8007-95cd-f405fb6c1f40" class="numbered-list" start="4"><li>Get <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></span><span>﻿</span></span></li></ol><ul id="e2eb3b24-65b1-495a-a3d5-e76cfad8554e" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mo stretchy="false">⌈</mo><mfrac><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mn>2</mn><mo>−</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><mrow><mo>−</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>z</mi><mo stretchy="false">)</mo></mrow></mfrac><mo stretchy="false">⌉</mo></mrow><annotation encoding="application/x-tex">M=\lceil \frac{log(2-z)}{-log(1-z)}\rceil</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em;"></span><span class="mopen">⌈</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mopen mtight">(</span><span class="mord mtight">2</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">⌉</span></span></span></span></span><span>﻿</span></span></li></ul><p id="12f2e7d3-01e5-8067-8fd9-eac95bdacbfd" class="">With the value of <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></span><span>﻿</span></span>: </p><ul id="12f2e7d3-01e5-80e4-9ad3-c578316317e4" class="bulleted-list"><li style="list-style-type:disc">Take this distribution and (sort of) multiply it through ⇒ area under curve = <strong>expected size of posting list.</strong></li></ul><ul id="12f2e7d3-01e5-80d2-aec7-e75f045ea978" class="bulleted-list"><li style="list-style-type:disc">⇒ we can determine <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></span><span>﻿</span></span> that gives smallest posting list.</li></ul></details></li></ul></details></li></ul><ul id="12f2e7d3-01e5-80bb-98c5-d2f94a4da1d1" class="toggle"><li><details open=""><summary>Use multiple encoding techniques</summary><p id="12f2e7d3-01e5-8099-86bf-ec96961bedf0" class="">You don’t need to use the same techniques to encode gaps / term frequencies. </p><ul id="12f2e7d3-01e5-80f0-84fc-cb368ae33f9f" class="bulleted-list"><li style="list-style-type:disc">Its best to treat them as independent (why??)</li></ul><ul id="12f2e7d3-01e5-8025-8826-f033b839502d" class="bulleted-list"><li style="list-style-type:disc">But, you can’t mix aligned and unaligned:<ul id="12f2e7d3-01e5-80ce-9952-c65ed5292676" class="bulleted-list"><li style="list-style-type:circle">e.g. if using V-Int for gaps, cant use G.C for TF&#x27;s. Because you would need to ensure they are byte aligned.</li></ul></li></ul></details></li></ul><ul id="12f2e7d3-01e5-8080-ad6c-e12d50fb8dfd" class="toggle"><li><details open=""><summary>Comparison of techniques</summary><figure id="12f2e7d3-01e5-80b1-8615-e5fef970c3a9" class="image"><a href="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-30_at_13.45.22.png"><img style="width:480px" src="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-30_at_13.45.22.png"/></a><figcaption>Sizes of encoded file. Original file is <strong>181MB</strong></figcaption></figure><ul id="12f2e7d3-01e5-8008-8b01-ed207519ab80" class="bulleted-list"><li style="list-style-type:disc"><em>gap encoding</em> does not work as well.</li></ul><ul id="12f2e7d3-01e5-80d7-93f1-e702f8a203c4" class="bulleted-list"><li style="list-style-type:disc">why uncompressed-int is larger: If you dont compress index and drop stop words (the, is,...) inverted index will be slightly larger than all docs being indexed (because of zip&#x27;s law). </li></ul><ul id="12f2e7d3-01e5-8006-ba15-eb10cb4689fe" class="bulleted-list"><li style="list-style-type:disc">Going from Gamma to Golomb for the frequencies made it slightly smaller, but barely any. Also need to collect both document frequency for terms, and total frequency (how many times the word appears across all documents) – more messages for very little gain</li></ul><ul id="12f2e7d3-01e5-8054-a781-f7d5bc91ee82" class="bulleted-list"><li style="list-style-type:disc">Using V-Int cuts the size in half</li></ul></details></li></ul></div></details><details open=""><summary style="font-weight:600;font-size:1.25em;line-height:1.3;margin:0">Implementation </summary><div class="indented"><p id="12f2e7d3-01e5-808f-a8a4-e2521e0d3e40" class=""><strong>Indexing (inverted index creation) — </strong>good for<strong> MapReduce &amp; Spark</strong></p><ul id="12f2e7d3-01e5-80b8-b1cc-ea5f633e7412" class="bulleted-list"><li style="list-style-type:disc">Scalability is critical </li></ul><ul id="12f2e7d3-01e5-803c-9b5b-c6df36d5008c" class="bulleted-list"><li style="list-style-type:disc">Must be relatively fast, but need not be real time </li></ul><ul id="12f2e7d3-01e5-801c-bbef-ea84dc9964a8" class="bulleted-list"><li style="list-style-type:disc">Fundamentally a batch operation </li></ul><ul id="12f2e7d3-01e5-807f-90e1-cff899dd191c" class="bulleted-list"><li style="list-style-type:disc">Incremental updates may or may not be important </li></ul><p id="12f2e7d3-01e5-8062-a697-c7ce34c50e7f" class=""><strong>Retrieval — </strong>neither are great </p><ul id="12f2e7d3-01e5-80c9-8840-f98cb7c1af6b" class="bulleted-list"><li style="list-style-type:disc">Must have sub-second response time </li></ul><ul id="12f2e7d3-01e5-8073-abb4-fd3734863cc5" class="bulleted-list"><li style="list-style-type:disc">For the web, only need relatively few results</li></ul><ul id="12f2e7d3-01e5-8026-b062-f2f9ab2dfbe3" class="bulleted-list"><li style="list-style-type:disc">spark faster because hold in RDD in memory and does retrieval in memory</li></ul><hr id="12f2e7d3-01e5-807d-8e5a-e529671620fa"/><h3 id="12f2e7d3-01e5-8013-92c3-cf47d0481c4a" class="">Retrieval </h3><ul id="12f2e7d3-01e5-801f-827e-d77c9414e65b" class="bulleted-list"><li style="list-style-type:disc">We set up as a map job in Hadoop, but it doesn’t actually use map/reduce.  It’s just so we can use submit &amp; access HDFS index files.</li></ul><ul id="12f2e7d3-01e5-807d-a1e0-cf780f4de4d1" class="bulleted-list"><li style="list-style-type:disc">Assume everything fits in memory on one machine</li></ul><ul id="12f2e7d3-01e5-804c-be78-d7df02f743e2" class="bulleted-list"><li style="list-style-type:disc">Bespin does <strong>boolean retrieval </strong><ul id="12f2e7d3-01e5-80a5-bfc5-ea57054f52d9" class="bulleted-list"><li style="list-style-type:circle">Queries are formed by linking terms with <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∧</mo><mo separator="true">,</mo><mo>∨</mo><mo separator="true">,</mo><mi mathvariant="normal">¬</mi></mrow><annotation encoding="application/x-tex">\land,\lor, \lnot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.75em;vertical-align:-0.1944em;"></span><span class="mord">∧</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∨</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">¬</span></span></span></span></span><span>﻿</span></span> operators. </li></ul><ul id="12f2e7d3-01e5-8098-aadd-c5c27adba993" class="bulleted-list"><li style="list-style-type:circle">Docs can either match the query, or not at all. </li></ul><ul id="12f2e7d3-01e5-8044-9f88-fafdbd3f26b4" class="bulleted-list"><li style="list-style-type:circle">A set might be sorted by docid, but certainly isn’t sorted by relevance to the query. </li></ul></li></ul><details open=""><summary style="font-weight:600;font-size:1.5em;line-height:1.3;margin:0">Boolean Retrieval</summary><div class="indented"><p id="12f2e7d3-01e5-80e6-a34b-f8db0e1d5887" class="">Computing hits based on the posting lists for each term in the query.</p><figure id="12f2e7d3-01e5-80ce-88e0-ff88b700c6ad" class="image" style="text-align:center"><a href="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-30_at_14.01.46.png"><img style="width:480px" src="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-30_at_14.01.46.png"/></a></figure><ol type="1" id="12f2e7d3-01e5-8047-bf05-dfa295d05cf6" class="numbered-list" start="1"><li>build a parse tree</li></ol><ol type="1" id="12f2e7d3-01e5-80d4-a35a-d29f7ecfc4e2" class="numbered-list" start="2"><li>evaluate that tree</li></ol><ol type="1" id="12f2e7d3-01e5-804d-ab32-ee5c90227a58" class="numbered-list" start="3"><li>Look at posting list for each unique <strong>leaf </strong>term<ol type="a" id="12f2e7d3-01e5-8072-96b5-eacb847dd939" class="numbered-list" start="1"><li>bespin does term at a time. evaluate child, pass on to parent. recursively evaluate.</li></ol><ol type="a" id="12f2e7d3-01e5-8055-8e94-f689cf12fcf3" class="numbered-list" start="2"><li>here we have set operations.</li></ol></li></ol><details open=""><summary style="font-weight:600;font-size:1.25em;line-height:1.3;margin:0">Term at a Time </summary><div class="indented"><p id="12f2e7d3-01e5-8073-8b11-ea847a29b184" class="">Start from bottom, work up until we get answer</p><figure id="12f2e7d3-01e5-8056-8658-fe728bb86be6" class="image" style="text-align:center"><a href="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-30_at_14.04.30.png"><img style="width:384px" src="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-30_at_14.04.30.png"/></a></figure><ul id="12f2e7d3-01e5-80a5-b9fd-df3d58930004" class="bulleted-list"><li style="list-style-type:disc">whatever contains blue also contains fish</li></ul><ul id="12f2e7d3-01e5-801e-aec0-d618ffc94ec9" class="bulleted-list"><li style="list-style-type:disc">these operations (unions, intersections, etc.) are efficient because posting lists are in sorted order<ul id="12f2e7d3-01e5-8029-812b-e7ef22667adf" class="bulleted-list"><li style="list-style-type:circle">AND — only include a doc if the “next” doc from both postings is equal.  </li></ul><ul id="12f2e7d3-01e5-8025-acbb-cba68fc04854" class="bulleted-list"><li style="list-style-type:circle">OR —  if both “next” are equal, only include it once, otherwise same as normal merge.</li></ul><ul id="12f2e7d3-01e5-8041-9b16-cbf857ae9ad8" class="bulleted-list"><li style="list-style-type:circle">NOT — invert the set</li></ul></li></ul></div></details><details open=""><summary style="font-weight:600;font-size:1.25em;line-height:1.3;margin:0">Doc at a Time </summary><div class="indented"><p id="12f2e7d3-01e5-8000-9b51-e0afa95083e4" class="">For each document, see if it passes the query</p><ul id="12f2e7d3-01e5-80a8-a164-d51435f95d49" class="bulleted-list"><li style="list-style-type:disc">Since documents are in sorted order, modified merge operation will work. </li></ul><ul id="12f2e7d3-01e5-800f-bcb2-d418ed2f8d54" class="bulleted-list"><li style="list-style-type:disc">Need to have the posting lists for each term in memory simultaneously (or stream). </li></ul><ul id="12f2e7d3-01e5-8049-baff-d5b583dd43f8" class="bulleted-list"><li style="list-style-type:disc">For NOT, take all posting lists at once and do the union</li></ul><figure id="12f2e7d3-01e5-808f-91fe-c4242d2a69d8" class="image" style="text-align:center"><a href="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-30_at_14.08.20.png"><img style="width:432px" src="04%20%E2%80%94%20Analyzing%20Text/Screenshot_2024-10-30_at_14.08.20.png"/></a></figure><p id="12f2e7d3-01e5-8001-9e7a-fea5b8ab483e" class="">
</p></div></details><p id="12f2e7d3-01e5-80c8-8d8f-e9fa0d1eba2d" class="">
</p><p id="12f2e7d3-01e5-80a1-aed2-cf35615aa09c" class=""><strong>Which is better</strong><br/>Term at a time:<br/></p><ul id="12f2e7d3-01e5-8036-845b-cb09e0b6c6e9" class="bulleted-list"><li style="list-style-type:disc">Need enough memory to hold max posting list as intermediate value</li></ul><p id="12f2e7d3-01e5-80be-a287-e6fb2bd83ff9" class="">Doc at a time</p><ul id="12f2e7d3-01e5-80d4-b526-c961b4792878" class="bulleted-list"><li style="list-style-type:disc">if you can stream it to a file, uses very little memory </li></ul><ul id="12f2e7d3-01e5-807e-8767-e67d18694223" class="bulleted-list"><li style="list-style-type:disc">Only works if index is correctly partitioned</li></ul><p id="12f2e7d3-01e5-807d-ad1c-d491dc919e0a" class="">
</p><p id="12f2e7d3-01e5-805c-8356-e2a6e5731c74" class=""><strong>Index Partitioning</strong></p><ul id="12f2e7d3-01e5-801b-a8d7-cf60190fc50f" class="bulleted-list"><li style="list-style-type:disc">In “term at a time”, most operations will span partitions and will <span style="border-bottom:0.05em solid">require a shuffle</span> (or shuffle-like operation). </li></ul><ul id="12f2e7d3-01e5-80d7-91d1-e96d07cc8b84" class="bulleted-list"><li style="list-style-type:disc">Document indexing is much nicer! Each partition has all terms so it can produce “these are all hits from my partition” – the “reduce” action is then simple concatenation. No shuffle (just collecting the results back to the user’s machine). <ul id="12f2e7d3-01e5-8042-8032-f1234a7fd65a" class="bulleted-list"><li style="list-style-type:circle">a given posting list in partition 0 will have the docs partitoned to this particular worker</li></ul><ul id="12f2e7d3-01e5-8091-b577-e2a4a7a50348" class="bulleted-list"><li style="list-style-type:circle">then they can each do T.A.T or D.A.T</li></ul><ul id="12f2e7d3-01e5-80b0-b6e1-e3ea213ede80" class="bulleted-list"><li style="list-style-type:circle">do 1 last shuffle to merge those</li></ul></li></ul><p id="12f2e7d3-01e5-8095-9739-d19cb499b77b" class=""><strong>You Don’t Want the NOT operation</strong></p><ul id="12f2e7d3-01e5-8015-9832-decf615256bc" class="bulleted-list"><li style="list-style-type:disc">results will be huge. </li></ul><ul id="12f2e7d3-01e5-8046-85a1-e0b7007f3845" class="bulleted-list"><li style="list-style-type:disc">instead, treat negation as a bit.<ul id="12f2e7d3-01e5-8062-88df-d0b27a302daf" class="bulleted-list"><li style="list-style-type:circle">doesn&#x27;t work for doc-at-a-time (e.g. <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">¬</mi><mtext>ham</mtext></mrow><annotation encoding="application/x-tex">\lnot \text{ham}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">¬</span><span class="mord text"><span class="mord">ham</span></span></span></span></span></span><span>﻿</span></span>, need to consider all docs that dont have that, which is a lot of them). </li></ul></li></ul><p id="12f2e7d3-01e5-8018-93aa-ebe8cf9d1fc2" class="">
</p><ul id="12f2e7d3-01e5-801d-a7b9-ca1f179416ea" class="toggle"><li><details open=""><summary><mark class="highlight-orange"><strong>Motivation — Ranked Retrieval </strong></mark></summary><ul id="12f2e7d3-01e5-8038-8abd-cf56ffccc70e" class="bulleted-list"><li style="list-style-type:disc">boolean retrieval ⇒ too many results, not sorted ⇒ no good for web queries</li></ul><ul id="12f2e7d3-01e5-80cc-a65d-d5119ba1c53a" class="bulleted-list"><li style="list-style-type:disc">for web-search, we want<strong> ranked-retrieval</strong></li></ul><ul id="12f2e7d3-01e5-8065-9205-cb41d7f27d06" class="bulleted-list"><li style="list-style-type:disc">Can’t just do Boolean Retrieval and then sort by relevance: <ul id="12f2e7d3-01e5-80f4-ba80-da80bd375884" class="bulleted-list"><li style="list-style-type:circle">cant search for documents that have all 4 words and sort by relevance</li></ul><ul id="12f2e7d3-01e5-8013-bcb0-faa71851955f" class="bulleted-list"><li style="list-style-type:circle">for most docs, relevance score will be 0</li></ul><ul id="12f2e7d3-01e5-8001-90a9-e9b6b0478aaf" class="bulleted-list"><li style="list-style-type:circle">e.g. q = “x y z w” is not the same as “x AND y AND z AND w”</li></ul></li></ul></details></li></ul></div></details><details open=""><summary style="font-weight:600;font-size:1.5em;line-height:1.3;margin:0">Ranked Retrieval</summary><div class="indented"><ul id="12f2e7d3-01e5-8094-baab-ecb8907a72ea" class="bulleted-list"><li style="list-style-type:disc">Gives us a set of hits, sorted by relevance </li></ul><ul id="12f2e7d3-01e5-80fd-b5da-d5ec0ac1bf00" class="bulleted-list"><li style="list-style-type:disc">Given some <strong>relevance function</strong></li></ul><ul id="12f2e7d3-01e5-80b8-a55f-d8b5aa171dbb" class="bulleted-list"><li style="list-style-type:disc">Want all docs, <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span></span><span>﻿</span></span>, that meet a relevance threshold, or top-<link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span><span>﻿</span></span>. </li></ul><ul id="12f2e7d3-01e5-807f-bb12-c3dfc49b708e" class="bulleted-list"><li style="list-style-type:disc">Simplified query: only a list of terms (AND, but not strict – can be missing some terms)</li></ul><h3 id="12f2e7d3-01e5-80d2-b464-ceb23c28cd11" class=""><strong>TFIDF (Relevance Function)</strong></h3><p id="12f2e7d3-01e5-809e-946a-e0470e6f0890" class=""><em>Good as long as authors are honest</em></p><p id="12f2e7d3-01e5-8077-981d-dbd74ab0641a" class="">2 Ways to be relevant: </p><ol type="1" id="12f2e7d3-01e5-8015-9096-e044c8dbfcb4" class="numbered-list" start="1"><li><strong>T</strong>erm <strong>F</strong>requency: if doc has term looking for 100 times =&gt; likely about that concept =&gt; relevant</li></ol><ol type="1" id="12f2e7d3-01e5-80c8-a02c-df5357c85b38" class="numbered-list" start="2"><li><strong>I</strong>nverse <strong>D</strong>ocument <strong>F</strong>requency: If term is rare, fact that doc contains it, means its more important.</li></ol><p id="12f2e7d3-01e5-809c-bce5-d4174dacd8b2" class="">We need: </p><ol type="1" id="12f2e7d3-01e5-805e-bfa4-f59a8bc35f94" class="numbered-list" start="1"><li>term frequency (# times a term is used in a document) </li></ol><ol type="1" id="12f2e7d3-01e5-8092-a1f3-da7f1d751494" class="numbered-list" start="2"><li>document frequency (# of documents containing the given term)</li></ol><hr id="12f2e7d3-01e5-805d-9356-e8f95f5866e1"/><p id="12f2e7d3-01e5-8068-b477-ef2cb4561d9b" class="">Given query:  <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo>=</mo><msub><mi>T</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>T</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">Q=T_1,\dots, T_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">Q</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span></p><p id="12f2e7d3-01e5-8044-8132-d55bdc55bdc2" class="">The relevance w&#x27; document <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span></span></span><span>﻿</span></span> is: </p><figure id="12f2e7d3-01e5-80d2-9d32-ca4f78acbb79" class="equation"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>Q</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>k</mi></munderover><msub><mi>w</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">R(Q, D) = \sum_{i=1}^k w_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.1138em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8361em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span></div></figure><p id="12f2e7d3-01e5-804a-8724-e7def5041520" class="">Where: </p><figure id="12f2e7d3-01e5-8038-83bb-e59a9293c0c7" class="equation"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>w</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mi>t</mi><msub><mi>f</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mi>log</mi><mo>⁡</mo><mfrac><mi>N</mi><mrow><mi>d</mi><msub><mi>f</mi><mi>i</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">w_{ij}=tf_{ij}\log{\frac{N}{df_i}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2408em;vertical-align:-0.8804em;"></span><span class="mord mathnormal">t</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></div></figure><ul id="12f2e7d3-01e5-8022-84f2-da6698f49690" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">w_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> – weight (relevance) of term <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span><span>﻿</span></span> in document<link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex"> j </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span><span>﻿</span></span></li></ul><ul id="12f2e7d3-01e5-8044-a3d6-cbac26b46fe7" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><msub><mi>f</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">tf_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"></span><span class="mord mathnormal">t</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> – # of occurrences of term <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span><span>﻿</span></span> in document <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span><span>﻿</span></span></li></ul><ul id="12f2e7d3-01e5-80ee-a4eb-f0e01a5ee9a6" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">df_{i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">d</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> – # of docs containing term <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span><span>﻿</span></span></li></ul><ul id="12f2e7d3-01e5-8092-a973-e717cc120402" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></span><span>﻿</span></span> – total number of docs. </li></ul><hr id="12f2e7d3-01e5-804c-81cd-f7ff76a11a7e"/><ul id="12f2e7d3-01e5-8046-8e10-fbefa3137935" class="toggle"><li><details open=""><summary><strong>DAAT with TFIDF</strong></summary><p id="12f2e7d3-01e5-8035-8a56-e62984002904" class="">For each document: </p><ol type="1" id="12f2e7d3-01e5-80e4-bcf5-f0b9db2d63ae" class="numbered-list" start="1"><li>Score each query term, and add them all up </li></ol><ol type="1" id="12f2e7d3-01e5-80f7-997f-cc4d2df5c71b" class="numbered-list" start="2"><li>Accumulate best <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span><span>﻿</span></span> hits (e.g. using a min-heap) </li></ol><ul id="12f2e7d3-01e5-8081-8030-cfd089ca1e15" class="toggle"><li><details open=""><summary>Details</summary><ul id="12f2e7d3-01e5-8036-a021-df01044aac64" class="bulleted-list"><li style="list-style-type:disc">we have all search terms, load the posting lists, walk through all docs that are in at least 1 posting, we can fully evaluate document relevence there.</li></ul><ul id="12f2e7d3-01e5-8087-b92f-c35bf90198c3" class="bulleted-list"><li style="list-style-type:disc">for top-k, create a min-heap, as we find docs, add to heap if less than k, else look at root (least relevent), and swap root if needed.<ul id="12f2e7d3-01e5-80cc-a5af-ec9230566a67" class="bulleted-list"><li style="list-style-type:circle">uses constant amount of memory (k)</li></ul><ul id="12f2e7d3-01e5-8091-87fb-f3bcecc6560e" class="bulleted-list"><li style="list-style-type:circle">fast if no post-list is long: so ignore stop-words (like &quot;the&quot;) in the query.</li></ul></li></ul><ul id="12f2e7d3-01e5-805f-938a-e9493ca093fd" class="bulleted-list"><li style="list-style-type:disc">no way of doing early termination. have to look at all of them</li></ul></details></li></ul><hr id="12f2e7d3-01e5-806c-9eba-d657bbc7efaf"/><p id="12f2e7d3-01e5-805a-b953-f5b0fa7f440e" class="">Pros: </p><ul id="12f2e7d3-01e5-808c-be24-d6086ba6ad66" class="bulleted-list"><li style="list-style-type:disc">Time is O(n log k), memory is O(k) – k probably a constant </li></ul><ul id="12f2e7d3-01e5-8068-a77c-c006dadf0a18" class="bulleted-list"><li style="list-style-type:disc">Easily distributed</li></ul><p id="12f2e7d3-01e5-80b1-bcc2-e546c867c19d" class="">Cons: </p><p id="12f2e7d3-01e5-804c-b5dd-c794afc1ccc3" class="">can’t terminate early, must look at whole document collection</p><hr id="12f2e7d3-01e5-800e-918f-d34f099ca26f"/><p id="12f2e7d3-01e5-80b5-858a-cb7023b7fe16" class="">
</p></details></li></ul><ul id="12f2e7d3-01e5-8004-ab52-da6dcb429b22" class="toggle"><li><details open=""><summary><strong>TAAT with TFIDF</strong></summary><ol type="1" id="12f2e7d3-01e5-8078-ab24-f14e5f5bef9d" class="numbered-list" start="1"><li>Collect hits and ranking for “<strong>rarest”</strong> term into accumulator </li></ol><ol type="1" id="12f2e7d3-01e5-8031-b677-f355b3e434e4" class="numbered-list" start="2"><li>For each other term in the query:<ol type="a" id="12f2e7d3-01e5-80f2-8939-ca27d96386b7" class="numbered-list" start="1"><li>If a document does NOT have that term, remove from accumulator</li></ol><ol type="a" id="12f2e7d3-01e5-8029-8dbb-ef7bd16d4f87" class="numbered-list" start="2"><li>Otherwise, add next term’s ranking to overall ranking</li></ol></li></ol><ul id="12f2e7d3-01e5-8062-b65b-e075aca964e2" class="toggle"><li><details open=""><summary>Details</summary><ul id="12f2e7d3-01e5-8048-b12b-d80eb31fcb42" class="bulleted-list"><li style="list-style-type:disc">more memory, but has early termination, so can be faster</li></ul><ul id="12f2e7d3-01e5-8025-845c-fcb689e4b520" class="bulleted-list"><li style="list-style-type:disc">good to have DF at front of each posting list so you can start with shortest one; smallest doc freq; most important one.</li></ul><ul id="12f2e7d3-01e5-8057-a4b1-d90958950e86" class="bulleted-list"><li style="list-style-type:disc">for top <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span><span>﻿</span></span>, might only have to look at a few terms</li></ul><ul id="12f2e7d3-01e5-8086-a70b-e5e8656b59f3" class="bulleted-list"><li style="list-style-type:disc">&quot;rarest&quot; = term with smallest DF value; in the fewest docs =&gt; N/DF is largest (highest impact on relevance)</li></ul><p id="12f2e7d3-01e5-80c6-921b-e86b8bf967e7" class="">For  <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo>=</mo><mi>T</mi><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>T</mi><mi>k</mi></mrow><annotation encoding="application/x-tex">Q = T1, ..., Tk</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">Q</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span><span>﻿</span></span></p><ul id="12f2e7d3-01e5-8081-97cd-d96025e9e7a2" class="bulleted-list"><li style="list-style-type:disc">sort by DF</li></ul><ul id="12f2e7d3-01e5-80cc-beb9-f8c137777791" class="bulleted-list"><li style="list-style-type:disc">as you go through each term, add partial sums to R(Q, D_j) and you can stop early.</li></ul></details></li></ul><hr id="12f2e7d3-01e5-804a-9171-cdd54e4fb0f2"/><p id="12f2e7d3-01e5-80af-bc7b-cdcd5bf90cda" class="">Pros: </p><ul id="12f2e7d3-01e5-80de-b03e-f12d129f5e1a" class="bulleted-list"><li style="list-style-type:disc">Can have early termination heuristics, will not normally need to traverse all documents.</li></ul><p id="12f2e7d3-01e5-80c6-a6ad-e96a911926f9" class="">Cons: </p><ul id="12f2e7d3-01e5-8001-9d72-cfd0a995cae7" class="bulleted-list"><li style="list-style-type:disc">uses a lot of memory</li></ul></details></li></ul><p id="12f2e7d3-01e5-800e-8617-ffd24e8ff053" class="">Which to use? </p><ul id="12f2e7d3-01e5-808d-ac31-cad9d2d7298a" class="bulleted-list"><li style="list-style-type:disc">boolean retrieval: TAAT</li></ul><ul id="12f2e7d3-01e5-800c-b038-f52475a73fe9" class="bulleted-list"><li style="list-style-type:disc">ranked retrieval: use heuristic to determine which to use (TAAT, DAAT)</li></ul><p id="12f2e7d3-01e5-80de-bd1e-eb12db045dc4" class="">
</p></div></details></div></details></div></article><span class="sans" style="font-size:14px;padding-top:2em"><hr/><details open="" style="padding-top:1em"><summary style="font-weight:600;font-size:1.25em;line-height:1.3;margin:0">Inline comments</summary><div class="indented"><div><ul class="toggle"><li><div><span class="user" style="padding:0.2em"><img src="https://lh3.googleusercontent.com/a/ALm5wu2D7opyGPhg1IC5ZBqM5ZYIOR8MwAIakj3yS20lKw=s100" class="icon user-icon"/><span><b>roman hudaj</b> <time style="font-size:0.8em">Oct 30, 2024, 12:07 PM</time></span></span></div><div style="padding:0.2em">note: not sure ab this equations </div><div style="padding:0.3em"></div></li></ul></div><hr/></div><div class="indented"><div><p style="padding:0.2em"><b>Block text</b>: <mark class="highlight-yellow_background">Given <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">⟨</mo><msub><mi>w</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>w</mi><mi>k</mi></msub><mo stretchy="false">⟩</mo></mrow><annotation encoding="application/x-tex">\langle w_1,\dots, w_k \rangle</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">⟨</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">⟩</span></span></span></span></span><span>﻿</span></span>, get the prob-dist. for <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">w_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span></mark></p><ul class="toggle"><li><div><span class="user" style="padding:0.2em"><img src="https://lh3.googleusercontent.com/a/ALm5wu2D7opyGPhg1IC5ZBqM5ZYIOR8MwAIakj3yS20lKw=s100" class="icon user-icon"/><span><b>roman hudaj</b> <time style="font-size:0.8em">Oct 30, 2024, 11:07 AM</time></span></span></div><div style="padding:0.2em">the hard part.</div><div style="padding:0.3em"></div></li></ul></div><hr/></div><div class="indented"><div><p style="padding:0.2em"><b>Block text</b>: <mark class="highlight-yellow_background">^</mark></p><ul class="toggle"><li><div><span class="user" style="padding:0.2em"><img src="https://lh3.googleusercontent.com/a/ALm5wu2D7opyGPhg1IC5ZBqM5ZYIOR8MwAIakj3yS20lKw=s100" class="icon user-icon"/><span><b>roman hudaj</b> <time style="font-size:0.8em">Oct 30, 2024, 11:48 AM</time></span></span></div><div style="padding:0.2em">start of line</div><div style="padding:0.3em"></div></li></ul></div><hr/></div><div class="indented"><div><p style="padding:0.2em"><b>Block text</b>: <mark class="highlight-yellow_background">$</mark></p><ul class="toggle"><li><div><span class="user" style="padding:0.2em"><img src="https://lh3.googleusercontent.com/a/ALm5wu2D7opyGPhg1IC5ZBqM5ZYIOR8MwAIakj3yS20lKw=s100" class="icon user-icon"/><span><b>roman hudaj</b> <time style="font-size:0.8em">Oct 30, 2024, 11:48 AM</time></span></span></div><div style="padding:0.2em">end of line</div><div style="padding:0.3em"></div></li></ul></div><hr/></div><div class="indented"><div><ul class="toggle"><li><div><span class="user" style="padding:0.2em"><img src="https://lh3.googleusercontent.com/a/ALm5wu2D7opyGPhg1IC5ZBqM5ZYIOR8MwAIakj3yS20lKw=s100" class="icon user-icon"/><span><b>roman hudaj</b> <time style="font-size:0.8em">Oct 3, 2024, 4:42 PM</time></span></span></div><div style="padding:0.2em">we added 1 to every count</div><div style="padding:0.3em"></div></li></ul></div><hr/></div><div class="indented"><div><p style="padding:0.2em"><b>Block text</b>: <mark class="highlight-yellow_background">1</mark></p><ul class="toggle"><li><div><span class="user" style="padding:0.2em"><img src="https://lh3.googleusercontent.com/a/ALm5wu2D7opyGPhg1IC5ZBqM5ZYIOR8MwAIakj3yS20lKw=s100" class="icon user-icon"/><span><b>roman hudaj</b> <time style="font-size:0.8em">Oct 30, 2024, 11:50 AM</time></span></span></div><div style="padding:0.2em">before it was 0</div><div style="padding:0.3em"></div></li></ul></div><hr/></div><div class="indented"><div><p style="padding:0.2em"><b>Block text</b>: <mark class="highlight-yellow_background">^</mark></p><ul class="toggle"><li><div><span class="user" style="padding:0.2em"><img src="https://lh3.googleusercontent.com/a/ALm5wu2D7opyGPhg1IC5ZBqM5ZYIOR8MwAIakj3yS20lKw=s100" class="icon user-icon"/><span><b>roman hudaj</b> <time style="font-size:0.8em">Oct 30, 2024, 11:48 AM</time></span></span></div><div style="padding:0.2em">start of line</div><div style="padding:0.3em"></div></li></ul></div><hr/></div><div class="indented"><div><p style="padding:0.2em"><b>Block text</b>: <mark class="highlight-yellow_background">$</mark></p><ul class="toggle"><li><div><span class="user" style="padding:0.2em"><img src="https://lh3.googleusercontent.com/a/ALm5wu2D7opyGPhg1IC5ZBqM5ZYIOR8MwAIakj3yS20lKw=s100" class="icon user-icon"/><span><b>roman hudaj</b> <time style="font-size:0.8em">Oct 30, 2024, 11:48 AM</time></span></span></div><div style="padding:0.2em">end of line</div><div style="padding:0.3em"></div></li></ul></div><hr/></div><div class="indented"><div><p style="padding:0.2em"><b>Block text</b>: <mark class="highlight-yellow_background">1</mark></p><ul class="toggle"><li><div><span class="user" style="padding:0.2em"><img src="https://lh3.googleusercontent.com/a/ALm5wu2D7opyGPhg1IC5ZBqM5ZYIOR8MwAIakj3yS20lKw=s100" class="icon user-icon"/><span><b>roman hudaj</b> <time style="font-size:0.8em">Oct 30, 2024, 11:50 AM</time></span></span></div><div style="padding:0.2em">before it was 0</div><div style="padding:0.3em"></div></li></ul></div><hr/></div></details></span></body></html>