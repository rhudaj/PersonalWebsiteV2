<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>05 — Graphs</title><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/></head><body><article id="1342e7d3-01e5-80ce-a316-c19b47e5c087" class="page sans"><header><div class="page-header-icon undefined"><img class="icon" src="https://www.notion.so/icons/folder_purple.svg"/></div><h1 class="page-title">05 — Graphs</h1><p class="page-description"></p></header><div class="page-body"><details open=""><summary style="font-weight:600;font-size:1.875em;line-height:1.3;margin:0">Representing Graph in Hadoop </summary><div class="indented"><table id="1342e7d3-01e5-8057-9fd3-f305e5b8a18c" class="simple-table"><thead class="simple-table-header"><tr id="1342e7d3-01e5-8066-890c-c7a09c11eb2f"><th id="xQ~h" class="simple-table-header-color simple-table-header" style="width:149.89732360839844px">Way to represent <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span></span></span></span></span><span>﻿</span></span></th><th id="y^Xg" class="simple-table-header-color simple-table-header">?</th><th id="^{]]" class="simple-table-header-color simple-table-header">Pros</th><th id="I&gt;O[" class="simple-table-header-color simple-table-header">Cons</th></tr></thead><tbody><tr id="308c1088-fc70-4ebe-adb2-ae25342091a2"><th id="xQ~h" class="simple-table-header-color simple-table-header" style="width:149.89732360839844px">Adjacency Matrix </th><td id="y^Xg" class=""><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">n \times n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span><span>﻿</span></span>, <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>M</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mn>1</mn><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext></mrow><annotation encoding="application/x-tex">M_{ij}=1 \implies</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6684em;vertical-align:-0.024em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⟹</span><span class="mspace" style="margin-right:0.2778em;"></span></span></span></span></span><span>﻿</span></span>edge between <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>v</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">v_i, v_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span></td><td id="^{]]" class="">- <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span><span>﻿</span></span> neighbour check<br/><br/></td><td id="I&gt;O[" class="">- Mosty <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mi>s</mi></mrow><annotation encoding="application/x-tex">0s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mord mathnormal">s</span></span></span></span></span><span>﻿</span></span> for sparse graph<br/>- Slow to find neighbourhood<br/></td></tr><tr id="85db09fe-e6d2-49b2-ab5b-b45b17067453"><th id="xQ~h" class="simple-table-header-color simple-table-header" style="width:149.89732360839844px">Adjacency List</th><td id="y^Xg" class="">Row <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span><span>﻿</span></span> is a list of the out neighbours of <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">v_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span></td><td id="^{]]" class="">- Small for sparse graph</td><td id="I&gt;O[" class="">- Difficult to find neighbourhood.  </td></tr></tbody></table><p id="1342e7d3-01e5-801f-90f3-f37f4dfd6de3" class="">Many graph algorithms are <span style="border-bottom:0.05em solid">iterative</span>. They usually involve: </p><ul id="1342e7d3-01e5-8035-83ca-f8f47e8bf7a1" class="bulleted-list"><li style="list-style-type:disc">Local (Independent) Computations for each node<p id="1342e7d3-01e5-80d4-9509-c3780f746c41" class=""><mark class="highlight-gray">Independent ⇒ </mark><em><mark class="highlight-gray">These can be done in parallel </mark></em><mark class="highlight-gray">⇒ good use of </mark><mark class="highlight-gray"><code>Map</code></mark></p><p id="1342e7d3-01e5-80f9-a3fa-c695254ecb64" class=""><mark class="highlight-gray">Using </mark><mark class="highlight-gray"><strong>adjacency list: </strong></mark><mark class="highlight-gray">key = vertex, value = adjacency list</mark></p></li></ul><ul id="1342e7d3-01e5-8052-aa39-e5d2451f2c3c" class="bulleted-list"><li style="list-style-type:disc">Propagating these results to neighbours (graph traversal)<p id="1342e7d3-01e5-8052-9c64-d48a2930b317" class="block-color-gray">Then repeat based on neighbours, so on the update, each vertex needs a way to let its neighbour know the new value for the vertex.</p><p id="1342e7d3-01e5-8051-bab6-e0974a1cf2fa" class="block-color-gray">Collecting the propagated messages is <em>reduce-like </em>⇒ <code>shuffle</code> the KVPs. </p><p id="1342e7d3-01e5-80f8-8646-ecc87c7d7971" class="block-color-gray"><code>Reduce</code>: each neighbour retrieves messages addressed to it, reduce to new updated stated</p></li></ul></div></details><details open=""><summary style="font-weight:600;font-size:1.875em;line-height:1.3;margin:0">Single Source Shortest Path </summary><div class="indented"><figure class="block-color-default_background callout" style="white-space:pre-wrap;display:flex" id="1342e7d3-01e5-807e-b4df-e3acfaf1e2da"><div style="font-size:1.5em"><img class="icon" src="https://www.notion.so/icons/question-mark_gray.svg"/></div><div style="width:100%"><p id="9d5b2f73-676c-4029-b8c8-a1af7cea33a2" class=""><mark class="highlight-red"><strong>SSSP Problem</strong></mark></p><p id="1342e7d3-01e5-8028-a030-d306be9c013e" class="">Find the shortest (e.g. fewest links) path from a single node (source) to all other nodes</p></div></figure><p id="1342e7d3-01e5-80e3-be02-cc34e45513a8" class=""><strong>Dijkstra’s isn’t Parallel</strong></p><p id="1342e7d3-01e5-8003-abe6-d82e3fa80354" class="">Initial State: </p><ul id="1342e7d3-01e5-80e4-8403-d8c800caa170" class="bulleted-list"><li style="list-style-type:disc">Set all nodes as unvisited, with D = infinity </li></ul><ul id="1342e7d3-01e5-80e9-b362-e3bbd9c7efc6" class="bulleted-list"><li style="list-style-type:disc">Set source to 0</li></ul><p id="1342e7d3-01e5-8033-a3c2-e8a6822aa7a0" class="">Iteration: </p><ul id="1342e7d3-01e5-806c-bbdd-dbeff67fc1ad" class="bulleted-list"><li style="list-style-type:disc">Let v be the unvisited node with <mark class="highlight-red_background">lowest distance</mark><p id="1342e7d3-01e5-8085-ab9b-dae1470ee5d0" class=""><em><mark class="highlight-gray"><mark class="highlight-red_background">This is a </mark></mark></em><em><mark class="highlight-gray"><mark class="highlight-red_background"><strong>local</strong></mark></mark></em><em><mark class="highlight-gray"><mark class="highlight-red_background"> calculation. It’s </mark></mark></em><em><mark class="highlight-gray"><mark class="highlight-red_background"><strong>Global</strong></mark></mark></em><em><mark class="highlight-gray"><mark class="highlight-red_background">. </mark></mark></em></p><p id="1342e7d3-01e5-8019-9864-d225024d4bdd" class=""><em><mark class="highlight-gray">⇒ 1 iteration (hence, 1 job) for each vertex ⇒ slow</mark></em></p></li></ul><ul id="1342e7d3-01e5-80c4-9e13-d0604f1e79e3" class="bulleted-list"><li style="list-style-type:disc">For all out-neighbours u of v, update distance if less. </li></ul><p id="15b2e7d3-01e5-8011-9eeb-e9c30d1f789c" class=""><strong>Dijkstra’s vs. BFS</strong></p><ul id="15b2e7d3-01e5-80a1-9687-f96ac5aaedd3" class="bulleted-list"><li style="list-style-type:disc">Dijkstra only investigates the lowest-cost node on the frontier</li></ul><ul id="15b2e7d3-01e5-8003-be95-c7f8d538f29d" class="bulleted-list"><li style="list-style-type:disc">Parallel BFS investigates all paths in parallel. </li></ul><ul id="15b2e7d3-01e5-80a0-9b37-c2ca570d4915" class="bulleted-list"><li style="list-style-type:disc">It’s a simple optimization to restrict to the frontier</li></ul><h2 id="1342e7d3-01e5-802c-b1e4-fc387d13a351" class=""><strong>Parallel BFS</strong></h2><p id="1342e7d3-01e5-80e7-a05d-c83995a8782c" class="">Initial state: </p><ul id="1342e7d3-01e5-803c-abec-cb5f07b09bed" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mi>S</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">dist(S) = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span><span>﻿</span></span></li></ul><ul id="1342e7d3-01e5-80e4-ab21-c319109f7019" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">dist(v) = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span>﻿</span></span>, for all <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>→</mo><mi>v</mi></mrow><annotation encoding="application/x-tex">s→v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span></span><span>﻿</span></span> edges</li></ul><p id="1342e7d3-01e5-80cd-97e7-f19aff2e7f00" class="">Iteration: </p><ul id="1342e7d3-01e5-8014-bfa8-f91e7c58f1e8" class="bulleted-list"><li style="list-style-type:disc">Find min-distance over all neighbours, <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span></span><span>﻿</span></span> </li></ul><ul id="15b2e7d3-01e5-80a7-b92e-ea859f56a582" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><mo>+</mo><mi>m</mi><mi>i</mi><msub><mi>n</mi><mi>u</mi></msub><mo stretchy="false">(</mo><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">dist(v) = 1 + min_u(dist(u))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">mi</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">u</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mclose">))</span></span></span></span></span><span>﻿</span></span> </li></ul><figure id="1342e7d3-01e5-8063-a256-e523eb53cd4d" class="image" style="text-align:center"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_13.53.45.png"><img style="width:288px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_13.53.45.png"/></a></figure><p id="1342e7d3-01e5-8057-86f3-e786f25ac57d" class="">Less efficient, but parallel: </p><ul id="1342e7d3-01e5-8003-9a05-eec11325c4bc" class="bulleted-list"><li style="list-style-type:disc">redundant calculations (calculates numbers only to replace them). </li></ul><p id="1342e7d3-01e5-80a1-9f5e-f748b1b1af8e" class="">Simpler for unweighted graph: </p><ul id="1342e7d3-01e5-8028-85e2-ec37dac90fbf" class="bulleted-list"><li style="list-style-type:disc">Add +1 every time. Once a vertex has a value, it will <span style="border-bottom:0.05em solid">never be updated again</span></li></ul><hr id="1342e7d3-01e5-801c-aaeb-d7f379e1482e"/><h3 id="1342e7d3-01e5-8008-911f-ec88740b74ec" class=""><strong>Hadoop Implementation </strong></h3><p id="1342e7d3-01e5-801b-9e2c-f6612a798776" class="">Note: finds the distance of the shortest path, not what the shortest path is. To do this, we would need to modify it to store/emit previous node along with distance. </p><p id="1342e7d3-01e5-804e-baa7-fe0378afffc0" class="">To iterate, the output of the reducer gets passed to another (identical) job as the input.</p><ul id="1342e7d3-01e5-806d-a275-eb4d48ce481c" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-yellow_background">Mappers need to emit the adj-lists to reducers each iteration</mark></li></ul><p id="1342e7d3-01e5-803e-964e-d55219c8d410" class=""><strong>Unweighted</strong></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1342e7d3-01e5-8025-a3d8-f28c292453ea" class="code"><code class="language-Python">class Node:
	adjlist: list  # list of ID&#x27;s (for weighted), [ID, weight] (for unweighted)
	d: int         # distance

def Map(ID, node):
&#x27;&#x27;&#x27;
	key: node ID
	value: node DS itself
&#x27;&#x27;&#x27;
		emit(ID, node) # send itself
		# Each neighbour m is d+1 away from source node
		for m in node.adjlist:
					emit(m, node.d + 1) # for weifghted graph, + m.w

def Reduce(ID, values):
&#x27;&#x27;&#x27;
	key: node ID
	value: distances to node n
&#x27;&#x27;&#x27;
		d = infinity
		node = None

		for val in values:
			  # Check which emitted value it is.
				if isNode(val):
						node = 0
				else:
						d = min(d, val) # update distance if less
				# Emit the updated node if less
				node.d = min(node.d, d)
				emit(ID, node)</code></pre><p id="1342e7d3-01e5-80ad-96cc-ceb71479afe0" class="">When to stop the algorithm: </p><ul id="1342e7d3-01e5-8077-b77b-e95ebbd23807" class="bulleted-list"><li style="list-style-type:disc">stop when no changes (For both unweighted/weighted)</li></ul><p id="1342e7d3-01e5-80ba-b8d4-f5c3b1a9d637" class="">Unweighted vs. Weighted</p><ul id="1342e7d3-01e5-80df-a710-fdc943a43a14" class="bulleted-list"><li style="list-style-type:disc">Unweighted: <ul id="1342e7d3-01e5-80e9-9e10-fc6993996509" class="bulleted-list"><li style="list-style-type:circle">A node distance will never be replace once visited </li></ul><ul id="1342e7d3-01e5-8035-8f4a-d473c1bc3359" class="bulleted-list"><li style="list-style-type:circle">⇒ BFS always finishes in a small # iterations. <ul id="1342e7d3-01e5-80d3-acbe-f80cb9d67808" class="bulleted-list"><li style="list-style-type:square">e.g. pick any actor in the world. Can you connect them to Kevin bacon through actors they&#x27;ve worked with chain?</li></ul></li></ul></li></ul><ul id="1342e7d3-01e5-800d-a8c3-dfc062ab8d0d" class="bulleted-list"><li style="list-style-type:disc">Weighted:<ul id="1342e7d3-01e5-802b-b932-e8d2280de973" class="bulleted-list"><li style="list-style-type:circle">Once vertex has finite value, it could still be replaced. </li></ul><ul id="1342e7d3-01e5-80bf-ac32-c57b3c8b568b" class="bulleted-list"><li style="list-style-type:circle">⇒ Takes many more iterations to converge. </li></ul></li></ul><p id="1342e7d3-01e5-8064-a52a-e5441d60836e" class="">(Optional) Reduce Frontier Size: </p><ul id="1342e7d3-01e5-80dc-99d9-e38b91d94aed" class="bulleted-list"><li style="list-style-type:disc">Many new vertices are visited in order to do the calculation for the next iteration. </li></ul><ul id="1342e7d3-01e5-8002-92a1-f9db2208e9b3" class="bulleted-list"><li style="list-style-type:disc">To reduce the # of iterations, could add extra field to nodes called <code>update</code> and only emit if that node was updated (no point in sending the same values). </li></ul><hr id="1342e7d3-01e5-8032-b760-d4bf0c325e8f"/><p id="1342e7d3-01e5-807a-ba97-e8ff771f0d43" class=""><strong>Issues with MapReduce Iteration</strong></p><ul id="1342e7d3-01e5-80b2-a9b7-c19df4258930" class="bulleted-list"><li style="list-style-type:disc">We send the entire graph structure each iteration, only to have them send it back again. </li></ul><ul id="15b2e7d3-01e5-80cd-9272-d6dec482f12b" class="bulleted-list"><li style="list-style-type:disc">Slow<ul id="15b2e7d3-01e5-8046-974c-d5b4381a7303" class="bulleted-list"><li style="list-style-type:circle">since MapReduce is not meant for iteration (writes to HDFS between job). </li></ul><ul id="15b2e7d3-01e5-8017-ab5a-f414cb27aed2" class="bulleted-list"><li style="list-style-type:circle">No guarantee that new job will be on the same worker (with the cached HDFS blocks). </li></ul></li></ul><figure id="1342e7d3-01e5-80cb-b8b6-c4cdd2ee0c11" class="image" style="text-align:center"><a href="05%20%E2%80%94%20Graphs/4f7bb7aa-818d-44ee-ae39-cd9358e8552c.png"><img style="width:192px" src="05%20%E2%80%94%20Graphs/4f7bb7aa-818d-44ee-ae39-cd9358e8552c.png"/></a></figure><h3 id="1342e7d3-01e5-80d0-8105-e73ae99a8ecc" class=""><strong>Parallel BFS — Spark</strong></h3><figure id="1342e7d3-01e5-8022-9561-e6a7aec6bf2a" class="image" style="text-align:center"><a href="05%20%E2%80%94%20Graphs/4f68fadb-94d7-4e4c-ad0f-352b9f364c15.png"><img style="width:288px" src="05%20%E2%80%94%20Graphs/4f68fadb-94d7-4e4c-ad0f-352b9f364c15.png"/></a></figure><ol type="1" id="1342e7d3-01e5-8020-96c5-de769a510c07" class="numbered-list" start="1"><li>adjacency list: <span style="border-bottom:0.05em solid">Load</span> it, <span style="border-bottom:0.05em solid">partition</span> by label and <span style="border-bottom:0.05em solid">cache</span>. </li></ol><ol type="1" id="15b2e7d3-01e5-8033-aaa4-f5d1e8947f35" class="numbered-list" start="2"><li>Repeat (until stop) <ol type="a" id="1342e7d3-01e5-80e3-9277-e62625971161" class="numbered-list" start="1"><li>Join RDD[nodes] against adjacency-list ⇒ gives you finite distances (or nothing for nodes not explored). </li></ol><ol type="a" id="15b2e7d3-01e5-8048-8fe3-e8a07cb22ba0" class="numbered-list" start="2"><li><code>ReduceByKey</code> gets the minimum distance. </li></ol><ul id="1342e7d3-01e5-802a-a788-dc9241f76393" class="bulleted-list"><li style="list-style-type:disc">still keep node itself apart from values.</li></ul><p id="15b2e7d3-01e5-8092-a10d-f134259c11c6" class="">c. <code>updatedNodes</code>: runs an action (forces iteration to proceed)</p></li></ol></div></details><hr id="1362e7d3-01e5-80b2-82a2-cdbdc1ab0176"/><h1 id="15b2e7d3-01e5-8030-a93d-c1b08f39d724" class="">Hyperlink Graph</h1><p id="1362e7d3-01e5-806f-9815-c95bfe514103" class="">The web is a (large) graph</p><ul id="1362e7d3-01e5-800e-845a-d62607c31067" class="bulleted-list"><li style="list-style-type:disc">pages = nodes </li></ul><ul id="1362e7d3-01e5-8073-9b70-e24000cce676" class="bulleted-list"><li style="list-style-type:disc">hyperlinks = directed edges</li></ul><p id="1362e7d3-01e5-8004-be51-f525a01fc3ce" class="">Big data  (hundreds of billions) ⇒ good use for <em>Hadoop</em></p><h1 id="1342e7d3-01e5-8030-953b-ec61a934fd4d" class="">Page Rank </h1><p id="1362e7d3-01e5-805d-8e37-f93ceaf9e813" class="">Ranks web pages based on the hyperlink graph</p><figure class="block-color-default_background callout" style="white-space:pre-wrap;display:flex" id="1362e7d3-01e5-80f3-8a24-ca62e4bf21d4"><div style="font-size:1.5em"><img class="icon" src="https://www.notion.so/icons/question-mark_gray.svg"/></div><div style="width:100%"><p id="87f66a37-b96e-4a66-b89e-ff4342386d70" class=""><strong>Random Walk Interpretation</strong></p><p id="1362e7d3-01e5-80a9-8d45-c5832aa46daf" class="">PageRank is a probability distribution over nodes — the likelihood of reaching a node while doing a “<strong>random walk</strong>”: <div class="indented"><p id="15b2e7d3-01e5-8042-90fd-c38bf701a6a4" class="">At each page, flip a coin:</p><ul id="1362e7d3-01e5-8020-b2f6-dbd16067fc4b" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-red">Heads ⇒ follow a random link from the current page </mark></li></ul><ul id="1362e7d3-01e5-8088-8852-f76af84a9275" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-blue">Tails ⇒ randomly </mark><mark class="highlight-blue"><strong>teleport</strong></mark><mark class="highlight-blue"> to a new page</mark></li></ul></div></p></div></figure><figure class="block-color-default_background callout" style="white-space:pre-wrap;display:flex" id="1362e7d3-01e5-8093-93db-c68110593e12"><div style="font-size:1.5em"><img class="icon" src="https://www.notion.so/icons/question-mark_gray.svg"/></div><div style="width:100%"><p id="33d6f45b-e8fd-4a8b-a223-8b4b90d34280" class=""><strong>Formal Definition</strong></p><figure id="1362e7d3-01e5-8051-b254-f069e78e3544" class="equation"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mstyle mathcolor="#df0030"><mi>α</mi><mrow><mo fence="true">(</mo><mfrac><mn>1</mn><mrow><mi mathvariant="normal">∣</mi><mi>G</mi><mi mathvariant="normal">∣</mi></mrow></mfrac><mo fence="true">)</mo></mrow></mstyle><mo>+</mo><mstyle mathcolor="#6495ed"><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>α</mi><mo stretchy="false">)</mo><munder><mo>∑</mo><mrow><mi>m</mi><mo>∈</mo><mi>L</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow></munder><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><mrow><mi>C</mi><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">P(n)=
\red{
\alpha
\left( \frac{1}{|G|} \right)
}
+
\blue{
(1-\alpha) \sum_{m\in L(n)}
\frac{P(m)}{C(m)}
}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;color:#df0030;">α</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner" style="color:#df0030;"><span class="mopen delimcenter" style="color:#df0030;top:0em;"><span class="delimsizing size3" style="color:#df0030;"><span style="color:#df0030;">(</span></span></span><span class="mord" style="color:#df0030;"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:#df0030;"><span class="mord" style="color:#df0030;">∣</span><span class="mord mathnormal" style="color:#df0030;">G</span><span class="mord" style="color:#df0030;">∣</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="color:#df0030;border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:#df0030;"><span class="mord" style="color:#df0030;">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="color:#df0030;top:0em;"><span class="delimsizing size3" style="color:#df0030;"><span style="color:#df0030;">)</span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen" style="color:#6495ed;">(</span><span class="mord" style="color:#6495ed;">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin" style="color:#6495ed;">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.943em;vertical-align:-1.516em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;color:#6495ed;">α</span><span class="mclose" style="color:#6495ed;">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits" style="color:#6495ed;"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.809em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight" style="color:#6495ed;"><span class="mord mtight" style="color:#6495ed;"><span class="mord mathnormal mtight" style="color:#6495ed;">m</span><span class="mrel mtight" style="color:#6495ed;">∈</span><span class="mord mathnormal mtight" style="color:#6495ed;">L</span><span class="mopen mtight" style="color:#6495ed;">(</span><span class="mord mathnormal mtight" style="color:#6495ed;">n</span><span class="mclose mtight" style="color:#6495ed;">)</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op" style="color:#6495ed;">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.516em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord" style="color:#6495ed;"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:#6495ed;"><span class="mord mathnormal" style="margin-right:0.07153em;color:#6495ed;">C</span><span class="mopen" style="color:#6495ed;">(</span><span class="mord mathnormal" style="color:#6495ed;">m</span><span class="mclose" style="color:#6495ed;">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="color:#6495ed;border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:#6495ed;"><span class="mord mathnormal" style="margin-right:0.13889em;color:#6495ed;">P</span><span class="mopen" style="color:#6495ed;">(</span><span class="mord mathnormal" style="color:#6495ed;">m</span><span class="mclose" style="color:#6495ed;">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure><p id="1362e7d3-01e5-8003-a299-daeaaa03ce47" class="">Terms: <div class="indented"><p id="1362e7d3-01e5-80ef-be07-f3a8b0f86219" class=""><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi mathvariant="normal">∣</mi><mi>G</mi><mi mathvariant="normal">∣</mi></mstyle></mrow><annotation encoding="application/x-tex">\small |G|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9em;vertical-align:-0.225em;"></span><span class="mord sizing reset-size6 size5">∣</span><span class="mord mathnormal sizing reset-size6 size5">G</span><span class="mord sizing reset-size6 size5">∣</span></span></span></span></span><span>﻿</span></span> — total # pages </p><p id="1362e7d3-01e5-808d-a917-ed261b4bff5e" class=""><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>L</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small L(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9em;vertical-align:-0.225em;"></span><span class="mord mathnormal sizing reset-size6 size5">L</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">n</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span> — set of pages that link to <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>n</mi></mstyle></mrow><annotation encoding="application/x-tex">\small n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3875em;"></span><span class="mord mathnormal sizing reset-size6 size5">n</span></span></span></span></span><span>﻿</span></span></p><p id="1362e7d3-01e5-808c-a692-c8bd572843e1" class=""><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>α</mi></mstyle></mrow><annotation encoding="application/x-tex">\small \alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3875em;"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.0037em;">α</span></span></span></span></span><span>﻿</span></span> — <strong>random jump factor</strong> (<link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mn>1</mn><mo>−</mo><mi>α</mi></mstyle></mrow><annotation encoding="application/x-tex">\small 1-\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.655em;vertical-align:-0.075em;"></span><span class="mord sizing reset-size6 size5">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin sizing reset-size6 size5">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.3875em;"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.0037em;">α</span></span></span></span></span><span>﻿</span></span> is the <strong>damping factor</strong>)</p><ul id="15b2e7d3-01e5-800f-9ee1-c56710032af5" class="bulleted-list"><li style="list-style-type:disc">probability <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="#df0030"><mi>α</mi></mstyle></mrow><annotation encoding="application/x-tex">\red{α}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;color:#df0030;">α</span></span></span></span></span><span>﻿</span></span> the random surfer executes a random jump, and with probability <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="#6495ed"><mn>1</mn><mo>−</mo><mi>α</mi></mstyle></mrow><annotation encoding="application/x-tex">\blue{1 − α}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord" style="color:#6495ed;">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin" style="color:#6495ed;">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;color:#6495ed;">α</span></span></span></span></span><span>﻿</span></span> the random surfer follows a hyperlink.</li></ul><p id="1362e7d3-01e5-808c-83bb-d6714aae6739" class=""><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>C</mi><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">\small C(m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9em;vertical-align:-0.225em;"></span><span class="mord mathnormal sizing reset-size6 size5" style="margin-right:0.07153em;">C</span><span class="mopen sizing reset-size6 size5">(</span><span class="mord mathnormal sizing reset-size6 size5">m</span><span class="mclose sizing reset-size6 size5">)</span></span></span></span></span><span>﻿</span></span> — out degree of of node <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mi>m</mi></mstyle></mrow><annotation encoding="application/x-tex">\small m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3875em;"></span><span class="mord mathnormal sizing reset-size6 size5">m</span></span></span></span></span><span>﻿</span></span></p></div></p><hr id="1362e7d3-01e5-80b2-bc51-d692e95106a9"/><p id="1362e7d3-01e5-8035-8a5e-cff484ef3046" class=""><strong>Intuition </strong></p><p id="1362e7d3-01e5-8077-9598-f464ded89a5f" class="">PageRank “contributions” from: <div class="indented"><ol type="1" id="1362e7d3-01e5-8058-b38f-d3fecff96b7d" class="numbered-list" start="1"><li><mark class="highlight-red">Random jump</mark><ul id="1362e7d3-01e5-8028-8cc6-e3605c5c6992" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="0.9em"><mfrac><mn>1</mn><mrow><mi mathvariant="normal">∣</mi><mi>G</mi><mi mathvariant="normal">∣</mi></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">\small\frac{1}{|G|}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2018em;vertical-align:-0.4605em;"></span><span class="mord sizing reset-size6 size5"><span class="mopen nulldelimiter sizing reset-size5 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8236em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size5 size2 mtight"><span class="mord mtight"><span class="mord mtight">∣</span><span class="mord mathnormal mtight">G</span><span class="mord mtight">∣</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size5 size2 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5117em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size5 size6"></span></span></span></span></span></span><span>﻿</span></span> chance of landing at any particular page</li></ul></li></ol><ol type="1" id="1362e7d3-01e5-801a-a6ec-c504e3ece121" class="numbered-list" start="2"><li><mark class="highlight-blue">All pages that link to it, </mark><mark class="highlight-blue"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span><span>﻿</span></span></mark><ul id="1362e7d3-01e5-8003-8200-d1fb9ac27c01" class="bulleted-list"><li style="list-style-type:disc">The probability of being at <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span><span>﻿</span></span> is <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span></span><span>﻿</span></span></li></ul><ul id="1362e7d3-01e5-8012-bfee-d1b54180cede" class="bulleted-list"><li style="list-style-type:disc">We will arrive at <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span><span>﻿</span></span> with probability <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mrow><mi>C</mi><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{C(m)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3651em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">m</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><span>﻿</span></span></li></ul></li></ol></div></p><ul id="15b2e7d3-01e5-809a-aab7-d9d82437abdf" class="bulleted-list"><li style="list-style-type:disc">⇒ Pages that tend to have high rank are: <ul id="15b2e7d3-01e5-80e5-aa36-fe4022975a17" class="bulleted-list"><li style="list-style-type:circle">High <span style="border-bottom:0.05em solid">in-degree</span></li></ul><ul id="15b2e7d3-01e5-801e-888d-f27366a20dd6" class="bulleted-list"><li style="list-style-type:circle">Linked by other pages with high rank</li></ul></li></ul></div></figure><h2 id="1362e7d3-01e5-803f-a499-e73d4965e6e1" class="">PageRank Algorithm </h2><ul id="1362e7d3-01e5-80e8-84f1-d63a72bfc79f" class="bulleted-list"><li style="list-style-type:disc">PageRank’s recursive defintition ⇒ iterative algorithm</li></ul><ul id="1362e7d3-01e5-8098-bcb4-fcc67a560766" class="bulleted-list"><li style="list-style-type:disc">Similar to P-BFS</li></ul><p id="1362e7d3-01e5-8005-b578-f780f14f0505" class="">Idea: <div class="indented"><p id="1362e7d3-01e5-80c5-81ab-d006fa24a38a" class="">Init:</p><ul id="1362e7d3-01e5-80b3-b9a5-ec3846365e63" class="bulleted-list"><li style="list-style-type:disc">Uniform distribution of PageRank values across nodes.</li></ul><p id="1362e7d3-01e5-804f-b81f-d4067b4709f5" class="">Iterate (until PageRank values don’t change anymore): </p><ul id="15b2e7d3-01e5-802d-b1e1-f8ba7bde56f9" class="bulleted-list"><li style="list-style-type:disc">For each node: Distribute PageRank “mass” to neighbours. </li></ul><ul id="1362e7d3-01e5-8069-b610-fb0d9357ec93" class="bulleted-list"><li style="list-style-type:disc">For each node: Sum up contributions ⇒ updated PageRank score </li></ul></div></p><ul id="1362e7d3-01e5-80cd-a68f-ca682d6155b3" class="toggle"><li><details open=""><summary><mark class="highlight-purple">Example — PageRank iterations</mark></summary><figure id="1362e7d3-01e5-8006-ad15-e0736ddb0b2c" class="image"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-06_at_11.34.27.png"><img style="width:432px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-06_at_11.34.27.png"/></a><figcaption>Before (left) and after (right) each iteration. <strong>PageRank</strong> <strong>mass</strong> is passed to each neighbour. We ignore the random jump factor for now (i.e., α = 0)</figcaption></figure></details></li></ul><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1362e7d3-01e5-806d-91bf-c7fd574a0b8c"><div style="font-size:1.5em"><img class="icon" src="https://www.notion.so/icons/exclamation-mark_gray.svg"/></div><div style="width:100%"><p id="1362e7d3-01e5-80e2-b7c5-c76447463f15" class=""><strong>(without dangling nodes) Probability Mass Is Preserved</strong></p><p id="30da5812-230d-4f50-9064-2655c6159ec0" class="">At the beginning of each iteration, the PageRank values of all nodes sum to <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span>﻿</span></span>. PageRank mass is preserved by the algorithm, guaranteeing that we continue to have a valid probability distribution at the end of each iteration.</p></div></figure><details open=""><summary style="font-weight:600;font-size:1.25em;line-height:1.3;margin:0"><strong>Simplified PageRank — MapReduce </strong></summary><div class="indented"><ul id="1362e7d3-01e5-805e-9abf-cb4362f5544d" class="bulleted-list"><li style="list-style-type:disc">not handle dangling nodes and the random jump factor.</li></ul><ul id="1362e7d3-01e5-806e-90ae-fded34148102" class="bulleted-list"><li style="list-style-type:disc">Each MR job = 1 iteration</li></ul><ul id="1362e7d3-01e5-8096-950c-fc18a78bfcfa" class="bulleted-list"><li style="list-style-type:disc">As long as we begin with sum = 1, the sum of updated PageRank values should sum to 1. </li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1362e7d3-01e5-8056-aa59-c573e9061659" class="code"><code class="language-Python">class Mapper:
	&#x27;&#x27;&#x27; Evenly divide each node’s PageRank mass and pass each piece along outgoing edges to neighbours.&#x27;&#x27;&#x27;
	def Map(nid n, Node N):
			p = N.PageRank/|N.AdjList|  # How much mass to send to neighbors
			emit(nid, N)                # Pass along structure to reducer
			for mid in N.AdjList:       # Pass mass along outgoing edges
					emit(mid, p)

&#x27;&#x27;&#x27;
Shuffle &amp; Sort Phase:
- groups mass values by destination node
&#x27;&#x27;&#x27;

class Reduce:
	&#x27;&#x27;&#x27;PageRank contributions are summed up at each destination node. &#x27;&#x27;&#x27;
	def Reduce(nid, mass: list[float]):
			N = None
			sum = 0
			for p in mass:
					if isNode(p):
							N = p
					else:
							sum += p
			N.pageRank = sum     # Updated PageRank value (overwrite)
			emit(nid, N)       </code></pre><ul id="1362e7d3-01e5-8085-ae2b-eba670a9b992" class="toggle"><li><details open=""><summary><mark class="highlight-purple">Example</mark> </summary><figure id="1362e7d3-01e5-8070-a286-f49675af8b8d" class="image" style="text-align:center"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-06_at_11.34.27.png"><img style="width:288px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-06_at_11.34.27.png"/></a></figure><figure id="1362e7d3-01e5-809e-b987-d12b3799edcd" class="image" style="text-align:center"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-06_at_12.13.22.png"><img style="width:384px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-06_at_12.13.22.png"/></a></figure></details></li></ul></div></details><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="15b2e7d3-01e5-801a-a62a-cf227831b1d5"><div style="font-size:1.5em"><img class="icon" src="https://www.notion.so/icons/exclamation-mark_gray.svg"/></div><div style="width:100%"><p id="41a2223b-4370-47c3-9eef-bf0dafb36e76" class=""><mark class="highlight-red"><strong>With Dangling Nodes, Probability Mass IS NOT conserved</strong></mark></p><p id="15b2e7d3-01e5-8037-8725-ec5ec0272fa0" class="">No mass will be emitted when a dangling node is encountered (since no outgoing edges). The probability mass is “<strong>lost” </strong>at these nodes. So Probability mass will not be conserved.</p></div></figure><h3 id="1362e7d3-01e5-80b8-bb6a-cb4421a579b9" class=""><strong>Handling Dangling Nodes </strong></h3><ul id="15b2e7d3-01e5-8085-899c-d35484f857be" class="bulleted-list"><li style="list-style-type:disc">Uniformly re-distribute all “lost mass”</li></ul><ul id="1362e7d3-01e5-80b0-aa8d-c8c946264421" class="bulleted-list"><li style="list-style-type:disc">First, find how much lost-mass. Options: <ul id="1362e7d3-01e5-805c-83b5-c4a2426d9f5c" class="toggle"><li><details open=""><summary><strong>Solution 1</strong> (Counters)</summary><ul id="1362e7d3-01e5-8066-b0bb-e04dcc9e27e1" class="bulleted-list"><li style="list-style-type:disc">Whenever the mapper processes a node with an empty adjacency list, keep track of the node’s PageRank value in a <strong>counter</strong>.</li></ul><ul id="1362e7d3-01e5-8036-b2fb-f29e540cdbe9" class="bulleted-list"><li style="list-style-type:disc">At the end of the iteration, we can access the counter to find out how much PageRank mass was lost. </li></ul></details></li></ul><ul id="1362e7d3-01e5-80a7-883a-c1e495d6c8bb" class="toggle"><li><details open=""><summary><strong>Solution 2 </strong>(”Everybody” Key)</summary><ul id="1362e7d3-01e5-808a-ac58-d035c559a5f8" class="bulleted-list"><li style="list-style-type:disc">When the mapper encounters a dangling node, its PageRank mass is emitted with the special key. </li></ul><ul id="1362e7d3-01e5-8011-b715-cafd9f42539b" class="bulleted-list"><li style="list-style-type:disc">The reducer must be modified to contain special logic for handling the missing PageRank mass.</li></ul></details></li></ul><ul id="1362e7d3-01e5-801a-b29a-c981138a86ab" class="toggle"><li><details open=""><summary><strong>Solution 3</strong> (In-Mapper Combiner)</summary><ul id="1362e7d3-01e5-8093-91ae-da41bfcbd046" class="bulleted-list"><li style="list-style-type:disc">Write out the missing PageRank mass as “side data” for each map task (using the in-mapper combining technique for aggregation).  </li></ul><ul id="1362e7d3-01e5-80ce-a632-f646afb05a14" class="bulleted-list"><li style="list-style-type:disc">A final pass in the driver program is needed to sum the mass across all map tasks.</li></ul></details></li></ul></li></ul><ul id="1362e7d3-01e5-80a4-92c0-cf642cdb786b" class="bulleted-list"><li style="list-style-type:disc">Then, map over all nodes to redistribute</li></ul><h3 id="1362e7d3-01e5-809d-8142-eafa73a52c38" class=""><strong>Random Jumps</strong></h3><p id="15b2e7d3-01e5-8066-9a4b-d5f9fdd79215" class="">Add the <mark class="highlight-red">jump factor contribution</mark>, and the PageRank mass from link traversal (<link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="#6495ed"><mi>p</mi></mstyle></mrow><annotation encoding="application/x-tex">\blue p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="color:#6495ed;">p</span></span></span></span></span><span>﻿</span></span>, computed from before) to the share of the lost PageRank mass, <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="#6495ed"><mi>m</mi></mstyle></mrow><annotation encoding="application/x-tex">\blue m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="color:#6495ed;">m</span></span></span></span></span><span>﻿</span></span>, that is distributed to each node, <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="#6495ed"><mfrac><mi>m</mi><mrow><mi mathvariant="normal">∣</mi><mi>G</mi><mi mathvariant="normal">∣</mi></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">\blue{\frac{m}{|G|}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2154em;vertical-align:-0.52em;"></span><span class="mord" style="color:#6495ed;"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight" style="color:#6495ed;"><span class="mord mtight" style="color:#6495ed;"><span class="mord mtight" style="color:#6495ed;">∣</span><span class="mord mathnormal mtight" style="color:#6495ed;">G</span><span class="mord mtight" style="color:#6495ed;">∣</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="color:#6495ed;border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight" style="color:#6495ed;"><span class="mord mtight" style="color:#6495ed;"><span class="mord mathnormal mtight" style="color:#6495ed;">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><span>﻿</span></span>. </p><figure id="1362e7d3-01e5-80c5-8b27-e0d8c6377b3d" class="equation"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>p</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>=</mo><mstyle mathcolor="#df0030"><mi>α</mi><mrow><mo fence="true">(</mo><mfrac><mn>1</mn><mrow><mi mathvariant="normal">∣</mi><mi>G</mi><mi mathvariant="normal">∣</mi></mrow></mfrac><mo fence="true">)</mo></mrow></mstyle><mo>+</mo><mstyle mathcolor="#6495ed"><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>α</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mfrac><mi>m</mi><mrow><mi mathvariant="normal">∣</mi><mi>G</mi><mi mathvariant="normal">∣</mi></mrow></mfrac><mo>+</mo><mi>p</mi><mo stretchy="false">)</mo></mstyle></mrow><annotation encoding="application/x-tex">p&#x27;=
\red{
\alpha
\left( \frac{1}{|G|} \right)
}
+
\blue{
(1-\alpha)
(\frac{m}{|G|}+p)
}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9963em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;color:#df0030;">α</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner" style="color:#df0030;"><span class="mopen delimcenter" style="color:#df0030;top:0em;"><span class="delimsizing size3" style="color:#df0030;"><span style="color:#df0030;">(</span></span></span><span class="mord" style="color:#df0030;"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:#df0030;"><span class="mord" style="color:#df0030;">∣</span><span class="mord mathnormal" style="color:#df0030;">G</span><span class="mord" style="color:#df0030;">∣</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="color:#df0030;border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:#df0030;"><span class="mord" style="color:#df0030;">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="color:#df0030;top:0em;"><span class="delimsizing size3" style="color:#df0030;"><span style="color:#df0030;">)</span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen" style="color:#6495ed;">(</span><span class="mord" style="color:#6495ed;">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin" style="color:#6495ed;">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.0436em;vertical-align:-0.936em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;color:#6495ed;">α</span><span class="mclose" style="color:#6495ed;">)</span><span class="mopen" style="color:#6495ed;">(</span><span class="mord" style="color:#6495ed;"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:#6495ed;"><span class="mord" style="color:#6495ed;">∣</span><span class="mord mathnormal" style="color:#6495ed;">G</span><span class="mord" style="color:#6495ed;">∣</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="color:#6495ed;border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="color:#6495ed;"><span class="mord mathnormal" style="color:#6495ed;">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin" style="color:#6495ed;">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="color:#6495ed;">p</span><span class="mclose" style="color:#6495ed;">)</span></span></span></span></span></div></figure><h3 id="1362e7d3-01e5-80a4-8c6a-c3b5b2838544" class="">Updated Algorithm </h3><p id="15b2e7d3-01e5-805e-9b71-d24cc890fd2c" class="">At end of each iteration: PageRank sums to <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span>﻿</span></span> ⇒ valid probability distribution.</p><p id="1362e7d3-01e5-802d-8e90-e565edb381e2" class=""><strong>Iteration: </strong><div class="indented"><p id="1362e7d3-01e5-8095-8d2d-c1a5fffbe263" class="">Requires <strong>2 Jobs</strong> (1 map, no reducers)</p><ol type="1" id="1362e7d3-01e5-8093-bb6e-fd675abe9542" class="numbered-list" start="1"><li>Distribute PageRank mass along graph edges</li></ol><ol type="1" id="1362e7d3-01e5-8017-be9a-f5e6f691ce3b" class="numbered-list" start="2"><li>Take care of lost mass (at dangling nodes) and random jump factor</li></ol></div></p><p id="1362e7d3-01e5-808a-b637-cfca61874727" class=""><strong>Stopping Condition: </strong></p><ul id="1362e7d3-01e5-8062-a022-fb1fd499c3c1" class="bulleted-list"><li style="list-style-type:disc">Iterate until convergence (PageRank values of nodes no longer change).</li></ul><p id="15b2e7d3-01e5-80f9-8a36-cb25a7d3fdf4" class="">
</p><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1362e7d3-01e5-80ee-8c87-dd99d681df81"><div style="font-size:1.5em"><img class="icon" src="https://www.notion.so/icons/question-mark_gray.svg"/></div><div style="width:100%"><p id="75c981d8-4649-4768-b0d8-7d448a52def9" class=""><strong>Issues with Graph Processing</strong></p><p id="1362e7d3-01e5-80a0-aeb6-cf2002a18fa7" class="">In MapReduce, passing information is only possible within the local graph structure.<div class="indented"><ul id="1362e7d3-01e5-8000-8068-d79a5353df81" class="bulleted-list"><li style="list-style-type:disc">MapReduce can’t maintain a global data structure in memory for fast, random access. </li></ul><ul id="1362e7d3-01e5-800e-8e81-f29c7b694e2e" class="bulleted-list"><li style="list-style-type:disc">Since the most natural representation of large sparse graphs is with adjacency lists, communication can only occur from a node to the nodes it links to, or to a node from nodes linked to it</li></ul><ul id="1362e7d3-01e5-8040-ae3c-e45235ea00c8" class="bulleted-list"><li style="list-style-type:disc">⇒ In MapReduce: local computation is performed on each node, the results of which are “passed” to its neighbors. With multiple iterations, convergence on the global graph is possible</li></ul></div></p><p id="1362e7d3-01e5-802d-8074-c03d3a1d5c60" class="">⇒ MapReduce algorithms are often impractical on large, dense graphs.<div class="indented"><ul id="1362e7d3-01e5-8079-9678-dd81865b5a63" class="bulleted-list"><li style="list-style-type:disc">The amount of intermediate data generated is on the order of the number of edges, which explains why all the algorithms we have discussed assume <strong>sparse graphs</strong>.</li></ul><ul id="1362e7d3-01e5-8092-89a1-f89af2ae94b6" class="bulleted-list"><li style="list-style-type:disc">For <strong>dense graphs</strong>, MapReduce running time would be dominated by copying intermediate data across the network, which in the worst case is <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span><span>﻿</span></span> in the # of nodes. </li></ul></div></p><p id="1362e7d3-01e5-8027-b831-f13958c200fc" class="">⇒ <strong>Combiners</strong> and the <strong>in-mapper combining pattern</strong> described can be used to decrease the running time of graph iterations.</p><ul id="1362e7d3-01e5-801a-b3f3-e387672d2535" class="bulleted-list"><li style="list-style-type:disc">straightforward to use combiners for both P-BFS and PageRank since Min and sum, used in the two algorithms, respectively, are both associative and commutative. </li></ul><ul id="1362e7d3-01e5-8032-9d0b-fcf1a6640f9c" class="bulleted-list"><li style="list-style-type:disc">However, combiners are only effective to the extent that there are opportunities for partial aggregation—unless there are nodes pointed to by multiple nodes being processed by an individual map task, com- biners are not very useful. </li></ul><ul id="1362e7d3-01e5-8039-8666-e3657a231ba3" class="bulleted-list"><li style="list-style-type:disc">⇒ it would be desirable to partition large graphs into smaller components where there are many intra-component links and fewer inter-component links. This way, we can arrange the data such that nodes in the same component are handled by the same map task—thus maximizing opportunities for combiners to perform local aggregation.</li></ul><p id="1362e7d3-01e5-80f6-810f-f080aa2a67dc" class="">⇒ But the graph may be so large that we can’t partition it except with MapReduce algorithms. </p><ul id="1362e7d3-01e5-80f7-a1bc-d710743edb72" class="bulleted-list"><li style="list-style-type:disc">Ex. Solution — Resorting records using MapReduce: partition the web graph by the language of the page (since pages in one language tend to link mostly to other pages in that language)</li></ul><p id="1362e7d3-01e5-80d6-a400-f53f2ee48803" class="">When implementing graph algorithms that estimate probability distributions over nodes, for large graphs, the probability of any particular node is often so small that it underflows standard floating point representations</p><ul id="1362e7d3-01e5-80a9-857d-c7c1bdce6840" class="bulleted-list"><li style="list-style-type:disc">solution: use <strong>log probabilities </strong></li></ul><ul id="1362e7d3-01e5-80e1-a61d-d944b2c68ffe" class="bulleted-list"><li style="list-style-type:disc">⇒  the product of two values is simply their sum</li></ul><ul id="1362e7d3-01e5-80d5-beea-cdaa3573a914" class="bulleted-list"><li style="list-style-type:disc">However, addition of probabilities is also necessary, for example, when summing PageRank contribution for a node. This can be implemented with reasonable precision as follows:<figure id="1362e7d3-01e5-8028-aa3e-fc808ca924d6" class="image" style="text-align:center"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-06_at_12.38.44.png"><img style="width:336px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-06_at_12.38.44.png"/></a></figure></li></ul></div></figure><h2 id="1362e7d3-01e5-80d4-b7e3-cfdf5704bbc3" class="">Spam Farming </h2><h3 id="1362e7d3-01e5-802f-b3c0-dd49017357e9" class="">What is it?</h3><ul id="1362e7d3-01e5-80a9-8c4b-d43c23d349c7" class="bulleted-list"><li style="list-style-type:disc">Purposefully creating a <strong>spider trap</strong> to artificially boost the rank of a target page. </li></ul><ul id="15b2e7d3-01e5-80cd-94b4-ce265eec50b9" class="bulleted-list"><li style="list-style-type:disc">Generate thousands of low-value &quot;<strong>farm pages”, </strong>each links to the <strong>target page</strong>. Since these farm pages have no outbound links (dead ends), they act as <strong>traps</strong> that accumulate PageRank through random jumps and direct it back to the target page, boosting its rank artificially.</li></ul><h3 id="1362e7d3-01e5-8060-81fb-fba0de507df0" class="">Solutions </h3><ul id="1362e7d3-01e5-8017-880d-dbc58fa5e70e" class="bulleted-list"><li style="list-style-type:disc"><strong>Personalized PageRank (TrustRank)</strong>: only allowing &quot;trusted&quot; or verified pages to serve as <strong>source nodes</strong> for rank distribution. spam pages rarely receive links from trustworthy pages ⇒ less likely to accumulate mass. </li></ul><h2 id="1362e7d3-01e5-8054-9e1b-f5bdc1b5bbb7" class="">Personalized-PageRank  &amp; TrustRank</h2><ul id="1362e7d3-01e5-8051-8e60-df6d53dd74f2" class="bulleted-list"><li style="list-style-type:disc"><strong>Personalized PageRank</strong>: random jumps are limited to a subset — <strong>source pages</strong>. </li></ul><ul id="1362e7d3-01e5-8052-a335-f9efe383c1db" class="bulleted-list"><li style="list-style-type:disc"><strong>TrustRank</strong>: <ul id="15b2e7d3-01e5-8058-b86b-d8e020bc0978" class="bulleted-list"><li style="list-style-type:circle">focused on fighting spam. </li></ul><ul id="15b2e7d3-01e5-8094-a7a8-f65dcc760923" class="bulleted-list"><li style="list-style-type:circle">source pages = trustworthy pages (handpicked)</li></ul><ul id="15b2e7d3-01e5-8051-bf34-fdd9580033df" class="bulleted-list"><li style="list-style-type:circle">e.g. rank =(is now) trust</li></ul></li></ul><ul id="1362e7d3-01e5-8077-877c-f8d9a12fffb6" class="bulleted-list"><li style="list-style-type:disc"><strong>Bootstrapping TrustRank</strong> is the method used to initialize TrustRank by expanding from a trusted seed set, essential for calculating TrustRank in practice.</li></ul><ul id="1362e7d3-01e5-80e1-83e2-fcbd9cc01506" class="bulleted-list"><li style="list-style-type:disc"><strong>Spam Mass: </strong>serves as a filter on the results from PageRank and TrustRank, identifying pages with high PageRank scores that do not deserve high visibility due to low trust.</li></ul><h1 id="1342e7d3-01e5-80cc-8152-f35e43ce655d" class="">OTHER LECTURE NOTES</h1><p id="15b2e7d3-01e5-805f-8c6e-ca6d29024297" class="">Goes into more (possibly too much) detail. </p><h3 id="1342e7d3-01e5-8003-8bcd-c1d7c98d9e24" class=""><strong>Flow</strong></h3><ul id="1342e7d3-01e5-8055-b6f1-ee063c91096d" class="bulleted-list"><li style="list-style-type:disc">In-Links = <strong>votes</strong><ul id="1342e7d3-01e5-809a-a827-e0b31f82ff3a" class="bulleted-list"><li style="list-style-type:circle">More votes ⇒ more important</li></ul></li></ul><ul id="1342e7d3-01e5-80f7-ab6a-e44fe9ace004" class="bulleted-list"><li style="list-style-type:disc"><strong>Importance</strong> = sum of importances for every vote<ul id="1342e7d3-01e5-80ae-84b9-f9471c1cb6da" class="bulleted-list"><li style="list-style-type:circle">Links from important pages count more (not just in-degree)</li></ul><ul id="1342e7d3-01e5-806b-b066-e4f48235dc8d" class="bulleted-list"><li style="list-style-type:circle">this is now a recursive computation (iteration)</li></ul></li></ul><figure id="1342e7d3-01e5-800f-89fc-da047d3969da" class="image"><a href="05%20%E2%80%94%20Graphs/ec08851e-1df3-4e28-9656-7f9529d22401.png"><img style="width:288px" src="05%20%E2%80%94%20Graphs/ec08851e-1df3-4e28-9656-7f9529d22401.png"/></a></figure><h3 id="1342e7d3-01e5-803b-9360-c51d49ae64ed" class=""><strong>Rank/Importance (Flow model): </strong></h3><ul id="1342e7d3-01e5-80da-811d-d0f09049d77a" class="bulleted-list"><li style="list-style-type:disc">If a page has importance is <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span><span>﻿</span></span>, it sends <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi mathvariant="normal">/</mi><mi>n</mi></mrow><annotation encoding="application/x-tex"> i/n </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">i</span><span class="mord">/</span><span class="mord mathnormal">n</span></span></span></span></span><span>﻿</span></span> to each of its <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span><span>﻿</span></span> out-neighbours. </li></ul><ul id="1342e7d3-01e5-8071-b98d-c4e1d18ff5f4" class="bulleted-list"><li style="list-style-type:disc">Importance of page <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span><span>﻿</span></span>: sum of the votes on its in-links </li></ul><figure id="1342e7d3-01e5-80ad-a491-c181f15d86da" class="equation"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>r</mi><mi>j</mi></msub><mo>=</mo><munder><mo>∑</mo><mrow><mi>i</mi><mo>→</mo><mi>j</mi></mrow></munder><mfrac><msub><mi>r</mi><mi>i</mi></msub><msub><mi>d</mi><mi>i</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">r_j = \sum_{i \rarr j} \frac{r_i}{d_i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.5213em;vertical-align:-1.4138em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">→</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure><ul id="1342e7d3-01e5-8085-8c60-e137b6a61863" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">r_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> : rank of page <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span><span>﻿</span></span></li></ul><ul id="1342e7d3-01e5-8004-ad51-cb42bfdfa603" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">d_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> : out degree of node <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span><span>﻿</span></span> </li></ul><figure id="1342e7d3-01e5-80ae-a560-f5a1ed2568ee" class="image"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_14.52.05.png"><img style="width:240px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_14.52.05.png"/></a></figure><figure id="1342e7d3-01e5-802a-a91f-ff6623dc62e2" class="image"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_14.56.55.png"><img style="width:144px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_14.56.55.png"/></a></figure><p id="1342e7d3-01e5-805a-8167-c6e9f49cbbaa" class="">Problem: </p><ul id="1342e7d3-01e5-8056-bb62-f8d512705e71" class="bulleted-list"><li style="list-style-type:disc">3 equations, 3 unknowns ⇒ multiple solutions. </li></ul><p id="1342e7d3-01e5-80e2-8333-f8f09abc9732" class="">Solution (works for small graph):</p><ul id="1342e7d3-01e5-804e-9c03-e043ccc588a0" class="bulleted-list"><li style="list-style-type:disc">Force a constraint</li></ul><ul id="1342e7d3-01e5-805e-b5a7-fa87d18a7847" class="bulleted-list"><li style="list-style-type:disc">e.g. <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>y</mi></msub><mo>+</mo><msub><mi>r</mi><mi>a</mi></msub><mo>+</mo><msub><mi>r</mi><mi>m</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">r_y+r_a+r_m=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span>﻿</span></span>, ⇒ <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>y</mi></msub><mo>=</mo><mfrac><mn>2</mn><mn>5</mn></mfrac><mo separator="true">,</mo><msub><mi>r</mi><mi>a</mi></msub><mo>=</mo><mfrac><mn>2</mn><mn>5</mn></mfrac><mo separator="true">,</mo><msub><mi>r</mi><mi>m</mi></msub><mo>=</mo><mfrac><mn>1</mn><mn>5</mn></mfrac></mrow><annotation encoding="application/x-tex">r_y=\frac{2}{5},
r_a=\frac{2}{5},
r_m=\frac{1}{5}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><span>﻿</span></span></li></ul><p id="1342e7d3-01e5-8045-8bce-d3bb427b6aca" class="">Solution (in general): </p><ul id="1342e7d3-01e5-807a-aecd-cd69a1c6329f" class="bulleted-list"><li style="list-style-type:disc">For a large # vertices, need to parallelize the problem</li></ul><ul id="1342e7d3-01e5-802e-b723-d93750712c5f" class="bulleted-list"><li style="list-style-type:disc">We can reduce it to another problem (matrices). </li></ul><h3 id="1342e7d3-01e5-80f3-a93b-fc4ef88051ff" class="">Matrix Formulation  </h3><p id="1342e7d3-01e5-80ab-9239-e85f7c9a46fe" class="">Each vertex depends only on current state of neighbours. Thus, send each neighbour current rank, multiply, sum and retrieve new value. This is parallel, so we can use map-reduce </p><p id="1342e7d3-01e5-8099-8579-e6a2e34f6e38" class="">
</p><p id="1342e7d3-01e5-80d1-82fc-db690e3e547a" class=""><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>M</mi><mrow><mi>j</mi><mi>i</mi></mrow></msub><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mfrac><mn>1</mn><msub><mi>d</mi><mi>i</mi></msub></mfrac></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><mi>i</mi><mo>→</mo><mi>j</mi></mstyle></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>else </mtext></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">M_{ji}=

\begin{cases}
\frac{1}{d_i} &amp; \text{if $i\rarr j$}
\\
0 &amp; \text{else }
\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ji</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6966em;"><span style="top:-3.6966em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4451em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-2.2435em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.1965em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6966em;"><span style="top:-3.6966em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-2.2435em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">else </span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.1965em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><span>﻿</span></span></p><ul id="1342e7d3-01e5-80f4-95ea-c348755d212b" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">d_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> : out-degree, page <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span><span>﻿</span></span> </li></ul><ul id="1342e7d3-01e5-8001-85fe-f58ff7c44258" class="bulleted-list"><li style="list-style-type:disc">Columns sum to 1</li></ul><p id="1342e7d3-01e5-8042-b1ee-f4ee0b29e090" class=""><strong>Solve For Page rank </strong></p><ul id="1342e7d3-01e5-80ba-9725-d879c27d9ddc" class="bulleted-list"><li style="list-style-type:disc">Initial guess: make all equal, e.g. <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>j</mi></msub><mo>=</mo><mfrac><mn>1</mn><mi>N</mi></mfrac></mrow><annotation encoding="application/x-tex">r_j=\frac{1}{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><span>﻿</span></span></li></ul><ul id="1342e7d3-01e5-8069-be40-dc2b90a4daa0" class="bulleted-list"><li style="list-style-type:disc">Iteration: <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>r</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>=</mo><mi>r</mi><mo>⋅</mo><mi>M</mi></mrow><annotation encoding="application/x-tex">r&#x27;=r\cdot M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></span><span>﻿</span></span>, or <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>j</mi></msub><mo>=</mo><msub><mo>∑</mo><mrow><mi>i</mi><mo>→</mo><mi>j</mi></mrow></msub><mfrac><msub><mi>r</mi><mi>i</mi></msub><msub><mi>d</mi><mi>i</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">r_j= \sum_{i\rarr j} \frac{r_i}{d_i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1951em;vertical-align:-0.4451em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.162em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">→</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7115em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0278em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4451em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><span>﻿</span></span><figure id="1342e7d3-01e5-8099-83cb-c7a6d22377ef" class="image" style="text-align:center"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_15.15.04.png"><img style="width:144px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_15.15.04.png"/></a></figure></li></ul><ul id="1342e7d3-01e5-8011-9475-c60c051629f4" class="toggle"><li><details open=""><summary>Example</summary><figure id="1342e7d3-01e5-80cb-a661-ffcfcf51e733" class="image"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_15.06.34.png"><img style="width:336px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_15.06.34.png"/></a></figure><figure id="1342e7d3-01e5-8095-8ce1-f2fe50ad3a0e" class="image"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_15.09.40.png"><img style="width:384px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_15.09.40.png"/></a></figure></details></li></ul><figure class="block-color-default_background callout" style="white-space:pre-wrap;display:flex" id="1342e7d3-01e5-8041-a86e-cc93a5f2c8ec"><div style="font-size:1.5em"><img class="icon" src="https://www.notion.so/icons/question-mark_gray.svg"/></div><div style="width:100%"><p id="561f5fba-d5ee-4179-9f6d-5003c949baf3" class=""><strong>Equivalent to a Random Walk</strong></p><hr id="1342e7d3-01e5-8024-afc7-f00986846717"/><ul id="1342e7d3-01e5-8031-b00e-e4bca0e1596f" class="bulleted-list"><li style="list-style-type:disc">Random web surfer: <ul id="1342e7d3-01e5-80e4-a828-fda0678ced60" class="bulleted-list"><li style="list-style-type:circle">at any time <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span></span><span>﻿</span></span>, surfer is on some page <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span><span>﻿</span></span> </li></ul><ul id="1342e7d3-01e5-8074-967f-f60a2a805e25" class="bulleted-list"><li style="list-style-type:circle">At time <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">t+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6984em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span><span>﻿</span></span>, they take a random out-link from <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span><span>﻿</span></span> to <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span><span>﻿</span></span>. </li></ul></li></ul><ul id="1342e7d3-01e5-80bf-8233-d6d4b58e2dbe" class="bulleted-list"><li style="list-style-type:disc">Each column in <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></span><span>﻿</span></span> represents a prob dist (sums to 1). <ul id="1342e7d3-01e5-8013-bc7e-cf214eb00afe" class="bulleted-list"><li style="list-style-type:circle">At start, all same rank ⇒ says lets start on 1 random page</li></ul><ul id="1342e7d3-01e5-8006-ac2d-e2fd181e6c4d" class="bulleted-list"><li style="list-style-type:circle">Then we repetitively pick random links, and go on. </li></ul><ul id="1342e7d3-01e5-80cf-afb1-efb80b331dc8" class="bulleted-list"><li style="list-style-type:circle">P(on page j) = P(on page <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span><span>﻿</span></span> before it) + <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><msub><mi>d</mi><mi>i</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{d_i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2902em;vertical-align:-0.4451em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4451em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><span>﻿</span></span></li></ul></li></ul><ul id="1342e7d3-01e5-8067-8dce-d2cb08371d5b" class="bulleted-list"><li style="list-style-type:disc">Let <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo></mrow><annotation encoding="application/x-tex">p(t)=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span></span></span></span></span><span>﻿</span></span> distribution over pages; vector whose <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>i</mi><mrow><mi>t</mi><mi>h</mi></mrow></msup></mrow><annotation encoding="application/x-tex">i^{th}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> coordinate is the probability that the surfer is at page <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span><span>﻿</span></span> at time <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span></span><span>﻿</span></span>.<ul id="1342e7d3-01e5-802e-ba5f-c63d4d606598" class="bulleted-list"><li style="list-style-type:circle"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>t</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mi>M</mi><mo>⋅</mo><mi>p</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(t+1)=M \cdot p(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span><span>﻿</span></span></li></ul><ul id="1342e7d3-01e5-8059-892b-d4438f8ceee3" class="bulleted-list"><li style="list-style-type:circle">if the random walk reaches a state where: <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>t</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mi>p</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(t+1)=p(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span><span>﻿</span></span>, then <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span><span>﻿</span></span> is a stationary distribution <em><mark class="highlight-gray">(A random-step result in the same distribution as before)</mark></em></li></ul></li></ul><figure id="1342e7d3-01e5-8024-b64d-fc0ea1f9e1ee" class="equation"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>r</mi><mi>j</mi><mrow><mo stretchy="false">(</mo><mi>t</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msubsup><mo>=</mo><munder><mo>∑</mo><mrow><mi>i</mi><mo>→</mo><mi>j</mi></mrow></munder><mfrac><msubsup><mi>r</mi><mi>i</mi><mrow><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow></msubsup><msub><mi>d</mi><mi>i</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">r_j^{(t+1)}= \sum_{i\rarr j} \frac{r_i^{(t)}}{d_i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4578em;vertical-align:-0.413em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.4231em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.413em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.1356em;vertical-align:-1.4138em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">→</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7218em;"><span style="top:-2.3588em;"><span class="pstrut" style="height:3.0448em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.2748em;"><span class="pstrut" style="height:3.0448em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.7218em;"><span class="pstrut" style="height:3.0448em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.4231em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">t</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2769em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure></div></figure><p id="1342e7d3-01e5-808c-8a17-db29161cbeac" class=""><strong>Ergodic Graph:</strong></p><p id="1342e7d3-01e5-8092-b612-dfacf663a8b3" class="">No matter the initial distribution (at <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">t=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span><span>﻿</span></span>), a random-walk will always converge on a unique stationary distribution. </p><p id="1342e7d3-01e5-8009-804c-f48e0e31fd64" class="">Requires the graph to be: </p><ul id="1342e7d3-01e5-80a2-be26-fb8ed6d1b58b" class="bulleted-list"><li style="list-style-type:disc">connected (or else, dead end web pages) </li></ul><ul id="1342e7d3-01e5-8055-9eb4-e2679f99c2d7" class="bulleted-list"><li style="list-style-type:disc">can&#x27;t be bipartite (or else it will never approach a fixed, correct distribution)</li></ul><ul id="1342e7d3-01e5-80c8-9cc3-ee61b6bf31a6" class="bulleted-list"><li style="list-style-type:disc">vertex aperiodic (or else it will bounce around). </li></ul><ul id="1342e7d3-01e5-80fa-9b39-febd7be8cccd" class="bulleted-list"><li style="list-style-type:disc">no vertices with a self loop</li></ul><hr id="1342e7d3-01e5-8079-b1e1-da9bbb2733b1"/><h3 id="1342e7d3-01e5-80a7-b76f-cff85e1137ce" class=""><strong>Problems With Page Rank </strong></h3><p id="1342e7d3-01e5-8038-a2dd-f0266e0c679d" class="">Both are cases where the graph is <span style="border-bottom:0.05em solid">not connected</span>. </p><figure id="1342e7d3-01e5-808c-8a55-c0857679daa2" class="image"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_15.33.12.png"><img style="width:192px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_15.33.12.png"/></a><figcaption>What doesn&#x27;t get lost to blue gets lost to green. Page rank would likely give green 1/9 and the rest would get 0&#x27;s. </figcaption></figure><p id="1342e7d3-01e5-80b4-a2ff-e077415d7717" class=""><strong>Problem #1 — Dead ends </strong></p><p id="1342e7d3-01e5-807f-b7cb-d7188465d5b3" class="">Pages with no out-links. </p><ul id="1342e7d3-01e5-8023-a879-d78e87c1fb1c" class="bulleted-list"><li style="list-style-type:disc">Random walk has nowhere to go. </li></ul><ul id="1342e7d3-01e5-800a-adb7-f5faf35d65d7" class="bulleted-list"><li style="list-style-type:disc">Causes importance to <strong>leak out</strong>. <ul id="1342e7d3-01e5-801f-95de-f6522870f150" class="bulleted-list"><li style="list-style-type:circle">Any importance added to it will be gone in next iteration. </li></ul></li></ul><ul id="1342e7d3-01e5-809f-84c7-ce6b78c5c354" class="bulleted-list"><li style="list-style-type:disc">Converges on all 0’s (i.e. nothing is important), which does not sum to 1. </li></ul><ul id="1342e7d3-01e5-8013-9183-e7c62691ba4b" class="toggle"><li><details open=""><summary><mark class="highlight-purple">Example</mark> </summary><div id="1342e7d3-01e5-807e-8b31-c40c7033eef7" class="column-list"><div id="1342e7d3-01e5-8004-a26a-df3a777e1366" style="width:50%" class="column"><figure id="1342e7d3-01e5-8043-aff6-da167cff9930" class="image"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_15.28.21.png"><img style="width:240px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_15.28.21.png"/></a></figure></div><div id="1342e7d3-01e5-8016-8a72-cdce4c43464a" style="width:50%" class="column"><figure id="1342e7d3-01e5-80c3-9873-f5c04d54b491" class="image"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_15.28.32.png"><img style="width:316.96429443359375px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_15.28.32.png"/></a></figure><p id="1342e7d3-01e5-80ba-bda6-c612c98200d2" class="">
</p></div></div></details></li></ul><ul id="1342e7d3-01e5-802d-b93a-f9d1bbf77d15" class="toggle"><li><details open=""><summary><mark class="highlight-purple">Example</mark> </summary><figure id="1342e7d3-01e5-8011-a0f7-db29d32b3e4e" class="image"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_17.06.42.png"><img style="width:240px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_17.06.42.png"/></a></figure><figure id="1342e7d3-01e5-8021-9541-c10960b8097e" class="image"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_17.06.55.png"><img style="width:288px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_17.06.55.png"/></a></figure></details></li></ul><p id="1342e7d3-01e5-80ec-a1a5-d5f3238f6372" class=""><strong>Problem #2 — Spider Traps </strong></p><p id="1342e7d3-01e5-802a-9cf5-e1a6ca85ce36" class="">can&#x27;t get out of group when inside:</p><ul id="1342e7d3-01e5-8010-abb0-ec16d3e712f3" class="bulleted-list"><li style="list-style-type:disc">Random walker gets “stuck” in a trap </li></ul><ul id="1342e7d3-01e5-8040-8425-d7693fc0ee3d" class="bulleted-list"><li style="list-style-type:disc">Eventually <em><strong>absorbs all importance.</strong></em> The trap takes all the page rank and never gives it back. after enough iterations, the rest will go to zero.</li></ul><ul id="1342e7d3-01e5-80ca-82b1-e517fa953da8" class="bulleted-list"><li style="list-style-type:disc">Also, not aperiodic </li></ul><ul id="1342e7d3-01e5-80ce-b26f-dbdef1c35ba7" class="toggle"><li><details open=""><summary><mark class="highlight-purple">Example</mark></summary><figure id="1342e7d3-01e5-806d-8614-cc3b65c2a031" class="image" style="text-align:center"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_15.34.41.png"><img style="width:288px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_15.34.41.png"/></a></figure><figure id="1342e7d3-01e5-80df-956f-db50b81a1781" class="image" style="text-align:center"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_15.35.10.png"><img style="width:480px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_15.35.10.png"/></a></figure></details></li></ul><h3 id="1342e7d3-01e5-8090-a5ef-f20e10e12c75" class="">Solution — Teleports</h3><p id="1342e7d3-01e5-806d-bc6a-e91c8e4be891" class=""><em><mark class="highlight-gray">Before: With random walk, the matrix is constant (for each vertex we&#x27;re in, prob that&#x27;s going somewhere else. So we can&#x27;t maintain state). </mark></em></p><figure id="1342e7d3-01e5-8058-9354-ec8eb1185f2d" class="equation"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>r</mi><mi>j</mi></msub><mo>=</mo><mi>β</mi><munder><mo>∑</mo><mrow><mi>i</mi><mo>→</mo><mi>j</mi></mrow></munder><mfrac><msub><mi>r</mi><mi>i</mi></msub><msub><mi>d</mi><mi>i</mi></msub></mfrac><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>β</mi><mo stretchy="false">)</mo><mfrac><mn>1</mn><mi>N</mi></mfrac></mrow><annotation encoding="application/x-tex">r_j =
\beta \sum_{i\rarr j} \frac{r_i}{d_i}
+
(1-\beta)\frac{1}{N}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.5213em;vertical-align:-1.4138em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">→</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mclose">)</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure><p id="1342e7d3-01e5-8070-9d08-dba96d0d5841" class="">At each time step, the random surfer has two options</p><ol type="1" id="1342e7d3-01e5-803c-91d3-e587fa4c1f55" class="numbered-list" start="1"><li>With probability <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span></span></span></span></span><span>﻿</span></span> , follow a link at random. </li></ol><ol type="1" id="1342e7d3-01e5-802d-9a1c-c5a7da9fe7da" class="numbered-list" start="2"><li>With probability <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mi>β</mi></mrow><annotation encoding="application/x-tex">1-\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span></span></span></span></span><span>﻿</span></span> (jump factor), jump to some random page. <ul id="1342e7d3-01e5-80a2-ae64-dd2565d16832" class="bulleted-list"><li style="list-style-type:disc">If there&#x27;s N pages, prob. of jumping anywhere is 1/N (uniform)</li></ul></li></ol><p id="1342e7d3-01e5-8092-94bb-ea0657691d0e" class="">⇒ Surfer will teleport out of spider trap within a few time steps</p><figure id="1342e7d3-01e5-8069-b419-e6aa6cca5587" class="image"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_15.38.38.png"><img style="width:384px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_15.38.38.png"/></a><figcaption>Random teleports are now <strong>edges</strong>. Still doing random walk, but now the graph is more <strong>densely</strong> <strong>connected</strong>.</figcaption></figure><p id="1342e7d3-01e5-80ed-9779-c87195d06e67" class="">This formulation assumes that  𝑴 has no dead ends. We can either:</p><ol type="1" id="1342e7d3-01e5-80df-9556-df712a495034" class="numbered-list" start="1"><li>Preprocess matrix 𝑴 to remove all dead ends</li></ol><ol type="1" id="1342e7d3-01e5-807f-a5ec-de385f5828f0" class="numbered-list" start="2"><li>Explicitly follow random teleport links with probability <strong>1.0</strong> from dead-ends. </li></ol><p id="1342e7d3-01e5-803b-8757-e4c920e7776b" class="">Solution: make every 0 column random, then do the walk. </p><figure id="1342e7d3-01e5-80c7-a271-f364a549c37a" class="image"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_17.08.10.png"><img style="width:432px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_17.08.10.png"/></a></figure><p id="1342e7d3-01e5-8075-8443-ece0a5f9f3c8" class="">
</p><ul id="1342e7d3-01e5-8005-96d8-cb99f70ed419" class="toggle"><li><details open=""><summary><mark class="highlight-purple">Example</mark> </summary><figure id="1342e7d3-01e5-801a-8bef-edd5f0d5411e" class="image"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_17.12.11.png"><img style="width:480px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_17.12.11.png"/></a></figure><ul id="1342e7d3-01e5-8040-85a8-ef153a082629" class="bulleted-list"><li style="list-style-type:disc">same graph w&#x27; spider trap, take beta (.8) and jump factor (.2)<ul id="1342e7d3-01e5-8043-a440-f2088d08bb1e" class="bulleted-list"><li style="list-style-type:circle">the new matrix is col-stochastic</li></ul><ul id="1342e7d3-01e5-80f0-9076-c29926784806" class="bulleted-list"><li style="list-style-type:circle">all over 15 so they all have common divisor</li></ul></li></ul><ul id="1342e7d3-01e5-80f0-985b-fbaddd45d1c1" class="bulleted-list"><li style="list-style-type:disc">in the end, <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span><span>﻿</span></span> has roughly 2/3 the importance, which is better than 3/3. </li></ul><ul id="1342e7d3-01e5-8069-ac41-da6608a4b721" class="bulleted-list"><li style="list-style-type:disc">Dead-ends still a problem (have to manually send things). </li></ul></details></li></ul><p id="1342e7d3-01e5-80db-a369-fd1ce2edca5e" class=""><strong>Summary:</strong></p><ul id="1342e7d3-01e5-80ba-b42e-c9889aa7fee3" class="bulleted-list"><li style="list-style-type:disc"><strong>Spider-traps</strong> are not a problem in itself, but with traps PageRank scores are not what we want<ul id="1342e7d3-01e5-80ee-95e2-ca3a67bdcd1b" class="bulleted-list"><li style="list-style-type:circle">Solution: Never get stuck in a spider trap by teleporting out of it in a finite number of steps</li></ul><ul id="1342e7d3-01e5-803e-a9ea-c611c0258b34" class="bulleted-list"><li style="list-style-type:circle">This doesnt solve spider-traps fully. They still consume a lot of page-rank then if they have an out-edge. But, its an improvement</li></ul></li></ul><ul id="1342e7d3-01e5-8071-a778-ea1572b1efa9" class="bulleted-list"><li style="list-style-type:disc"><strong>Dead-ends</strong> are a problem<ul id="1342e7d3-01e5-804f-8c06-c15cf5d67a83" class="bulleted-list"><li style="list-style-type:circle">The matrix is not column stochastic (its not a random-walk, so it converges on all zeroes), so our initial assumptions are not met</li></ul><ul id="1342e7d3-01e5-80be-949d-dc919ad0b1b6" class="bulleted-list"><li style="list-style-type:circle"><strong>Solution: </strong>Make matrix column stochastic by always teleporting when there is nowhere else to go</li></ul></li></ul><h2 id="1342e7d3-01e5-8089-8c99-ce6308f295bf" class="">PageRank — MapReduce</h2><p id="1342e7d3-01e5-80f4-93e2-ec91b1ed8a4a" class=""><strong>First iteration:</strong> no dead-ends / random jumps. </p><ul id="1342e7d3-01e5-80b8-b70f-e2506de111c0" class="bulleted-list"><li style="list-style-type:disc">Close to parallel BFS,  but it’s a replacement, not an update; combine is += instead of min (add sum of all incoming ranks and then assign it). <figure id="1342e7d3-01e5-80bd-a590-c8c7c73f8d79" class="image" style="text-align:center"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_17.19.45.png"><img style="width:240px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_17.19.45.png"/></a></figure></li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1342e7d3-01e5-80c9-a1d9-c554898011bc" class="code"><code class="language-Python">def Map(ID: str, n: Node):
&#x27;&#x27;&#x27;Each node “sends” its importance to its out-links&#x27;&#x27;&#x27;
		emit(ID, n)
		p = n.rank / len(n.adj)
		for m in n.adj:
				emit(m, p)

def Reduce(ID: str, msgs: list[Node|float]):
&#x27;&#x27;&#x27;Each node sets its new importance to the sum of the received values&#x27;&#x27;&#x27;
		n = None
		sum = 0
		for msg in msgs:
				if msg is Node:
						n = msg
				else:
						sum += msg
				n.rank = sum
				emit(ID, n)</code></pre><p id="1342e7d3-01e5-80bf-980e-c3bcb1bad708" class=""><strong>Second Iteration: </strong>random jumps &amp; dead-end jumps</p><ul id="1342e7d3-01e5-8048-b7e5-e89d88658f8a" class="bulleted-list"><li style="list-style-type:disc">Every node has the same chance of jumping: 1 – β</li></ul><ul id="1342e7d3-01e5-80fe-bb46-e2753f9c6bc3" class="bulleted-list"><li style="list-style-type:disc">If it jumps, it jumps to ANY random page (1/N for a particular page)</li></ul><ul id="1342e7d3-01e5-80ea-851b-fe8faf9bfbe6" class="bulleted-list"><li style="list-style-type:disc">Only need to change reducer side</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1342e7d3-01e5-8039-b1e3-d14aae92f560" class="code"><code class="language-Python">def Reduce(ID: str, msgs: list[Node|float]):
&#x27;&#x27;&#x27;Each node sets its new importance to the sum of the received values&#x27;&#x27;&#x27;
		n = None
		sum = 0
		for msg in msgs:
				if msg is Node:
						n = msg
				else:
						sum += msg
				n.rank = sum * β + (1-β) / N
				emit(ID, n)</code></pre><p id="1342e7d3-01e5-8069-b9e1-d403adb8f6c7" class=""><strong>Third Iteration: </strong>Post Process for dead-ends</p><p id="1342e7d3-01e5-80f5-8818-e21561447982" class="">Dead-Ends send all their weight everywhere, instead of only some of it.</p><p id="1342e7d3-01e5-804a-994d-e56e72ef56e5" class="">2 options: </p><ol type="1" id="1342e7d3-01e5-8053-8ddb-ccc231e8ff61" class="numbered-list" start="1"><li>Replace dead-ends with “links to everyone, everywhere”<ul id="1342e7d3-01e5-8058-a385-ef92d2725143" class="bulleted-list"><li style="list-style-type:disc">No changes to the code</li></ul><ul id="1342e7d3-01e5-804e-a4cc-fff48e4b1b0d" class="bulleted-list"><li style="list-style-type:disc">But, that’s a lot of messages</li></ul></li></ol><ol type="1" id="1342e7d3-01e5-8099-bde0-f4eafdb50bab" class="numbered-list" start="2"><li><mark class="highlight-yellow_background">Post-process to redistribute “missing mass”</mark><ul id="1342e7d3-01e5-8008-baac-cc9de0763b70" class="bulleted-list"><li style="list-style-type:disc">Avoids making N-degree nodes</li></ul><ul id="1342e7d3-01e5-8093-a6ce-ffe37b32d5ee" class="bulleted-list"><li style="list-style-type:disc">But, solution needs to change. </li></ul></li></ol><p id="1342e7d3-01e5-8049-ad10-ccc514c227db" class=""><strong>Post Processing</strong></p><p id="1342e7d3-01e5-8008-9425-f7a96ac5d0b6" class="">Add <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mn>1</mn><mo>−</mo><mi>R</mi></mrow><mi>N</mi></mfrac></mrow><annotation encoding="application/x-tex">\frac{1-R}{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2173em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><span>﻿</span></span> to all nodes </p><ul id="1342e7d3-01e5-80d9-9f63-e7c0be2ce549" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span></span><span>﻿</span></span> = sum of all ranks </li></ul><ul id="1342e7d3-01e5-8028-98e4-f4ba890024c2" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mi>R</mi></mrow><annotation encoding="application/x-tex">1-R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span></span><span>﻿</span></span> = “missing mass” (sum of ranks of dead ends) </li></ul><p id="1342e7d3-01e5-8005-97b5-d20293a0bab8" class="">You can move the “post processing” map into the “next map”</p><p id="1342e7d3-01e5-8032-9fad-ddd1ead1f57c" class="">
</p><figure id="1342e7d3-01e5-802a-be91-df5fa51de96c" class="image"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_17.26.27.png"><img style="width:336px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_17.26.27.png"/></a><figcaption>Reducer sums together, writes to disk. On driver, figure out how much mass is missing. The second map adds (uniformly) whats missing to each vertex.</figcaption></figure><h3 id="1362e7d3-01e5-8002-974f-ef559bcd12e9" class="">Alternative </h3><p id="1362e7d3-01e5-80cf-a23d-f9783c96d8bf" class="">Idea: </p><ul id="1362e7d3-01e5-80f7-86b2-e53cffcf0c03" class="bulleted-list"><li style="list-style-type:disc">We keep track of “how much is missing”. Set to 0 initially. </li></ul><ul id="1362e7d3-01e5-80f8-a86e-c3ad105216a6" class="bulleted-list"><li style="list-style-type:disc">After the reducer runs, we figure out how much was missing. </li></ul><ul id="1362e7d3-01e5-803e-bac7-f40215a06021" class="bulleted-list"><li style="list-style-type:disc">In the next iteration, we tell it what was missing. </li></ul><ul id="1362e7d3-01e5-8071-9be2-cc3bbabb6711" class="bulleted-list"><li style="list-style-type:disc">We would only have to do the final map AT THE VERY END, once all iterations are complete (to ensure it adds up to 1). Although we don’t really need that. All we need in the end is to be able to sort the page rank in order. Since they are all missing the same amount of mass, It does not matter if it adds up to 1 in the end. <ul id="1362e7d3-01e5-80eb-8987-f5daf9c8472e" class="bulleted-list"><li style="list-style-type:circle">HOWEVER, it’s best practice to add it back each time, because if you’re doing many iterations, your numbers will get smaller and smaller which can lead to underflow. </li></ul></li></ul><p id="1362e7d3-01e5-8080-bdb8-c2755667f80c" class="">Mappers sends: </p><ul id="1362e7d3-01e5-8086-91e2-fb0d85e5169f" class="bulleted-list"><li style="list-style-type:disc">β (node.rank) divided evenly amount out-links </li></ul><ul id="1362e7d3-01e5-80f2-b44b-ffbb3c90c10c" class="bulleted-list"><li style="list-style-type:disc"> (1 – β)(node.rank) to “everyone” </li></ul><ul id="1362e7d3-01e5-80e7-a8a4-df443dd41b03" class="bulleted-list"><li style="list-style-type:disc">dead-ends: send entire rank to “everyone”</li></ul><p id="1362e7d3-01e5-8073-a334-ecc2733a4692" class="">Reducer:  </p><ul id="1362e7d3-01e5-80d9-b03b-c86b1cd2ad8f" class="bulleted-list"><li style="list-style-type:disc">Adds (1/N) x “everyone” rank to each sum</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1362e7d3-01e5-80f9-98e1-d999df675bc9" class="code"><code class="language-Python">
class Mapper:
		def Map(ID: int, n: Node):
		&#x27;&#x27;&#x27;
		• Instead of sending a msg to everyone, make a key called everyone and send it to that one.
		• Also, don&#x27;t need a single &quot;everyone&quot;
		&#x27;&#x27;&#x27;
					if not n.adj:
						for v in n.adj:
								emit(v, n.rank / n.degree)
					else:
							dead_ends += n.rank

		def cleanup():
		&#x27;&#x27;&#x27; Send to each reducer &#x27;&#x27;&#x27;
				for i in range(num_reducers):
						emit(EVERYBODY[i], dead_ends)

class Reducer:
		def reduce():
		&#x27;&#x27;&#x27; Each reducer recieves the &quot;everybody&quot; key first &#x27;&#x27;&#x27;
			...
			node.rank = sum * BETA + (1-BETA) / n + BETA * dead_mass / N
			... </code></pre><h3 id="1342e7d3-01e5-8029-8e8e-db7416ff8c78" class=""><strong>Log Masses: </strong></h3><ul id="1342e7d3-01e5-80d7-b4f0-c1d319fa7cad" class="bulleted-list"><li style="list-style-type:disc">for large <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></span><span>﻿</span></span>, <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">1/N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1/</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></span><span>﻿</span></span> is too small to represent. </li></ul><ul id="1342e7d3-01e5-80bc-9080-d1493e9bdb59" class="bulleted-list"><li style="list-style-type:disc">So we store as <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">log(1/N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord">1/</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span></span><span>﻿</span></span></li></ul><h2 id="1342e7d3-01e5-8008-9821-ed968381240e" class="">PageRank — Spark</h2><p id="1342e7d3-01e5-8038-a41e-f752e1ce5ad3" class="">Problems in MapReduce</p><ul id="1342e7d3-01e5-8065-b4cb-f5619d745447" class="bulleted-list"><li style="list-style-type:disc">Sending Adjacency lists with each iteration (never changes) </li></ul><ul id="1342e7d3-01e5-80f7-8bc9-d8c022bff11d" class="bulleted-list"><li style="list-style-type:disc">Needless Shuffling </li></ul><ul id="1342e7d3-01e5-806e-9b9b-f28e00d06363" class="bulleted-list"><li style="list-style-type:disc">Needless Filesystem Access </li></ul><ul id="1342e7d3-01e5-805c-8d4e-f57755289246" class="bulleted-list"><li style="list-style-type:disc">Each iteration is a new job (overhead)</li></ul><p id="1342e7d3-01e5-8071-ae10-e48a81188f4f" class="">
</p><figure id="1342e7d3-01e5-8073-bfca-ceab1574a59c" class="image"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_17.37.01.png"><img style="width:336px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-04_at_17.37.01.png"/></a></figure><ul id="1342e7d3-01e5-8060-875c-c2e931ca4afe" class="bulleted-list"><li style="list-style-type:disc">Input file is an edge list</li></ul><ul id="1342e7d3-01e5-8098-807b-dfbb53844f21" class="bulleted-list"><li style="list-style-type:disc">ranks = links.<ul id="1342e7d3-01e5-809c-894e-dabd448d0d4b" class="bulleted-list"><li style="list-style-type:circle">value goes to 1</li></ul><ul id="1342e7d3-01e5-80d1-81d9-fe137e014d3b" class="bulleted-list"><li style="list-style-type:circle">assume page rank vector is parallelized, uniform</li></ul></li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1342e7d3-01e5-8029-89f4-fad7062c17dc" class="code"><code class="language-Python">val lines = sc.textFile(&quot;the-internet.txt&quot;)
val damp = 0.85
val links = lines
	.map{ s =&gt;
		val parts = s.split(&quot;\\s+&quot;)
		(parts(0), parts(1))
	}
	.distinct()
	.groupByKey()
	.cache()

var ranks = links.mapValues(v =&gt; 1.0)
for (i &lt;- 1 to iters) {
		val contribs = links
				.join(ranks)
				.values
				.flatMap{ case (urls, rank)  =&gt;
						val size = urls.size
						urls.map(url =&gt; (url, rank / size))
				}
		ranks = contribs
				.reduceByKey(_ + _)
				.mapValues((1 – damp) + damp * _)
}</code></pre><p id="1342e7d3-01e5-809e-b106-cf79d51ad531" class="">
</p><hr id="1342e7d3-01e5-8037-92ef-cee437b4d4ac"/><h3 id="1362e7d3-01e5-80c8-81ef-fbc8539d2cfe" class="">Recall Search</h3><ul id="1362e7d3-01e5-8012-af9b-d8bf80cb59cc" class="bulleted-list"><li style="list-style-type:disc">With TF and IDF (used to find relevant pages), you could spam the same term on a page to get to the top <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span><span>﻿</span></span> pages. </li></ul><ul id="1362e7d3-01e5-802d-b28d-e31d3a4f363d" class="bulleted-list"><li style="list-style-type:disc">After TF and IDF finds the most relevant terms, page rank sort of <em>re-ranks </em>them. So that spamming words does not do as much. </li></ul><ul id="1362e7d3-01e5-801f-a9dd-dcab7aae780f" class="bulleted-list"><li style="list-style-type:disc">However, <strong>spamming synonyms</strong> does still help.<ul id="1362e7d3-01e5-806b-8103-f3d8ff86ef42" class="bulleted-list"><li style="list-style-type:circle">e.g. “A SEO walks into a bar pub inn roadhouse saloon tavern alehouse beer house beer garden public house drinkery beer ale draught wine…” </li></ul></li></ul><p id="1362e7d3-01e5-80a7-982a-d08e7594c9a6" class=""><strong>Solution: </strong></p><p id="1362e7d3-01e5-8046-9a8f-f34f62edd1bc" class="">Don’t trust the page author. Trust what other people are saying. </p><ul id="1362e7d3-01e5-809e-993b-e0be009ad26d" class="bulleted-list"><li style="list-style-type:disc">Use link text (and surrounding text) as terms, instead of contents of page </li></ul><ul id="1362e7d3-01e5-80d6-b391-dd197935d6e7" class="bulleted-list"><li style="list-style-type:disc">Remember “tragic love story” vs “star-crossed romance”?  Solved.</li></ul><p id="1362e7d3-01e5-80a7-97fb-d26fb31e368c" class="">This does not fully solve the problem: </p><ul id="1362e7d3-01e5-80d5-a791-f0f35cbaf936" class="bulleted-list"><li style="list-style-type:disc">if everyone repeats the same phrase as the anchor text to a link, it will use those terms as search terms when building the index. </li></ul><ul id="1362e7d3-01e5-8010-a91b-fef995dc82ab" class="bulleted-list"><li style="list-style-type:disc">e.g. many people made links to a president’s bio with the text “miserable failure” </li></ul><p id="1362e7d3-01e5-8079-8379-d749446636c9" class="">spamming links exposes weakness in page rank</p><ul id="1362e7d3-01e5-8019-a014-f19e30b48a30" class="bulleted-list"><li style="list-style-type:disc">If you go to every page that allows posting, and link to your webpage? Now YouTube, Facebook, CBC News, etc. all link to you. They have high rank =&gt; You have high rank</li></ul><h3 id="1362e7d3-01e5-80fc-909f-faba71c93f8c" class="">Spam Farms</h3><p id="1362e7d3-01e5-80df-846c-cfcd52980a65" class="">Exploits spider traps. </p><ul id="1362e7d3-01e5-80f0-92d5-fc3e999a600a" class="bulleted-list"><li style="list-style-type:disc">“Spider traps” accumulate rank. </li></ul><ul id="1362e7d3-01e5-8088-b708-d6fd38677a7d" class="bulleted-list"><li style="list-style-type:disc">Random jumps prevent them from accumulating ALL rank, but it’s still boosted </li></ul><p id="1362e7d3-01e5-80a2-8e47-d952d1857f1c" class="">Technique: </p><p id="1362e7d3-01e5-8086-95f0-eec448be7e02" class="">You have some page you want to boost (<strong>target</strong>) </p><ol type="1" id="1362e7d3-01e5-80cd-80b0-f7ef36a20ad2" class="numbered-list" start="1"><li>Make sure target page has no links from it (dead end).</li></ol><ol type="1" id="1362e7d3-01e5-80eb-8cf0-ec7d0341f734" class="numbered-list" start="2"><li>Turn it into a <strong>spider trap</strong>: Generate millions of <strong>farm </strong>pages. Each has 1 link — back to the target page. <ul id="1362e7d3-01e5-80ea-8631-e122856695e8" class="bulleted-list"><li style="list-style-type:disc">They all accumulate the random-jump weight </li></ul><ul id="1362e7d3-01e5-80b9-b797-f312207eda0f" class="bulleted-list"><li style="list-style-type:disc">They each send all their rank back to the target. </li></ul></li></ol><figure id="1362e7d3-01e5-8086-acdc-cd792c260a6d" class="image"><a href="05%20%E2%80%94%20Graphs/Screenshot_2024-11-05_at_21.27.22.png"><img style="width:336px" src="05%20%E2%80%94%20Graphs/Screenshot_2024-11-05_at_21.27.22.png"/></a></figure><p id="1362e7d3-01e5-8032-a884-ec3ac21fcd6a" class="">What will the page rank of the target page, <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span></span><span>﻿</span></span>, be: </p><p id="1362e7d3-01e5-80ae-b436-e9fa8daa3417" class=""><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mstyle mathcolor="#28ae7b"><msub><mi>r</mi><mi>t</mi></msub></mstyle></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mstyle mathcolor="#6495ed"><mi>x</mi></mstyle><mo>+</mo><mstyle mathcolor="#df0030"><mi>M</mi></mstyle><mi>β</mi><mstyle mathcolor="#df0030"><mo stretchy="false">[</mo></mstyle><mfrac><mrow><mi>β</mi><mstyle mathcolor="#28ae7b"><msub><mi>r</mi><mi>t</mi></msub></mstyle></mrow><mi>M</mi></mfrac><mo>+</mo><mfrac><mi>α</mi><mi>N</mi></mfrac><mstyle mathcolor="#df0030"><mo stretchy="false">]</mo></mstyle><mo>+</mo><mfrac><mi>α</mi><mi>N</mi></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mstyle mathcolor="#6495ed"><mi>x</mi></mstyle><mrow><mn>1</mn><mo>−</mo><msup><mi>β</mi><mn>2</mn></msup></mrow></mfrac><mo>+</mo><mfrac><mrow><mi>β</mi><mstyle mathcolor="#df0030"><mi>M</mi></mstyle></mrow><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>β</mi><mo stretchy="false">)</mo><mi>N</mi></mrow></mfrac></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
\green{r_t} &amp;= \blue{x}
+
\red M\beta
\red{[}
\frac{\beta \green{r_t}}{M} + \frac{\alpha}{N}
\red{]}
+
\frac{\alpha}{N}

\\ &amp;=

\frac{\blue x}{1-\beta^2} + \frac{\beta \red M}{(1+\beta )N}

\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.9649em;vertical-align:-2.2324em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.7324em;"><span style="top:-4.7324em;"><span class="pstrut" style="height:3.3714em;"></span><span class="mord"><span class="mord" style="color:#28ae7b;"><span class="mord mathnormal" style="margin-right:0.02778em;color:#28ae7b;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:#28ae7b;"><span class="mord mathnormal mtight" style="color:#28ae7b;">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.375em;"><span class="pstrut" style="height:3.3714em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.2324em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.7324em;"><span style="top:-4.7324em;"><span class="pstrut" style="height:3.3714em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="color:#6495ed;">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;color:#df0030;">M</span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mopen" style="color:#df0030;">[</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mord" style="color:#28ae7b;"><span class="mord mathnormal" style="margin-right:0.02778em;color:#28ae7b;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:#28ae7b;"><span class="mord mathnormal mtight" style="color:#28ae7b;">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose" style="color:#df0030;">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-2.375em;"><span class="pstrut" style="height:3.3714em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="color:#6495ed;">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mord mathnormal" style="margin-right:0.10903em;color:#df0030;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.2324em;"><span></span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span></p><ul id="1362e7d3-01e5-80fb-ac60-e063f87456a5" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="#df0030"><mo stretchy="false">[</mo></mstyle><mo>…</mo><mstyle mathcolor="#df0030"><mo stretchy="false">]</mo></mstyle></mrow><annotation encoding="application/x-tex">\red{[} \dots \red{]} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen" style="color:#df0030;">[</span><span class="minner">…</span><span class="mclose" style="color:#df0030;">]</span></span></span></span></span><span>﻿</span></span> — rank of a farm page</li></ul><ul id="1362e7d3-01e5-80ed-b831-c1b73e26a2ab" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="#6495ed"><mi>x</mi></mstyle></mrow><annotation encoding="application/x-tex">\blue x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="color:#6495ed;">x</span></span></span></span></span><span>﻿</span></span> — total contribution of accessible pages. Some fixed constant. </li></ul><ul id="1362e7d3-01e5-808c-a32d-dfde41d7de23" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>α</mi><mi>N</mi></mfrac></mrow><annotation encoding="application/x-tex">\frac{\alpha}{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0404em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.0037em;">α</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><span>﻿</span></span> is very small. We assume dead-ends are not enough to contribute meaningfully. </li></ul><ul id="1362e7d3-01e5-8087-8456-e0eb8bc8a1e5" class="bulleted-list"><li style="list-style-type:disc">It grows linearly with <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="#df0030"><mi>M</mi></mstyle></mrow><annotation encoding="application/x-tex">\red M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;color:#df0030;">M</span></span></span></span></span><span>﻿</span></span>.</li></ul><p id="1362e7d3-01e5-8011-bcb4-d6771e037d7b" class="">
</p><p id="1362e7d3-01e5-807e-8676-e9990015c2c3" class="">For <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi><mo>=</mo><mn>0.85</mn></mrow><annotation encoding="application/x-tex">\beta=0.85</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.85</span></span></span></span></span><span>﻿</span></span>, we get: </p><ul id="1362e7d3-01e5-805b-8e75-f199baf469a7" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="#28ae7b"><msub><mi>r</mi><mi>t</mi></msub></mstyle><mo>=</mo><mn>3.6</mn><mstyle mathcolor="#6495ed"><mi>x</mi></mstyle></mrow><annotation encoding="application/x-tex">\green{r_t} =3.6 \blue x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord" style="color:#28ae7b;"><span class="mord mathnormal" style="margin-right:0.02778em;color:#28ae7b;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:#28ae7b;"><span class="mord mathnormal mtight" style="color:#28ae7b;">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3.6</span><span class="mord mathnormal" style="color:#6495ed;">x</span></span></span></span></span><span>﻿</span></span></li></ul><p id="1362e7d3-01e5-803c-a900-c179a019d3dc" class="">If <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="#28ae7b"><mi>t</mi></mstyle></mrow><annotation encoding="application/x-tex">\green t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal" style="color:#28ae7b;">t</span></span></span></span></span><span>﻿</span></span> had an outgoing link, we would get: </p><ul id="1362e7d3-01e5-80a1-ab31-ed67ac4c49a5" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="#28ae7b"><msub><mi>r</mi><mi>t</mi></msub></mstyle><mo>=</mo><mn>1</mn><mstyle mathcolor="#6495ed"><mi>x</mi></mstyle></mrow><annotation encoding="application/x-tex">\green{r_t} =1 \blue x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord" style="color:#28ae7b;"><span class="mord mathnormal" style="margin-right:0.02778em;color:#28ae7b;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight" style="color:#28ae7b;"><span class="mord mathnormal mtight" style="color:#28ae7b;">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mord mathnormal" style="color:#6495ed;">x</span></span></span></span></span><span>﻿</span></span></li></ul><h3 id="1362e7d3-01e5-806b-90cb-e08e2263c708" class="">Solution to Spam Farming </h3><ul id="1362e7d3-01e5-806f-9646-c8fd5c6ddc40" class="bulleted-list"><li style="list-style-type:disc">Ignore links tagged as “<strong>nofollow</strong>”</li></ul><ul id="1362e7d3-01e5-80df-a6ab-f36618a6cf07" class="bulleted-list"><li style="list-style-type:disc">Convince forums, news sites, etc. to insert “nofollow” to all links posted in comments. </li></ul><p id="1362e7d3-01e5-8053-a1b3-c21434ca41f5" class="">⇒ makes <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="#6495ed"><mi>x</mi></mstyle><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\blue x=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="color:#6495ed;">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span><span>﻿</span></span> </p><p id="1362e7d3-01e5-80ae-a5e5-f9e6f2daceb9" class="">Does this solve the problem? </p><h3 id="1362e7d3-01e5-8003-a761-d72d838b40bc" class="">Personalized Page Rank</h3><p id="1362e7d3-01e5-80da-9b44-c5f81c5bb1e2" class=""><em><mark class="highlight-gray"><strong>Solves the “Spam Farm” Problem </strong></mark></em></p><p id="1362e7d3-01e5-80ea-9a1f-f5ac4b87a222" class="">Uses only <strong>trustworthy</strong> (<strong>seed</strong>) pages as <strong>source nodes</strong></p><ul id="1362e7d3-01e5-80e3-b99e-cfa588312749" class="bulleted-list"><li style="list-style-type:disc">These must be hand-verified (Expensive) </li></ul><p id="1362e7d3-01e5-8039-8b41-cac2c418471b" class=""><strong>Idea</strong></p><ul id="1362e7d3-01e5-80ff-9978-eaefdc3f68ab" class="bulleted-list"><li style="list-style-type:disc">Each page in <strong>trust set </strong>is initialized to 1<ul id="1362e7d3-01e5-8020-84d7-f464efefadc7" class="bulleted-list"><li style="list-style-type:circle">Trust sums to <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></span><span>﻿</span></span> instead of to 1</li></ul></li></ul><ul id="1362e7d3-01e5-802f-8caf-dcefc614f50b" class="bulleted-list"><li style="list-style-type:disc">After an iteration of <em>trust rank, </em>the trust diffuses outwards from our hand-verified pages, to discover trust in new pages. </li></ul><ul id="1362e7d3-01e5-8017-86e7-c61ae6174772" class="bulleted-list"><li style="list-style-type:disc">After all iterations:<ul id="1362e7d3-01e5-80c1-9720-f959a7e3008a" class="bulleted-list"><li style="list-style-type:circle">All pages have a <strong>trust factor</strong> of between 0 and 1. Your Trust is roughly proportional to your link distance from a “good” seed page.</li></ul><ul id="1362e7d3-01e5-80e6-9c99-fab7077f9fb7" class="bulleted-list"><li style="list-style-type:circle">Pick a <strong>threshold</strong> and mark all pages below that as spam. </li></ul></li></ul><ul id="1362e7d3-01e5-8025-863c-f770dce5babd" class="bulleted-list"><li style="list-style-type:disc">since the internet is huge ⇒ most pages will be too many links away, despite being not spam. ⇒ anything near 0 DOESN’T IMPLY that the page is trustworthy, we just can’t confirm it. </li></ul><ul id="1362e7d3-01e5-8070-9069-e64878223652" class="bulleted-list"><li style="list-style-type:disc"><strong>Random teleports only go to trustworthy pages</strong>: <ul id="1362e7d3-01e5-801e-bf75-f01f79df9a84" class="bulleted-list"><li style="list-style-type:circle">Only the “good” partition accumulates <span style="border-bottom:0.05em solid">significant</span> trust</li></ul><ul id="1362e7d3-01e5-8030-ad3a-db980ed6e998" class="bulleted-list"><li style="list-style-type:circle">Won’t jump randomly to farm pages ⇒ target won’t get <span style="border-bottom:0.05em solid">significant</span> trust</li></ul></li></ul><p id="1362e7d3-01e5-809b-8c03-c3459775a46c" class=""><strong>Why it works: </strong></p><ul id="1362e7d3-01e5-80b1-97c9-ed2bee00111d" class="bulleted-list"><li style="list-style-type:disc">Trustworthy pages mostly only link to other trustworthy pages. </li></ul><ul id="1362e7d3-01e5-80ac-b4a2-f9468e025d2b" class="bulleted-list"><li style="list-style-type:disc">Spam pages mostly only link to other spam pages</li></ul><h3 id="1362e7d3-01e5-80ff-9e8d-ddb28534b7c1" class=""><strong>Picking Good Seeds</strong></h3><p id="1362e7d3-01e5-8068-947c-e2dbe4765123" class="">Need to pick seed pages that are highly likely to point to “most” of the other good pages: </p><ul id="1362e7d3-01e5-80ef-b5c4-cb46a51085a5" class="bulleted-list"><li style="list-style-type:disc">More <em>seed pages</em> ⇒ more time and effort needed to curate. </li></ul><ul id="1362e7d3-01e5-805c-899e-e6ea9c2e2582" class="bulleted-list"><li style="list-style-type:disc">Fewer seed pages ⇒ less trust there is in the system. <ul id="1362e7d3-01e5-8017-9b71-eeaf5343915c" class="bulleted-list"><li style="list-style-type:circle"> Threshold will need to be lower, more spam pages slip through </li></ul></li></ul><p id="1362e7d3-01e5-80f5-93b7-f93eb5391d32" class="">It would take to long to search through all pages for the seeds. Instead you could: </p><ol type="1" id="1362e7d3-01e5-8086-a26d-cf882ed402da" class="numbered-list" start="1"><li>Pick the top <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span><span>﻿</span></span> pages by Page Rank (assuming spam pages won’t be there), OR</li></ol><ol type="1" id="1362e7d3-01e5-80cb-99c7-e896deefc469" class="numbered-list" start="2"><li>Use Trusted Domains (e.g — .edu, .mil, .gov), OR</li></ol><ol type="1" id="1362e7d3-01e5-801b-9f21-dd9035e69482" class="numbered-list" start="3"><li>Can also <em><strong>Bootstrap</strong></em><strong> </strong><em><strong>Trust</strong></em><strong> </strong><em><strong>Rank</strong></em><em> </em>to go from just a small subset of trustworthy pages to a larger set.</li></ol><hr id="1362e7d3-01e5-8011-b592-d523828599d9"/><h3 id="1362e7d3-01e5-80ce-b0fb-f74ab70eee0f" class="">Bootstrapping Trust <em><strong>Rank</strong></em></h3><p id="1362e7d3-01e5-8033-a520-d056649be0ce" class="">Small seed set ⇒ </p><ul id="1362e7d3-01e5-8033-be83-f3ea8dd2584a" class="bulleted-list"><li style="list-style-type:disc">Miss a lot of trustworthy sites, OR</li></ul><ul id="1362e7d3-01e5-8067-81f2-e475b64c85d8" class="bulleted-list"><li style="list-style-type:disc">You’ll only catch a small number of spam farmers, OR</li></ul><ul id="1362e7d3-01e5-800d-bf8c-d752c949379c" class="bulleted-list"><li style="list-style-type:disc">Anything you find is probably pretty trustworthy</li></ul><p id="1362e7d3-01e5-8046-9562-efea587dc789" class=""><strong>Repeat: </strong></p><ol type="1" id="1362e7d3-01e5-80fa-914b-ddd3e130ec79" class="numbered-list" start="1"><li>Run PageRank </li></ol><ol type="1" id="1362e7d3-01e5-8093-b70c-ddabba704712" class="numbered-list" start="2"><li>Select top pages as seed (and verify trustworthiness) </li></ol><ol type="1" id="1362e7d3-01e5-8090-8694-ee5c218b1a4a" class="numbered-list" start="3"><li>Run TrustRank </li></ol><ol type="1" id="1362e7d3-01e5-80ad-9a69-cd157ad55f49" class="numbered-list" start="4"><li>Set threshold low enough to avoid <span style="border-bottom:0.05em solid">false positives</span> </li></ol><ol type="1" id="1362e7d3-01e5-803b-9675-d9cfdd1730c7" class="numbered-list" start="5"><li>Remove spam pages from graph </li></ol><h3 id="1362e7d3-01e5-800e-a597-f584aa7da79c" class="">Spam Mass</h3><p id="1362e7d3-01e5-80c8-97ad-c3e514c48db0" class="">Spam mass of page <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span></span><span>﻿</span></span>: </p><figure id="1362e7d3-01e5-80d0-a8f1-c84464f51352" class="equation"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>S</mi><mi>p</mi></msub><mo>=</mo><mfrac><msubsup><mi>r</mi><mi>p</mi><mo>−</mo></msubsup><msubsup><mi>r</mi><mi>p</mi><mo>+</mo></msubsup></mfrac></mrow><annotation encoding="application/x-tex">S_p=\frac{r_p^-}{r_p^+}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.6135em;vertical-align:-1.0691em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5444em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6973em;"><span style="top:-2.453em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.7731em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7713em;"><span style="top:-2.453em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">−</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.0691em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure><ul id="1362e7d3-01e5-80a0-a6bd-f7941d309b11" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>r</mi><mi>p</mi><mo>+</mo></msubsup></mrow><annotation encoding="application/x-tex">r_p^+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1544em;vertical-align:-0.3831em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7713em;"><span style="top:-2.453em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> : <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span></span><span>﻿</span></span>’s rank w’ only random jumps to <strong>trusted </strong>pages</li></ul><ul id="1362e7d3-01e5-8008-a3cb-f3acb1934133" class="bulleted-list"><li style="list-style-type:disc"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>r</mi><mi>p</mi><mo>−</mo></msubsup><mo>=</mo><msub><mi>r</mi><mi>p</mi></msub><mo>−</mo><msubsup><mi>r</mi><mi>p</mi><mo lspace="0em" rspace="0em">+</mo></msubsup></mrow><annotation encoding="application/x-tex">r_p^-=r_p-r_p^{+}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1544em;vertical-align:-0.3831em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7713em;"><span style="top:-2.453em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">−</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1544em;vertical-align:-0.3831em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7713em;"><span style="top:-2.453em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">+</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> : contribution of <strong>low-trust </strong>pages to <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span></span><span>﻿</span></span>’s rank. </li></ul><p id="1362e7d3-01e5-8039-ab50-e05f62acea1a" class="">
</p><p id="1362e7d3-01e5-8020-b137-c7e4a02f8a9f" class="">Essentially, it’s how much page rank would drop with only random teleports to trusted pages.  </p><p id="1362e7d3-01e5-806d-a8bf-f7212209194f" class="">⇒ The higher your Spam Mass, the more likely you are to be spam. </p><hr id="1362e7d3-01e5-8072-b49b-d029bc7c475e"/><h3 id="1362e7d3-01e5-80c0-9d85-e73801877b69" class="">Further Tweak </h3><p id="1362e7d3-01e5-8062-9109-cbf353e94583" class="">We can weight the amount of random teleport you get by your trust rank: <div class="indented"><p id="1362e7d3-01e5-809c-9ace-e1b26e681b67" class="">If a total of <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span></span><span>﻿</span></span> mass teleports, then: </p><ul id="1362e7d3-01e5-80f1-b8d6-e75df5ccd59f" class="bulleted-list"><li style="list-style-type:disc">Unweighted: Every source node gets <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mi mathvariant="normal">/</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">X/M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></span><span>﻿</span></span></li></ul><ul id="1362e7d3-01e5-8024-996b-d6fd611fb7e5" class="bulleted-list"><li style="list-style-type:disc">Weighted: source node <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">S_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> gets <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>i</mi></msub><mi>X</mi><mi mathvariant="normal">/</mi><mi>W</mi></mrow><annotation encoding="application/x-tex">w_iX/W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span></span><span>﻿</span></span> <ul id="1362e7d3-01e5-8016-9d53-cd0e3d98e134" class="bulleted-list"><li style="list-style-type:circle"><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mo>=</mo></mrow><annotation encoding="application/x-tex">W=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span></span></span></span></span><span>﻿</span></span> sum of all <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">w_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span></li></ul><ul id="1362e7d3-01e5-800f-b6fd-fe04a2336520" class="bulleted-list"><li style="list-style-type:circle">You can use regular Trust rank as the weights (recall, they add to 1) </li></ul></li></ul></div></p><p id="1362e7d3-01e5-80e6-a9c8-ebd5beafe674" class="">
</p><p id="1362e7d3-01e5-8024-9c8a-c31ee0e99230" class="">
</p><p id="1362e7d3-01e5-8047-9053-c181c6ff0783" class="">
</p><p id="1362e7d3-01e5-8064-971f-f62601a73661" class="">
</p></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>