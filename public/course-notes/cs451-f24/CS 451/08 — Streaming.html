<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>08 — Streaming</title><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/></head><body><article id="1452e7d3-01e5-80e3-a7da-e9860fd949af" class="page sans"><header><div class="page-header-icon undefined"><img class="icon" src="https://www.notion.so/icons/folder_purple.svg"/></div><h1 class="page-title">08 — Streaming</h1><p class="page-description"></p></header><div class="page-body"><p id="1452e7d3-01e5-80f1-b188-d89e37e90070" class=""><strong>Topic: </strong>beyond batch processing (streaming) </p><table id="1452e7d3-01e5-8033-9fb5-d9d5dcd1d1ff" class="simple-table"><thead class="simple-table-header"><tr id="2729be18-d9cf-4068-8149-3767c82f85f8"><th id="Zlgu" class="simple-table-header-color simple-table-header">Processing Typee</th><th id="GAW}" class="simple-table-header-color simple-table-header">Batch</th><th id="WIVB" class="simple-table-header-color simple-table-header">Stream</th></tr></thead><tbody><tr id="2d8e2225-76fd-44f3-99c0-9c6108caa43f"><td id="Zlgu" class="">Process</td><td id="GAW}" class="">All the data</td><td id="WIVB" class="">As data arrives</td></tr><tr id="4b5b5bec-434b-4ab1-82bc-0c875dc2ad99"><td id="Zlgu" class="">In</td><td id="GAW}" class="">Not real time </td><td id="WIVB" class="">Real Time </td></tr><tr id="1452e7d3-01e5-8014-8413-d0c28e31db07"><td id="Zlgu" class="">Latency</td><td id="GAW}" class="">High</td><td id="WIVB" class="">Low</td></tr></tbody></table><p id="1452e7d3-01e5-8052-a0f2-eafe4a8c2496" class="">Analysts also want real-time data (e.g. monitoring dashboards). </p><p id="1452e7d3-01e5-80f2-8855-e19a78442fac" class="">Example Use Cases: </p><ul id="1452e7d3-01e5-80ec-adec-c8cdf1b390e1" class="bulleted-list"><li style="list-style-type:disc">Credit cards – Identify fraud / identity theft </li></ul><ul id="1452e7d3-01e5-8063-a8c6-c1346a1975a6" class="bulleted-list"><li style="list-style-type:disc">Transportation – Rerouting vehicles – weather delays, road closures</li></ul><hr id="1452e7d3-01e5-8098-b28c-c9c8a752e211"/><h3 id="1452e7d3-01e5-8085-94f8-f5f39b086e3f" class=""><strong>Typical DataStream Pipeline</strong></h3><p id="1452e7d3-01e5-80a9-b9fa-f5be75be9e11" class="">Data stream flows into a Data Lake </p><figure id="1452e7d3-01e5-8051-bc60-eef3b1bdfa78" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-11-21_at_18.02.22.png"><img style="width:336px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-11-21_at_18.02.22.png"/></a></figure><ul id="1452e7d3-01e5-800b-8667-c5a3d3dcc48e" class="bulleted-list"><li style="list-style-type:disc">2 Main Data Brokers<ul id="1452e7d3-01e5-8015-8adb-d234d25c3dce" class="bulleted-list"><li style="list-style-type:circle"><strong>Kafka —</strong> Distributed pub-sub broker.</li></ul><ul id="1452e7d3-01e5-8050-be2a-d036f00bc438" class="bulleted-list"><li style="list-style-type:circle"><strong>Flume —  </strong>A distributed log aggregator; aggregate log files into a single file that can be streamed. </li></ul></li></ul><ul id="1452e7d3-01e5-809f-be32-d20f913483ef" class="bulleted-list"><li style="list-style-type:disc">Many options to handle data from the <span style="border-bottom:0.05em solid">brokers</span>:<ul id="15d2e7d3-01e5-80ca-97c2-c5e8db406536" class="bulleted-list"><li style="list-style-type:circle">Dump it straight to HDFS </li></ul><ul id="15d2e7d3-01e5-80af-a4bd-f2e91dacaedc" class="bulleted-list"><li style="list-style-type:circle">Handle it (as it comes) with<strong> Spark-Streaming</strong></li></ul><ul id="1452e7d3-01e5-803e-8d9b-d8a14883ffa4" class="bulleted-list"><li style="list-style-type:circle">Dump it to <strong>H-Base </strong>(database built-in to Hadoop)</li></ul><ul id="1452e7d3-01e5-8054-9ce1-c4fe4f540d9d" class="bulleted-list"><li style="list-style-type:circle">Feed it into another stream and then send that to other apps. </li></ul></li></ul><h3 id="1452e7d3-01e5-80f9-836a-cbedcd49bd34" class="">Data Stream </h3><p id="1452e7d3-01e5-8082-b1d6-f7f820453022" class="">A sequence of tuples</p><ul id="1452e7d3-01e5-8088-a6d7-c6d038dccaab" class="bulleted-list"><li style="list-style-type:disc">Ordered (either a timestamp, or implicitly by arrival time) </li></ul><ul id="1452e7d3-01e5-800f-8780-c2b15d369c44" class="bulleted-list"><li style="list-style-type:disc">Continuously arriving </li></ul><ul id="1452e7d3-01e5-8072-a9be-db1c2b4ff2f9" class="bulleted-list"><li style="list-style-type:disc">High volume (might not be possible to store/examine all of it</li></ul><ul id="1452e7d3-01e5-8099-a032-f3e593595d89" class="bulleted-list"><li style="list-style-type:disc">Rate is not consistent (might have <strong>surges</strong>) </li></ul><p id="1452e7d3-01e5-80f9-ac5b-d0d158a911b8" class=""><strong>How do you Process the Tuples</strong></p><p id="1452e7d3-01e5-8083-8796-e22d810fdf0b" class="">Processing is mostly the same as before(filter, map, aggregate with RDDs) </p><p id="1452e7d3-01e5-809e-80f2-ea5300afc6ab" class="">The problem is that the “reduce-like” tasks – grouping, aggregating, and joining – rely on having all of the data. </p><ul id="1452e7d3-01e5-8070-8c53-dde7bb9420b9" class="bulleted-list"><li style="list-style-type:disc">Grouping, aggregating — when to start and stop? </li></ul><ul id="1452e7d3-01e5-80c0-9d41-c4ad84f4512c" class="bulleted-list"><li style="list-style-type:disc">Joining Stream to Stream — how long do you wait for the corresponding key? </li></ul><p id="1452e7d3-01e5-809a-a57f-ffab1081793b" class="">Solutions… </p><p id="1452e7d3-01e5-8099-8618-f348075a621a" class=""><strong>Windows</strong></p><p id="1452e7d3-01e5-805c-838c-e8431b6c332e" class="">Do “reduce-like” transformations on discrete windows (continuous stream ⇒ discrete windows)</p><p id="1452e7d3-01e5-80e1-ba05-d9c12303c8b1" class="">Different ways to define: </p><ul id="1452e7d3-01e5-802e-b7b2-e2c10a524429" class="bulleted-list"><li style="list-style-type:disc">Time range (e.g. every 5s)</li></ul><ul id="1452e7d3-01e5-809a-853e-ee590471c405" class="bulleted-list"><li style="list-style-type:disc">Counts (e.g. every 10 items)</li></ul><ul id="1452e7d3-01e5-80c0-bd41-e0957f7a5d76" class="bulleted-list"><li style="list-style-type:disc">Patterns (e.g. Punctuation for text data)</li></ul><p id="1452e7d3-01e5-80e5-aef5-f51a63f88367" class=""><strong>2 Types </strong></p><ol type="1" id="1452e7d3-01e5-8037-84e7-c1722480c6d9" class="numbered-list" start="1"><li><strong>Sliding</strong><ul id="1452e7d3-01e5-807b-86e1-c1f4d8213052" class="bulleted-list"><li style="list-style-type:disc">Last minute of data, updated every 5 seconds</li></ul><ul id="1452e7d3-01e5-80c2-b4a4-e10c41d19914" class="bulleted-list"><li style="list-style-type:disc">Each window has most data in common with previous</li></ul><ul id="1452e7d3-01e5-807c-9727-feb35c046b07" class="bulleted-list"><li style="list-style-type:disc">Good for a viewing the moving average. </li></ul><ul id="1452e7d3-01e5-801c-9801-dd811fad2e1b" class="bulleted-list"><li style="list-style-type:disc">Can your operation be reversed — </li></ul><ul id="1452e7d3-01e5-8057-9140-d26c75294b59" class="bulleted-list"><li style="list-style-type:disc">Can you easily remove values and add others without a full recompute?</li></ul></li></ol><ol type="1" id="1452e7d3-01e5-803b-9eea-c1b1198caf18" class="numbered-list" start="2"><li><strong>Tumbling</strong><ul id="1452e7d3-01e5-8083-8e40-e05a2497d6d8" class="bulleted-list"><li style="list-style-type:disc">Last minute of data, updated every minute (e.g. slide window by length). </li></ul><ul id="1452e7d3-01e5-80d1-9e30-e09332c2f156" class="bulleted-list"><li style="list-style-type:disc">No data in common between windows</li></ul></li></ol><p id="1452e7d3-01e5-80dc-a2a4-ed635343225e" class=""><strong>Ordering Attributes</strong></p><p id="1452e7d3-01e5-8009-862a-d2bc76b2631f" class="">Assumes the existence of an attribute that defines the order of stream elements (e.g., time)</p><p id="1452e7d3-01e5-8019-a730-c3a16675e20d" class="">Let T be the window size in units of the ordering attribute</p><ul id="1452e7d3-01e5-80f1-91b8-d995b3920d28" class="bulleted-list"><li style="list-style-type:disc">Attribute = Time</li></ul><p id="1452e7d3-01e5-8007-8f95-cab2692fea64" class="">
</p><figure id="1452e7d3-01e5-800b-a65d-d1da5c72bc53" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-11-21_at_18.30.43.png"><img style="width:528px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-11-21_at_18.30.43.png"/></a></figure><ul id="1452e7d3-01e5-8065-8462-ea75a514cd58" class="bulleted-list"><li style="list-style-type:disc">Attribute = Count<figure id="1452e7d3-01e5-80f5-babb-d72973ad9fe0" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-11-21_at_18.31.37.png"><img style="width:528px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-11-21_at_18.31.37.png"/></a></figure><ul id="1452e7d3-01e5-80f5-8efd-d1f24bc08051" class="bulleted-list"><li style="list-style-type:circle">Pro: Each window takes same (known) amount of processing time. </li></ul><ul id="1452e7d3-01e5-80aa-934d-db0fe3d009d9" class="bulleted-list"><li style="list-style-type:circle">Con: Time between windows varies (bad for <strong>surges</strong>) <ul id="1452e7d3-01e5-8065-aea7-f475ed9830bc" class="bulleted-list"><li style="list-style-type:square">When stream is slow, windows are LONG </li></ul><ul id="1452e7d3-01e5-8075-8964-e3a9832ed71b" class="bulleted-list"><li style="list-style-type:square">When stream is fast, windows are very short</li></ul></li></ul></li></ul><hr id="1452e7d3-01e5-80b7-a5b5-cbfb76809c29"/><h3 id="1452e7d3-01e5-8035-bde2-d5a3cd3f3247" class=""><strong>Streaming Challenges </strong></h3><p id="1452e7d3-01e5-80a4-9bc5-d774abd3020f" class="">Inherent (any framework thats streaming over a network/cluster): </p><ul id="1452e7d3-01e5-802c-ad30-cd23e78926c7" class="bulleted-list"><li style="list-style-type:disc">Want “real-time” (low latency)</li></ul><ul id="1452e7d3-01e5-8008-88fd-c6d505835388" class="bulleted-list"><li style="list-style-type:disc">handle big streams (heavy memory requirements)</li></ul><p id="1452e7d3-01e5-80c9-9089-d40e6a829cd0" class="">Framework Specific: </p><ul id="1452e7d3-01e5-8053-bbe8-ec5e003d45b4" class="bulleted-list"><li style="list-style-type:disc">Bursty nature of streams</li></ul><ul id="1452e7d3-01e5-8096-a0bd-fd455aea61e6" class="bulleted-list"><li style="list-style-type:disc">Load Balancing streams / Clustering </li></ul><ul id="1452e7d3-01e5-8027-8ec9-e3cdc38cff4e" class="bulleted-list"><li style="list-style-type:disc">What is the order (e.g. each phone has its own time, how to sync up)? </li></ul><ul id="1452e7d3-01e5-80e4-b2cf-ef01225e8668" class="bulleted-list"><li style="list-style-type:disc">Consistency Choices (key challenge) <table id="1452e7d3-01e5-8046-9d93-e93b513bc443" class="simple-table"><tbody><tr id="59b4ee09-9db9-4e99-ba44-5c8e1eeb5033"><th id="MBh_" class="simple-table-header-color simple-table-header"><strong>At most once</strong></th><td id="ddW?" class="">easiest</td><td id="K~jG" class="">Every consumer will get a value from a producer at most once (but might not get it at all)</td></tr><tr id="47ff60d3-00e8-4ebc-a4cc-280430f0bcd9"><th id="MBh_" class="simple-table-header-color simple-table-header"><strong>At least once</strong></th><td id="ddW?" class="">medium</td><td id="K~jG" class="">Every consumer will get every value from a producer, but may receive duplicates.  Might be harmless if consumer can ignore duplicates</td></tr><tr id="e1f7458c-9f15-4d72-bba0-0c063bf54b51"><th id="MBh_" class="simple-table-header-color simple-table-header"><strong>Exactly once</strong></th><td id="ddW?" class="">hardest</td><td id="K~jG" class="">Every consumer will get every value from a producer, and will never get any duplicate</td></tr></tbody></table></li></ul><hr id="1452e7d3-01e5-8046-9129-c2381f52dc96"/><p id="1452e7d3-01e5-801c-afe2-d964d0d67b4d" class=""><strong>Case 1 — </strong>1 producer, 1 consumer </p><ul id="1452e7d3-01e5-80a1-8379-cf36d351b6e6" class="bulleted-list"><li style="list-style-type:disc"><strong>“Push” method</strong><figure id="1452e7d3-01e5-807f-b05b-d8847ca10e0c" class="image" style="text-align:center"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-11-21_at_18.41.27.png"><img style="width:288px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-11-21_at_18.41.27.png"/></a></figure><ul id="1452e7d3-01e5-802a-bde9-c3ad7a516059" class="bulleted-list"><li style="list-style-type:circle">Consumer: <ul id="15d2e7d3-01e5-8040-b979-dd47d49d290b" class="bulleted-list"><li style="list-style-type:square">subscribes </li></ul><ul id="15d2e7d3-01e5-80ca-a150-f6daac432f45" class="bulleted-list"><li style="list-style-type:square">no control of rate ⇒ (may need large buffer)</li></ul></li></ul><ul id="1452e7d3-01e5-8096-9442-e2622ef62a6e" class="bulleted-list"><li style="list-style-type:circle">Producers: <ul id="15d2e7d3-01e5-809f-be74-df090394ed75" class="bulleted-list"><li style="list-style-type:square">sends as it produces. </li></ul></li></ul></li></ul><ul id="1452e7d3-01e5-805a-8a5f-cb2723aa2ba9" class="bulleted-list"><li style="list-style-type:disc"><strong>“Pull” method </strong><figure id="1452e7d3-01e5-8043-8e22-ce298ed72c09" class="image" style="text-align:center"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-11-21_at_18.44.24.png"><img style="width:288px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-11-21_at_18.44.24.png"/></a></figure><ul id="1452e7d3-01e5-807b-b6c9-c8bed1333913" class="bulleted-list"><li style="list-style-type:circle">Consumer: <ul id="15d2e7d3-01e5-80c3-8377-db28ee2c81ad" class="bulleted-list"><li style="list-style-type:square">requests data from producer. </li></ul></li></ul><ul id="1452e7d3-01e5-80db-a282-f70e4195f165" class="bulleted-list"><li style="list-style-type:circle">Producer: <ul id="15d2e7d3-01e5-8039-8504-d471ae9faa3c" class="bulleted-list"><li style="list-style-type:square">sends what it has. </li></ul><ul id="15d2e7d3-01e5-8018-ba27-f125f8ae3fdc" class="bulleted-list"><li style="list-style-type:square">no control of rate (may need large buffer)</li></ul></li></ul></li></ul><p id="1452e7d3-01e5-8085-9c15-f935a53cde1e" class=""><strong>Case 2 — </strong><link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></span><span>﻿</span></span> producers, <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></span><span>﻿</span></span> consumers </p><figure id="1452e7d3-01e5-8019-b0b9-fde0c213b020" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-11-21_at_18.46.35.png"><img style="width:336px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-11-21_at_18.46.35.png"/></a></figure><ul id="15d2e7d3-01e5-80f4-be5b-c90e483e6867" class="bulleted-list"><li style="list-style-type:disc">Push: <ul id="15d2e7d3-01e5-8021-8b40-f70f900e5aca" class="bulleted-list"><li style="list-style-type:circle">Producer must buffer for the <strong>bottleneck </strong>consumer </li></ul></li></ul><ul id="1452e7d3-01e5-807d-87fe-d0c0e905bc34" class="bulleted-list"><li style="list-style-type:disc">Pull:<ul id="15d2e7d3-01e5-8088-a47c-e49a0a3e6372" class="bulleted-list"><li style="list-style-type:circle">Consumer must buffer for the <strong>bottleneck </strong>producer </li></ul></li></ul><p id="1452e7d3-01e5-80ac-8304-d8182e370c40" class="">Solution: </p><p id="1452e7d3-01e5-80af-a433-d11481e8ad90" class=""><strong>Middleware (data broker) </strong></p><figure id="1452e7d3-01e5-8078-93d4-f236e6c3e6bf" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-11-21_at_18.48.47.png"><img style="width:384px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-11-21_at_18.48.47.png"/></a></figure><p id="1452e7d3-01e5-80a7-a112-cdf5fa881ad4" class="">Approaches: </p><ol type="1" id="1452e7d3-01e5-80f5-a8a3-f9370ed36ba5" class="numbered-list" start="1"><li><strong>Pub</strong>/<strong>Sub</strong> <strong>Queue</strong> <p id="1452e7d3-01e5-80e2-8a6c-f7186b20dd1f" class="">Producers <span style="border-bottom:0.05em solid">publish</span> to the broker (on a given <strong>topic</strong>), broker <span style="border-bottom:0.05em solid">queues</span> it up for consumption. Consumers <span style="border-bottom:0.05em solid">subscribe</span> to topics. </p><ul id="1452e7d3-01e5-8032-8c1d-f67a9bf54cf1" class="bulleted-list"><li style="list-style-type:disc">Pro: Consumers get data when available </li></ul><ul id="1452e7d3-01e5-8028-b1b5-faa09635de00" class="bulleted-list"><li style="list-style-type:disc">Broker does not retain data<p id="1452e7d3-01e5-8056-b1b8-f1f399f15a36" class="">⇒ con: if consumer loses connection, data is lost</p></li></ul></li></ol><ol type="1" id="1452e7d3-01e5-802f-9dd4-ee884ff233db" class="numbered-list" start="2"><li><strong>Pub/Poll</strong><p id="1452e7d3-01e5-80c8-916c-c1dfbfc6cdcb" class="">Producers <span style="border-bottom:0.05em solid">publish</span> to the broker, consumers pull from the broker <strong>as needed</strong>. </p><ul id="1452e7d3-01e5-8045-b023-e3c7559a95a2" class="bulleted-list"><li style="list-style-type:disc">Broker retains messages (as long as it can). </li></ul><ul id="1452e7d3-01e5-80e0-9b13-d24cfa37aa08" class="bulleted-list"><li style="list-style-type:disc">Broker does the buffering <p id="1452e7d3-01e5-806e-8b7b-d630c5cbd61b" class="">⇒ Pro: Broker doesn’t need to worry about spotty connections by consumers.  When your phone has internet again, it will ask for updates.</p></li></ul><ul id="1452e7d3-01e5-8004-82cc-c4b718bf9a20" class="bulleted-list"><li style="list-style-type:disc">Con:  frequent polling for infrequently arriving data is wasteful</li></ul></li></ol><h3 id="1452e7d3-01e5-80cc-8b3a-fefdbe665f45" class="">Spark Streaming </h3><p id="1452e7d3-01e5-807c-b919-c7c051148591" class=""><em><mark class="highlight-gray"><strong>A Stream Processing Framework </strong></mark></em></p><ul id="1452e7d3-01e5-800c-8ef6-f24551ac2436" class="bulleted-list"><li style="list-style-type:disc">Discrete Streams (<strong>D-Stream</strong>) — sequence of RDDs representing a stream of data <ul id="1452e7d3-01e5-8037-828d-c1bda5cd41fa" class="bulleted-list"><li style="list-style-type:circle">turns continuous stream of data into batches; <strong>Tumbling Window </strong>(typically t=1 second). </li></ul><ul id="1452e7d3-01e5-8099-9362-c2804d321ca8" class="bulleted-list"><li style="list-style-type:circle"> Every <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span></span><span>﻿</span></span> seconds collect all data into an RDD </li></ul></li></ul><ul id="1452e7d3-01e5-809c-81d5-dc584b278374" class="bulleted-list"><li style="list-style-type:disc">A DStream has the RDD transforms It also has its own transforms and actions<ul id="1462e7d3-01e5-80b9-986d-cca9b4acc803" class="bulleted-list"><li style="list-style-type:circle"><strong>Transformations</strong> – modify data from on DStream to another <ul id="1462e7d3-01e5-807b-9963-e5ea19588e20" class="bulleted-list"><li style="list-style-type:square">Standard RDD operations – <code>map</code>, <code>countByValue</code>, <code>reduce</code>, <code>join</code>, … <ul id="1462e7d3-01e5-804e-93cc-dcd970265341" class="bulleted-list"><li style="list-style-type:disc"><code>map(...)</code> calls <code><a href="http://RDD.map">RDD.map</a></code> any time a new RDD is available from the stream. </li></ul><ul id="1462e7d3-01e5-802f-a0a7-e3e89fcc7fa2" class="bulleted-list"><li style="list-style-type:disc"><code>reduce</code>, <code>countByValue</code>, … isn’t returned to the driver since data keeps coming in (unbounded amount of times that reduce runs). So <code>reduce</code> is a transformation <strong>to another </strong>; it stays in the cluster, and does not go to the driver (unlike regular RDD’s) </li></ul></li></ul><ul id="1462e7d3-01e5-8020-8cc9-ccd5d0ad5396" class="bulleted-list"><li style="list-style-type:square">Stateful operations <ul id="1462e7d3-01e5-8093-88d7-f880e1f75be3" class="bulleted-list"><li style="list-style-type:disc"><code>window</code>: time-based union (of all data in time window)</li></ul><ul id="1462e7d3-01e5-80ec-88b3-fb048850b73b" class="bulleted-list"><li style="list-style-type:disc"> <code>countByValueAndWindow</code> </li></ul></li></ul></li></ul><ul id="1462e7d3-01e5-804a-800d-f79f38dcb25a" class="bulleted-list"><li style="list-style-type:circle"><strong>Output Operations</strong> – send data to external entity saveAsHadoopFiles – saves to HDFS </li></ul></li></ul><p id="1462e7d3-01e5-80f3-90fe-e28cf623088f" class=""><strong>Spark Streaming Context </strong></p><ul id="1462e7d3-01e5-805b-a2d2-edbf46571ea3" class="bulleted-list"><li style="list-style-type:disc">Usually a variable called <code>ssc</code>. Can be used to create DStreams</li></ul><ul id="1462e7d3-01e5-8092-aaf2-defb197e6bda" class="bulleted-list"><li style="list-style-type:disc">Specify the time slice when creating (Default is 1 s) </li></ul><figure id="1462e7d3-01e5-80f7-a7cf-ca576b5704c3" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-11-21_at_19.04.34.png"><img style="width:288px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-11-21_at_19.04.34.png"/></a></figure><details open=""><summary style="font-weight:600;font-size:1.25em;line-height:1.3;margin:0"><mark class="highlight-purple">Demos (Spark Streaming) </mark></summary><div class="indented"><p id="15d2e7d3-01e5-8088-a5e7-d7a085d22ae9" class="">Goal: counting</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15d2e7d3-01e5-804e-8c97-ddcb0442cd60" class="code"><code class="language-Python"># create &#x27;ssc&#x27;
tweets = ssc.receiverStream(TweetReceiver(username,password))
# tweets is a D-Stream, giving you all tweets coming in in &quot;real-time&quot;
hashtags = tweets.flatMap(getTags) # flatMap applied to each batch RDD when they arrive (extracts hashtags)
hashtags.saveAsHadoopFiles(…) # RDDs saved to HDFS as they’re created
# &lt;- on HDFS we have files of hash tags.
# &quot;Real-time&quot; but there is a 1s delay for windowing

counts =
#                 width      slide amount
hashTags.window(Minutes(10), Seconds(1)) # all 1s windows get combined
.countByValue() # count in the last 10 minutes

# But this combines 600 RDDs, instead:
counts = hashTags.countByValueAndWindow(Minutes(10), …)

# Generalized counting:
hashtags.reduceByKeyAndWindow(_ + _, _ - _, Minutes(10), Seconds(1))
# need to specify a subtract function for counting</code></pre><ul id="15d2e7d3-01e5-80ac-83c0-cf270a759a8b" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-red"><code>saveAsHadoopFiles</code></mark><mark class="highlight-red"> </mark>is a <strong>Sink </strong>not an <em>action</em>; since it only runs when RDDs arrive. </li></ul><ul id="15d2e7d3-01e5-80be-a253-ebfb54500e44" class="bulleted-list"><li style="list-style-type:disc">All windows all get unionized by <code>.window</code>, and then <code>countByValue()</code> occurs </li></ul><ul id="15d2e7d3-01e5-80c9-a7e4-c432e9bc411a" class="bulleted-list"><li style="list-style-type:disc"><code>countByValueAndWindow</code><ul id="8d7874ac-7054-44cf-b0cd-48a3081b3261" class="bulleted-list"><li style="list-style-type:circle">for each RDD, creates RDD for counts and caches it (avoids repeated calculations). </li></ul><ul id="4faac2ec-a826-4582-9231-ffcaf51c0f91" class="bulleted-list"><li style="list-style-type:circle">how? newCount = prev count - 1st count + last count</li></ul></li></ul><p id="1512e7d3-01e5-8064-a548-f74b95812439" class="">Goal: compute sum </p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1512e7d3-01e5-8081-94c7-dc130426ab0c" class="code"><code class="language-Scala">// Create streaming context
val ssc = new StreamingContext(sc, Seconds(1))
	// 1 second batch size

// Turn checkpointing on: Makes sure Window operation is efficient
ssc.checkpoint(&quot;./checkpoint&quot;)
	// saves values to file

// Create first D-Stream
val lines = ssc.socketTextStream(&quot;localhost&quot; 4321)
	// grabs text from TCB socket, split on new lines.

// Turn into a Pair RDD
val pairs = lines.map(line =&gt; {
val toks = line.split(&quot;\\t&quot;)
(toks(0), toks(1).toLong)       //string, long integer (for rand number)

// If you just do this:
pairs.reduceByKey(...)
// you would get an RDD every 1 second

// Give it forward operation and inverse, since we have checkpointing
val sums = pairs.reduceByKeyAndWindow(+, -, Seconds(5))
	// args: (forward-op, backward-op, window width)
	// gives 1 RDD every 5 seconds (30 seconds of data each since sliding window)

// Save to file
sums.saveAsTextFiles(&quot;num-sums&quot;)

// Or you could print as they show up:
// sink (not an action): when stream begins, as RDD&#x27;s are generated, save them
sums.foreachRDD(rdd =&gt; {
	println(&quot;--------&quot;)
	for ((k,sum) &lt;- rdd.collectAsMap)
		println(f&quot;$k = $sum&quot;)
})
// now have 2 sink&#x27;s connected

//Run
ssc.start</code></pre><figure class="block-color-default_background callout" style="white-space:pre-wrap;display:flex" id="1512e7d3-01e5-8072-840a-c3831c7b9590"><div style="font-size:1.5em"><img class="icon" src="https://www.notion.so/icons/exclamation-mark_gray.svg"/></div><div style="width:100%"><p id="87198f0e-a7bc-4773-aa21-389b219adb9b" class=""><strong>Sink </strong></p><ul id="1512e7d3-01e5-8098-ad57-e16ebce2e353" class="bulleted-list"><li style="list-style-type:disc">Not an action</li></ul><ul id="1512e7d3-01e5-806b-83f7-e122007142bc" class="bulleted-list"><li style="list-style-type:disc">Runs every time an RDD shows up </li></ul></div></figure></div></details><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1512e7d3-01e5-804b-bc05-c26bbd0fe610"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%"><p id="0c959cc8-ec43-48b0-aa3a-36533111f0a5" class=""><strong>A7 Hint</strong></p><p id="1512e7d3-01e5-8009-ad6f-f317450e06f8" class="">On last part of last question: </p><ul id="1512e7d3-01e5-8045-b009-f268c969b178" class="bulleted-list"><li style="list-style-type:disc">When it says” Change from 1 hour window to 10 min window.”</li></ul><ul id="1512e7d3-01e5-8055-874f-fbe5e518a9d5" class="bulleted-list"><li style="list-style-type:disc">In the current code: after 24 windows passed, terminate program</li></ul><ul id="1512e7d3-01e5-800b-965f-da2fc6976ce8" class="bulleted-list"><li style="list-style-type:disc">But if your dealing w’ 24 hours of data and 10 minute windows ⇒ dont have to wait for 24 windows. Have to wait for 12 x 12 = 144</li></ul></div></figure><hr id="1512e7d3-01e5-80d5-978f-d4244f59245e"/><h3 id="1462e7d3-01e5-8054-8dc5-cf8780a2e960" class="">Data Brokers </h3><p id="1462e7d3-01e5-809d-9496-fdcc61ba7ea8" class="">Two popular ones are <span style="border-bottom:0.05em solid">Kafka</span> and <span style="border-bottom:0.05em solid">Flume</span> </p><ul id="1462e7d3-01e5-802f-9a4d-f71bd4b87086" class="bulleted-list"><li style="list-style-type:disc">Flume is specifically for log aggregation, not general purpose </li></ul><ul id="1462e7d3-01e5-80be-aae7-f3d2788c7a73" class="bulleted-list"><li style="list-style-type:disc">Kafka is general purpose.</li></ul><h3 id="1462e7d3-01e5-809b-8ec1-f2d94e8615b7" class="">Kafka (in more detail)</h3><ul id="1512e7d3-01e5-80a6-9977-ed5485da3acc" class="bulleted-list"><li style="list-style-type:disc">Very Fast: <ul id="1512e7d3-01e5-8015-8b06-fc2abaf33425" class="bulleted-list"><li style="list-style-type:circle">since all writes go to RAM (cache, not disk)</li></ul><ul id="1512e7d3-01e5-8017-b05e-cd1c0183a5a3" class="bulleted-list"><li style="list-style-type:circle">cache ⇒ faster read/write </li></ul></li></ul><figure id="1512e7d3-01e5-80ef-a5f6-d29c6bd39014" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.00.54.png"><img style="width:336px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.00.54.png"/></a></figure><ul id="1512e7d3-01e5-8065-a758-ddb5fe476100" class="bulleted-list"><li style="list-style-type:disc">Kafka = cluster of machines (Brokers)</li></ul><ul id="1512e7d3-01e5-80f1-8fbc-efbaaaefad60" class="bulleted-list"><li style="list-style-type:disc">Every message comes with a <strong>topic</strong> (just a string)</li></ul><ul id="1512e7d3-01e5-8073-9eb0-c87a24cc5e8c" class="bulleted-list"><li style="list-style-type:disc"><strong>Topics are partitioned</strong></li></ul><ul id="1512e7d3-01e5-80f9-8df5-f9cc7684ad34" class="bulleted-list"><li style="list-style-type:disc">Kafka does <strong>partioning</strong> by <strong>message</strong> (not <strong>topic</strong>), every broker has every topic. for a given topic, every broker will have some of the msgs for that topic.</li></ul><ul id="1512e7d3-01e5-8034-8999-c126129e1318" class="bulleted-list"><li style="list-style-type:disc">Producer picks how to partition. e.g. which key goes to which</li></ul><ul id="1512e7d3-01e5-806a-a011-caf0aa5bcd7d" class="bulleted-list"><li style="list-style-type:disc">Uses push/pull: consumes decide when to ask for more, producer pushes what it has.<ul id="1512e7d3-01e5-802c-817a-f3a0a7c4e40e" class="bulleted-list"><li style="list-style-type:circle">thats why kafka needs files, in case consumers are overloaded and can&#x27;t keep up.</li></ul></li></ul><ul id="1512e7d3-01e5-80a5-b184-cd82f5c0d496" class="bulleted-list"><li style="list-style-type:disc">TTL (time to live): expiry date for messages to be retained.</li></ul><figure id="1512e7d3-01e5-80d5-a760-dbf1071ddc2c" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.16.38.png"><img style="width:288px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.16.38.png"/></a><figcaption>colors = <strong>partitions</strong>. bold box = primary, else follower (e.g. broker 2 is the follower for the orange partition). </figcaption></figure><p id="1512e7d3-01e5-80a3-9687-fb996c5d2284" class="">As msgs arrived, appended to end of the <strong>file for that topic</strong> (the partition). Dont know what order producer sent them in (i.e: blue, orange, green, …). ⇒ <strong>Partitions</strong> are totally ordered, but <strong>topics</strong> are not. </p><figure id="1512e7d3-01e5-8035-ad7b-e4469aff73b5" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.20.31.png"><img style="width:192px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.20.31.png"/></a></figure><p id="1512e7d3-01e5-8076-bbaf-e896380d3e66" class="">Use <strong>keys</strong> what if you want <strong>in order</strong> delivery: </p><ul id="1512e7d3-01e5-8058-ab68-e35b5d188213" class="bulleted-list"><li style="list-style-type:disc">Within a given partition of a topic msgs stored in ordered they were delivered (for each topic)</li></ul><ul id="1512e7d3-01e5-80f1-bfe5-c1179e76b388" class="bulleted-list"><li style="list-style-type:disc">if msgs have a key, and your partioning by hashing by said key, you ARE guaranteed to have them being in same order they arrived. without such a key, no guarantee.</li></ul><hr id="1512e7d3-01e5-8046-bde2-df609a8dd3b8"/><p id="1512e7d3-01e5-80c3-b315-d1fd535ef044" class="">What if we have too much data (streaming cant keep up during a surge)?</p><ul id="1512e7d3-01e5-8069-965b-ca16ba141f65" class="bulleted-list"><li style="list-style-type:disc">i.e. if you get a 50x surge, no point in upgrading hardware for a rare occurence.</li></ul><ul id="1512e7d3-01e5-80ac-ab4f-f4abccdf0b29" class="bulleted-list"><li style="list-style-type:disc">instead, <strong>do it through software (algorithms)</strong></li></ul><p id="1512e7d3-01e5-800e-a207-d6272141c725" class="">Say we&#x27;ve determine spark program can handle <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></span><span>﻿</span></span> msgs before it takes more time to handle a window than the time of each window ⇒ Want it so that each RDD has a max. of <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></span><span>﻿</span></span> items.</p><ul id="1512e7d3-01e5-80c9-8052-eb3d2f0de04f" class="bulleted-list"><li style="list-style-type:disc">Dont want a hard limit, that throws the rest in trash (but we don’t want correlated errors; ie: relate messages are all thrown away). </li></ul><p id="1512e7d3-01e5-80bf-96df-e410b48c943b" class="">Better: if we receive <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>&gt;</mo><mi>s</mi></mrow><annotation encoding="application/x-tex">n &gt; s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></span><span>﻿</span></span> msgs, they all have same probabbility <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi mathvariant="normal">/</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">S/n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord">/</span><span class="mord mathnormal">n</span></span></span></span></span><span>﻿</span></span> of being kept</p><ul id="1512e7d3-01e5-8099-a1f3-da8bcc252ece" class="bulleted-list"><li style="list-style-type:disc">BUT we dont know n ahead of time</li></ul><h3 id="1512e7d3-01e5-802e-84e9-ff6377a20238" class=""><strong>Reservoir Sampling</strong></h3><ul id="1512e7d3-01e5-80fc-8e85-c856fad9895f" class="bulleted-list"><li style="list-style-type:disc">Our buffer becomes a reservoir </li></ul><ul id="1512e7d3-01e5-800b-bbd4-e1c0476e5d27" class="bulleted-list"><li style="list-style-type:disc">Decide that its size is <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span></span><span>﻿</span></span> (max to hold)</li></ul><ul id="1512e7d3-01e5-80e7-a9ca-d1a6a4c271ea" class="bulleted-list"><li style="list-style-type:disc">if <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>&gt;</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">N &gt; S </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span></span><span>﻿</span></span> arrive, each has same prob S/N of being in reservoir.</li></ul><ul id="1512e7d3-01e5-8084-91be-f4559180d8a5" class="bulleted-list"><li style="list-style-type:disc">Algorithm: <ul id="1512e7d3-01e5-809c-a78f-f2f5ee5bfd85" class="bulleted-list"><li style="list-style-type:circle">if not full: put in buffer</li></ul><ul id="1512e7d3-01e5-80db-b4dc-ca8b476f0a46" class="bulleted-list"><li style="list-style-type:circle">else: <ul id="1512e7d3-01e5-8026-b919-f3243bb39679" class="bulleted-list"><li style="list-style-type:square">if receive msg K, with K &gt; S, then keep it with probability <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi mathvariant="normal">/</mi><mi>k</mi></mrow><annotation encoding="application/x-tex">s/k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span><span>﻿</span></span> and randomly discard one of existing <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span></span><span>﻿</span></span> msgs. </li></ul></li></ul></li></ul><ul id="1512e7d3-01e5-8098-971e-da71f9139aae" class="bulleted-list"><li style="list-style-type:disc">e.g. <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>=</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">S=10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span></span></span></span></span><span>﻿</span></span><ul id="1512e7d3-01e5-804d-bbe2-c10736acf3ee" class="bulleted-list"><li style="list-style-type:circle">11th item is kept with <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo>=</mo><mn>10</mn><mi mathvariant="normal">/</mi><mn>11</mn></mrow><annotation encoding="application/x-tex">P=10/11</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">10/11</span></span></span></span></span><span>﻿</span></span></li></ul><ul id="1512e7d3-01e5-80f3-be26-f452fcbaa19e" class="bulleted-list"><li style="list-style-type:circle">12th item is kept with <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo>=</mo><mn>10</mn><mi mathvariant="normal">/</mi><mn>12</mn></mrow><annotation encoding="application/x-tex">P=10/12</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">10/12</span></span></span></span></span><span>﻿</span></span></li></ul></li></ul><ul id="1512e7d3-01e5-8022-a93f-c82eb6df407e" class="bulleted-list"><li style="list-style-type:disc">Claim: for <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>&gt;</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">k&gt;S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span></span><span>﻿</span></span>, all values <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>1</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>v</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">v_1,...,v_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> have prob. <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span></span><span>﻿</span></span> of being in the reservoir</li></ul><p id="1512e7d3-01e5-805c-8acc-f8fafc4c5f7d" class="">
</p><hr id="1512e7d3-01e5-8051-ad19-dc6f875d6c4f"/><p id="1512e7d3-01e5-80ed-87ff-c4700a1c12d2" class="">That was for the situation when broker can keep up with data-rate, sacrifice some messages. We could also look to store all the data. Might not be possible if we run into too many things</p><p id="1512e7d3-01e5-80dc-a709-c1a9f65490e8" class="">We will consider 3 different Structures</p><h3 id="1512e7d3-01e5-80c8-a138-f09cc805c59c" class="">1. Hashing </h3><p id="1512e7d3-01e5-80c6-acef-e5e1b0c0a065" class="">e.g. for dealing with strings</p><p id="15d2e7d3-01e5-802b-a1a9-db4efe2d10e2" class="">make a hash set, add strings when you see them </p><p id="1512e7d3-01e5-80d2-b571-cf6d75697947" class="">Use hashing to estimate, for example: </p><ul id="1512e7d3-01e5-80fe-8ba3-cf7f9f06af2a" class="bulleted-list"><li style="list-style-type:disc"><strong>cardinality: </strong>e.g. how many unique items (e.g. strings) have you seen? </li></ul><ul id="1512e7d3-01e5-8099-b6a5-f5f9fe3e4a53" class="bulleted-list"><li style="list-style-type:disc"><strong>membershit: </strong>Is the item a member of the multiset? OR</li></ul><ul id="1512e7d3-01e5-8072-9dc7-d8689a7fd10a" class="bulleted-list"><li style="list-style-type:disc">How often does item appear in the multise (e.g. map keys to counts). </li></ul><p id="1512e7d3-01e5-8052-953f-eaa655f4989a" class="">Not good for many strings =&gt; too big of a hash table =&gt; costly to search through  </p><h3 id="1512e7d3-01e5-8009-b5e0-da0e52b6f18d" class="">2. HyperLogLog Counter (HLL)</h3><p id="1512e7d3-01e5-8012-b2de-d6822914c0e6" class="">best sol&#x27;n for <strong>cardinality</strong> (want to know how many unique thing we&#x27;ve seen)</p><ul id="1512e7d3-01e5-80ef-a411-f3b861f7a2c8" class="bulleted-list"><li style="list-style-type:disc">good hash function means: random key =&gt; uniform chance<ul id="1512e7d3-01e5-80c5-b6d1-fe5aa201e560" class="bulleted-list"><li style="list-style-type:circle">half of all starts with 0, 1/4 start with 00, ...</li></ul></li></ul><ul id="1512e7d3-01e5-80fa-aaaf-d190678bb17d" class="bulleted-list"><li style="list-style-type:disc">if observed <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>x</mi></msup></mrow><annotation encoding="application/x-tex">2^x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span> things, the largest # of leading zeroes is EXPECTED to be x.<ul id="1512e7d3-01e5-802a-850f-fc57e45ce106" class="bulleted-list"><li style="list-style-type:circle">so ONLY need to keep track of # of leading zeroes, to know how many unique things (approx.), its 2^x</li></ul><ul id="1512e7d3-01e5-8090-b86e-ff37842c9cf9" class="bulleted-list"><li style="list-style-type:circle">so we&#x27;re essentially tracaking log_2 of the # unique things we&#x27;ve seen =&gt; exponential space saving</li></ul></li></ul><ul id="1512e7d3-01e5-809d-88d4-fe567af46c40" class="bulleted-list"><li style="list-style-type:disc">Again, relies on the key uniform assumption of the hash function</li></ul><p id="1512e7d3-01e5-8018-9ce2-e7b09aeec9f1" class="">Example: </p><ul id="1512e7d3-01e5-802f-8baf-c81b607fd111" class="bulleted-list"><li style="list-style-type:disc">&quot;Hello, wor;d!&quot;.hashCode = 1... (hashcode) =&gt; no leading 1&#x27;s =&gt; seen 2^0 = 1 diff. things</li></ul><ul id="1512e7d3-01e5-80ea-bd1a-e8f86c7f7bc2" class="bulleted-list"><li style="list-style-type:disc">&quot;hello, world!&quot; = 0110... =&gt; 1 leading 0 =&gt; seen 2^1 = 2 diff. things</li></ul><ul id="1512e7d3-01e5-8064-a8c5-e3e2a0d6ba0c" class="bulleted-list"><li style="list-style-type:disc">&quot;D&quot; = 0000...</li></ul><h3 id="1512e7d3-01e5-80fa-bd02-cc7fc84b4982" class="">3. Bloom Filters</h3><p id="1512e7d3-01e5-801c-8985-c620033a166b" class="">Problem: </p><ul id="1512e7d3-01e5-809b-8242-f891dcdfe432" class="bulleted-list"><li style="list-style-type:disc">Set is too large to hold, want to know if it contains X</li></ul><ul id="1512e7d3-01e5-80c4-be40-cee11d7d7c4f" class="bulleted-list"><li style="list-style-type:disc">Again, assume getting to many values to throw into hash table.</li></ul><ul id="1512e7d3-01e5-8038-b4b5-f436e9fbd242" class="bulleted-list"><li style="list-style-type:disc">Want to know: have we seen <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span></span><span>﻿</span></span> before?</li></ul><p id="1512e7d3-01e5-805b-a08c-f59d3a503559" class="">Solution: </p><ul id="1512e7d3-01e5-80c2-b2de-d45b0da200ee" class="bulleted-list"><li style="list-style-type:disc">a <strong>bit-vector of m bits, and k unique (randomly generated) hash functions</strong></li></ul><p id="1512e7d3-01e5-80ec-b76b-f7113d8b65c8" class="">Example: m=12, k=3</p><figure id="1512e7d3-01e5-8066-8027-e1d60f9a8b96" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.45.40.png"><img style="width:336px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.45.40.png"/></a></figure><ul id="1512e7d3-01e5-802d-8593-c5bf024dddc0" class="bulleted-list"><li style="list-style-type:disc">set bits 2,5, 11 (stays a 1 forever) </li></ul><ul id="1512e7d3-01e5-80d6-a670-f776a3f70b41" class="bulleted-list"><li style="list-style-type:disc">To check if bloom filter contains a particular key, <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span><span>﻿</span></span><ul id="1512e7d3-01e5-80ac-adb4-fb48c95f84de" class="bulleted-list"><li style="list-style-type:circle">hash with the k hash functions ⇒ 3 indices into the bloom filter </li></ul><ul id="1512e7d3-01e5-805a-b657-f8566b63cb0a" class="bulleted-list"><li style="list-style-type:circle">all are 1 ⇒ We’ve seen <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span><span>﻿</span></span></li></ul><ul id="1512e7d3-01e5-8023-8699-d8b7a54ab863" class="bulleted-list"><li style="list-style-type:circle">any are <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span><span>﻿</span></span> ⇒ haven’t seen <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span><span>﻿</span></span><ul id="1512e7d3-01e5-8026-aaef-ce05e1dc9922" class="bulleted-list"><li style="list-style-type:square">⇒ <strong>no false negatives</strong>, but<strong> false positive is possible </strong></li></ul></li></ul></li></ul><figure id="1512e7d3-01e5-803f-8ea3-d2577bc9776c" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.48.57.png"><img style="width:336px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.48.57.png"/></a></figure><figure id="1512e7d3-01e5-80b9-8f0c-cb7590aa7ed2" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.49.21.png"><img style="width:432px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.49.21.png"/></a></figure><ul id="1512e7d3-01e5-803c-9f24-e6f96c9d40e0" class="bulleted-list"><li style="list-style-type:disc">false positives: <ul id="1512e7d3-01e5-807e-b0f3-eefcfa90068d" class="bulleted-list"><li style="list-style-type:circle">more unique elements seen ⇒ more bits set to 1 </li></ul><ul id="1512e7d3-01e5-8065-aa88-eeb48fb82c85" class="bulleted-list"><li style="list-style-type:circle">says you&#x27;ve seen x when you havent (all k bits were all set by a diff key; prob of this is the % of bits that have been set to 1 (p) to the k =&gt; p^k (empty =&gt; 0, full =&gt; 1). p (approx)= m/(n*k)</li></ul></li></ul><ul id="1512e7d3-01e5-8085-aabe-db2e6773d316" class="bulleted-list"><li style="list-style-type:disc">Can tune false positive rate by adjusting values for m and k<ul id="1512e7d3-01e5-80be-82a2-f0b03ce419be" class="bulleted-list"><li style="list-style-type:circle">more hash functions (bigger <link rel="stylesheet" type="text/css" href="../../notion_styles.css"/><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span><span>﻿</span></span>) ⇒ less likely to get FP for given level of full’ness </li></ul></li></ul><h3 id="1512e7d3-01e5-8004-b994-e4515c897223" class="">4. Count-Min Sketch </h3><p id="1512e7d3-01e5-8023-b7b6-fd53555c6000" class="">Counting the frequency of a value X within a multiset</p><ul id="1512e7d3-01e5-80f0-9ca9-eec68c946617" class="bulleted-list"><li style="list-style-type:disc">now m = # counters. k = hash functions</li></ul><ul id="1512e7d3-01e5-80ba-84c4-ddc7de89023a" class="bulleted-list"><li style="list-style-type:disc">&quot;count-min&quot; - count across all counters, and take minimum</li></ul><p id="1512e7d3-01e5-8074-b201-f3bc8525a418" class="">
</p><figure id="1512e7d3-01e5-802d-9f55-d01fb4645711" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.53.07.png"><img style="width:192px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.53.07.png"/></a></figure><figure id="1512e7d3-01e5-8075-b82c-d5bb433d317f" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.53.29.png"><img style="width:192px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.53.29.png"/></a></figure><figure id="1512e7d3-01e5-8010-9667-e4f866807d8b" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.54.13.png"><img style="width:192px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.54.13.png"/></a></figure><figure id="1512e7d3-01e5-80fc-bfff-e9bb861d3f1b" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.54.23.png"><img style="width:240px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.54.23.png"/></a></figure><figure id="1512e7d3-01e5-8097-916a-d8afc101fa1c" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.54.27.png"><img style="width:240px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.54.27.png"/></a></figure><figure id="1512e7d3-01e5-80d4-9685-ceed495cb790" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.54.42.png"><img style="width:240px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.54.42.png"/></a></figure><figure id="1512e7d3-01e5-8085-9f0a-d727e0ec489a" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.54.46.png"><img style="width:192px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.54.46.png"/></a></figure><figure id="1512e7d3-01e5-8037-bd06-f60d9d16c59e" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.54.49.png"><img style="width:192px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.54.49.png"/></a></figure><figure id="1512e7d3-01e5-80ff-a16a-fe04069cfbc4" class="image"><a href="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.54.52.png"><img style="width:192px" src="08%20%E2%80%94%20Streaming/Screenshot_2024-12-02_at_20.54.52.png"/></a><figcaption>some cases where collides, some dont</figcaption></figure><ul id="1512e7d3-01e5-8068-9a4d-d9f360693c92" class="bulleted-list"><li style="list-style-type:disc">answer = seen 2 x&#x27;s and 1y</li></ul><ul id="1512e7d3-01e5-8066-b66e-cade4a28e49c" class="bulleted-list"><li style="list-style-type:disc">note: the count it gives you is an upper bound (guaranteed to not have seen it more than that)</li></ul></div></article><span class="sans" style="font-size:14px;padding-top:2em"><hr/><details open="" style="padding-top:1em"><summary style="font-weight:600;font-size:1.25em;line-height:1.3;margin:0">Inline comments</summary><div class="indented"><div><p style="padding:0.2em"><b>Block text</b>: <mark class="highlight-yellow_background"><strong>Pub/Poll</strong></mark></p><ul class="toggle"><li><div><span class="user" style="padding:0.2em"><img src="https://lh3.googleusercontent.com/a/ALm5wu2D7opyGPhg1IC5ZBqM5ZYIOR8MwAIakj3yS20lKw=s100" class="icon user-icon"/><span><b>roman hudaj</b> <time style="font-size:0.8em">Nov 21, 2024, 6:55 PM</time></span></span></div><div style="padding:0.2em">What Kafka Uses</div><div style="padding:0.3em"></div></li></ul></div><hr/></div></details></span></body></html>